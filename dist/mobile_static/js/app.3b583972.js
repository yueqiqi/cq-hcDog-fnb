(function(e){function t(t){for(var a,n,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)n=r[u],s[n]&&p.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,r=1;r<o.length;r++){var l=o[r];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=o[0]))}return e}var a={},s={app:0},i=[];function n(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=a,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;i.push([1,"chunk-vendors"]),o()})({0:function(e,t){},"034f":function(e,t,o){"use strict";var a=o("64a9"),s=o.n(a);s.a},"0611":function(e,t,o){"use strict";var a=o("8b5a"),s=o.n(a);s.a},"085c":function(e,t,o){"use strict";var a=o("6c08"),s=o.n(a);s.a},"0939":function(e,t,o){"use strict";var a=o("d43d"),s=o.n(a);s.a},"09f8":function(e,t,o){},"0b4f":function(e,t,o){"use strict";var a=o("4fdd"),s=o.n(a);s.a},"0c0b":function(e,t,o){"use strict";var a=o("8a48"),s=o.n(a);s.a},1:function(e,t,o){e.exports=o("56d7")},"112c":function(e,t,o){},"14d4":function(e,t,o){"use strict";var a=o("27e4"),s=o.n(a);s.a},"17f6":function(e,t,o){},"1b16":function(e,t,o){"use strict";var a=o("1cfc"),s=o.n(a);s.a},"1cfc":function(e,t,o){},2:function(e,t){},2798:function(e,t,o){},"27e4":function(e,t,o){},"2d4b":function(e,t,o){"use strict";var a=o("f7d4"),s=o.n(a);s.a},3:function(e,t){},"302f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABVCAYAAABgijtDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWY4NzM3Ni1jMGU3LTA3NDctOTU2YS1jN2Y4NjNlMDY3YzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTY2MUEzNTU1NkVGMTFFQUFCOTVCREMwRjk0NEI4NjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTY2MUEzNTQ1NkVGMTFFQUFCOTVCREMwRjk0NEI4NjEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2E3YzQ0MWEtNWI1Yi04MTQyLWIyYWUtZmMxZmMwYjNiYzlkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGZiMGZlNTEtOTFkYy04OTQ1LWFjYWItYjM5NmQxMzA4NmQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+LpnA9QAABtdJREFUeNrsXdlu40YQHFG0LkuytTmwAbL5nDwE+aPNBsj1mIfkW4IEyD/oG/KwQRDEu7Il6z7TNcsxxiPSlCmJosgqYCyL4iGzerqre4bjUrfbVRY+l/a1tFfSyorIC1bS3kr7TdrfZqMfvJakvZH2ut7+uOL5lWATkQ9s1Ho5V5PBu1/kzY9B2xjyv6m3P/mu0XmpvPIF71VO0eh8Vhnf/vv9ZHCDtz948uMlejyJzz/AL3gG3+Ad5H9Va31UJfHFMQDwDd5B/qckvlgoa02nvvB4KwqIkhbzVZJf5BDAW0DyCZJPFAn+sS+wXq/VarVSi8VCLaWt5P1G2gfdUVLlclnUp68uLi6UL6+eR3s8e/JB9mw2U3Npm80mdB9sh3Fg3+lkordVKhVVrVZVpVolO+dG/nK5VJPxWM3n80TH4zg0X4yhcXmpPQJxBuSD9LG0QxnRoN9X1VpNNZtNMpVl8u8Hg9jejhj/ENfl97VoAeiBdaABwjCbTrUhtNtt6oEsko8eirgdRThiONz3hcRzvDexHmLP6AMYzkIajMHFSsjvyzWur6/18URGyEePjyK+0WioWr2+RRjCw0yI7nQ6+r02DMR2ifFT6enj0WhLJMJL9O/u1HVwDHFi8scRwg49utVq6RTuofcKeXDf+AxZAHo+Ur+1kAzjMMKuJjEein94f79lVDgHjK0lIYA4IflG1bsAiSAnzD0jncNxBnDl2K8phmIDsb19daWGw6GO+W42AOOpHiAVhIFtckCiJ/fwMoEoTkz+SIgJ6/EgLQz47EpiNm44yNMXF8+A/aPiOFQ+CkKud8E5DkE+zhtVgzgr8qWzXCY5LmkBx+7BBjbxpqrn3lzzHl8Y+7jEIxysLdHXilD5pihE7GE0SfP5MHFnSAKp6J3IAuxeC4PBZ/AAEG7wBjaJ+Byiru9kD25Y0N+B5KdPvinHuulcXci33ZDp0XbPxu8gHu7e/A5xZx9n0kDPOs7U/eO+B3HkmL8IUfdI51xjML3Vdvsmr39kfc425PIoALnhoC7XuBdv4oYfln9TJD+sCBNGgB2njQHgWGy3P7Pj/lMVPLtA9MgQLY/zXESJ03NDKS3yXaFnSrZPfjnZx6h8aAMTInAu5O1w4Z0XL2LPgevYrj7MEJ/1x/t+oXu+t2/PN/H7KTxS/FbvxSvarjX7sLBBpOj23dSttCNxKEIgbttVP4QLuF5bIMZ0fzJ2SvITxaSAtHKIm32O6yX1GcjzHVeQ2pfNQzXurMl3U7N9RdezagwR1UIiJbcPN72yFP8qmJARJ8ag9vUIntubA3eOukBc3F86RR1vTwHYe/8+N7X9uGzpMORjSNbZhvQrinwMzIxGo4fBnCigFAwDiDqPHv51ZvxUWOBJ1+37ITf8qUEWEBZHvMn5F09MA5s6Q7tR34U4sttH77RjvZ6oIT0TZGzNxwtKtbu4V13bx7x+d5sc6xoQzsmef4JUD7V8dzx/jKnW6sMEjaRA7d41FNQBwgZwMCBU4oTOE5Bfq23Ns4PLHhxglM31ECj/hnmNxh41fQN4sDwIvqSdIHGRBxW7oTPKZm4kQoMp3Sb7a0qqLH8QdEDYOWB83gFKvRhSZs9PAEyjwvy6MJeMSt6+D1pMnPl+tga45EMcp1H7NqKmWMEozGhdErcPPRE2fdtoAOLEPd8obpCBHN0lWj9z1+vpBy7hpuNG/9DLoehhOGGkmwkiHNnLCPlGNIHgqFx/HjypC1Gip2PJ/toIAlWPauFC2jqmTIzJHPaULyID5Os8PyQ2b7lzTMGGISS8xpLz9bIV802MTmMiJSdsZpD8xXye2pfdxcMQKZKf6mPTnMmTLfJ984TtsXkXI6tyqZbsCT7k+8jrl0dyy8godhnvJ05Avsn3iYK5fYLkEySfIPkEyScKoPZ3QRozZp71zGCGkVZKmxr5d7e3icb3dwWWaq076wTYwLVve72zIB91kzRGMOn2GfMJkk+QfIJq/7AX8v2jCj5vB4V8LsuweHlT+6deLxfzDoo+T59unyD5BMkn+QTJJ5jqHQfTiMewDoWwxZlt4Nphq3tkEajrp/FYWmrkY5n2Yw/sxJGPhz/PAfq/jKZAPt0+Yz5B8gmST1DtH1yQHVPt77Lm/7ks55LWAFRq5J/6OTuQjxVCCLp9guSTfILkE0VBILynIP+f9WrOO1IgrJd6Eeu/QP4f0/veZLWY8a4UAOBZ+Mb/w/0d5N9IezPp/ycfTHl3ck38VIFnwbfS3pk8/+fJ4GYh7adqs9Ms+1zsMHfEL+dqNrzFOvmvpf2KbaVut2vvg3/U8qW0VxSD+Qrz0t5K+1PawwOL/wswAACpMsVZie23AAAAAElFTkSuQmCC"},"30f2":function(e,t,o){"use strict";var a=o("f7ad"),s=o.n(a);s.a},3262:function(e,t,o){"use strict";var a=o("7a95"),s=o.n(a);s.a},"39e8":function(e,t,o){"use strict";var a=o("17f6"),s=o.n(a);s.a},"4aad":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABUCAYAAACr1ujmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWY4NzM3Ni1jMGU3LTA3NDctOTU2YS1jN2Y4NjNlMDY3YzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDZFQTQ0MUY1NkVGMTFFQUFERjlFNkI2OUZEODUxQkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDZFQTQ0MUU1NkVGMTFFQUFERjlFNkI2OUZEODUxQkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2E3YzQ0MWEtNWI1Yi04MTQyLWIyYWUtZmMxZmMwYjNiYzlkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGZiMGZlNTEtOTFkYy04OTQ1LWFjYWItYjM5NmQxMzA4NmQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+P4WA4wAAA/JJREFUeNrsnctu01AQhseJE+d+o4iLqLqp2IIEjwBbVlXX7HmAvgA8By/AqqwRTxAJxA6xg9IKCnHuca7Mb+rIDU3rSiFy7P+TRsTNper5PHPmHCfBqNfrckZZ40BjX2NHwxQSFaYaRxqHGi81TsQn+J7G+1zl9m6meEOSZlrEMDhk0SExHQ+3B+1fL7qN4z09fqrxKXF25+t87e6uhiRTFsVH0b4mdK56Rwpb27f08A0SH/IfmOnsE816jlAMyJZuipWv3NebzyD/kWnlOCoxQpMd/zyEfMswEhyRGGEk3VZvi9bj3AdwCCifUD6hfEL5hPIJ5RPKJ5RPKJ9QPqF8QvmE8gnlE8onlE8on1A+oXxC+WS9xObzeLPZTNqtlkwmk+WZkEhIoViUZDLJzI8SnXZbRqORTKfTpTEej90ThGU/QkD6cDgM9FhUBmcwYNnftLIOyXrj/AdN9bjX613rtbrdrvsaxsLr4GemabrTA+WHBGRrq9l0S/eqTiRMExeBE6JYKkkqlaL8sMzn1xEPcUnNYDezVTROHlQNSA96YlRrNcoPA2jUgpDJZiWrcVHZhtR+vy/9AFPEqioM5a8AZPBVWVsqly8t1XiNXC4nlmVdOYUYEfnyilis8xfFD7Sbd8u8CoZIU+9DRQBY4+PxTdsONA1QfoiBVE88shnr+MVpAstALO+K2ODRXgAnQC6fl26nw3X+Jk8HkOiBcr6sP0DT19T7vWzPZDKRWdLFUv5iqb9sa3fe9PkavnQ6TfmbCkr4vLQ7TqDnOL7HpSh/g/84X1cedHnm7fO7z2fZ31z83XrQ5Znh29aNercfafn+OT5oCcfjPPnutQLK30z88rDkC5L92OiZPz/glUDKDyGYu70GDuKxeXMZRd8bOXDiBN02pvyQgo0ar4HD5dhKtXpuDY+TwtLjcqUiacuaP2/ZVb0oEfkdPjRt2NxB1kM4MjtfKEj+rDIYi9ftRVZ6eZiZH4LGz7btf9b6OBn84lHq7UYj8o1ebDJ/XgGwr6+l3Oz33Z0/hKHyvXcAuXN8TKRHSv511uNo4hC4dr+O38ey/5/xb+OuZdD4Hr7wUNAGDiV9toYmDT0CGkbKD8sfoZlf1SUcYbdPKJ9QPqF8QvmE8gnlUz6hfEL5hPIJ5RPKJ5RPKJ9QPqF8QvmE8gnlE8onlE8on1A+oXwSCvnObDblSMSI2cT9xpFTyK+PnR5HJEaMh+4nlD9A/kc9eNezTzgqMaDf+ilO1/6sN996c/7z7u/vXzRkMnL+/pciJFJMx0PpNY6lc/r1hx7uaYy8T+l+03is2X+gsa+3dyRG39oRB/caRxqHGq80jvHDPwIMANRWmaaTk54RAAAAAElFTkSuQmCC"},"4af5":function(e,t,o){"use strict";var a=o("7b76"),s=o.n(a);s.a},"4cae":function(e,t,o){"use strict";var a=o("d30f"),s=o.n(a);s.a},"4d2f":function(e,t,o){"use strict";var a=o("09f8"),s=o.n(a);s.a},"4fdd":function(e,t,o){},"527a":function(e,t,o){"use strict";var a=o("62a4"),s=o.n(a);s.a},"55c3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAABUCAYAAABEFIPYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWY4NzM3Ni1jMGU3LTA3NDctOTU2YS1jN2Y4NjNlMDY3YzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE3M0JCNjM1NkVGMTFFQTk2MUVGRkNFNDA2MjlBQkUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE3M0JCNjI1NkVGMTFFQTk2MUVGRkNFNDA2MjlBQkUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2E3YzQ0MWEtNWI1Yi04MTQyLWIyYWUtZmMxZmMwYjNiYzlkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGZiMGZlNTEtOTFkYy04OTQ1LWFjYWItYjM5NmQxMzA4NmQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Tqlk/AAABGhJREFUeNrsnWtv01YYxx/HsXNr2pQ25SJx6aQxyrRpWjdpvEBD8AV4wfeg8AngAwD9HtvrTdpLNG1QZNYOUaZJW7m8a2A4aZyL08Q8j6lDq7W16ySVOP7/pKO6rpXL+flcH59TzbIs2uIap5uc5jmZBFTC5SSi73L6UU6kt/5wL1MoLeTGy2Rkx4g0DVmlEp5ndlr1C81a5Ye2Yy/ymRsi/qpIL87Msm8IVxL2auSKlJZCvb62wPLvp/j0QnZ8GtIT4V8jcc1cF/Hf+NU7SARGxnc9L+ILmpZCjiSl1Kd812PppGdEtVojt9PZ95rSxDgZhqHU91ZS/IuXr+iftef93zfqDmVMk0zzg7zL31/0f9rVKtUdp39+9dnfdH7u7I7XK+RzEP8xcPrUST8FPH32F82Uy1Sentr12qDU23aVjh876l+rcmkXlG3cG40GdUKq8ABreYXWKxWW79Lk5IR/LOnJ01WuEWpK5o+ybfzai5c7SrmU5gCTS/AEl+TtfD53zv+5/OcT+urLL5Tv2ySmc/fWtv0S7XdpC4X/iQ/4762diPxIjPjZM6d3beOTCgbwzJHJUn9oZxqmPyqQPoLUDKaCHTtlS3zl9RtynAbZxvt2ffvx9iFaPp/vt+/BEPC7b+fJaTTpwSPLF3/i+DElxWuWZXnlT75W6kvJ8C2MoOP3628P/XH83Gef7hgCBjeQ9ccKXbl0UakhXeXfx2qKB+Hi0cajcwcgHkA8UJPQ4ZznedTtduO/QXr/t+jxa/f4PUY+fNE00nUdxqOKFzFV246d2Uem9p8tk4mSdrs98i+q8w1YKpVgHFU9xAOIBxAPkt25k6cyzUwmXucuYq/fO4Qvqqdwjx9IfIozrFgsjuwDZHM5ysIDqnoA8QDiAcQDiAcQDyAeQDzYk/CwbK9HzrbVpAdBZu7GQiZ/Ws0mdTY3YWKIyFqATDY7mHiPxbsx4+VRtlfZZOnuIcTjE1WNc76HTbKjqkcbDyAeQDxIaK8+pes0McKHFGXhooRmwRBLc4RnD8IfxOAeYtgj0gN9SL6xUO2gqgcQDyAeQDyAeADxAOJBJCKFZSV0GgtN6+8stReyUraLsOxwpRoGmaY5mHgJyzZjitciiO+47qEsk04SWc8LFY+qHm08gHgA8SChvXqJnsVeLRvhmTsJyYZ1RMABS3OETZ4ihWXjro+PdOdJyDedhi1U9QDiAcQDiAcQDyAeQDyIMIwOu0B2r44bPZPpm7BVm/LfIAfZHRvsIlXX/dDsQOJl92qnXo8nXlZthohvt1oIyw6ZLOd5mHhU9WjjAcQDiAcJ7dXL7tX5QiF2rz4MifzpiM4NV2qE/Iy0e3VuhMuYEYtHVQ8gHkA8gHgwXPEbXg9z5Ulhy/WGiF/qtOrIkYSw5XpJxN9p1irU62LhouqI42bttRzeFfE/u43a7Y3159R2qrgBFBXedmwSx26jeptP/RRM4Nxym7XfOV3n43lOM8gupVjnZHFa5PSLnHgnwACn7VHQsVl9mAAAAABJRU5ErkJggg=="},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)},i=[],n=(o("57e7"),o("28a5"),{name:"app",components:{},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("/token/getToken",{}).then(function(t){e.setCookie("token",t.data.token,7)}),console.log(this.getCookie("token"))},setCookie:function(e,t,o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var s="expires="+a.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];while(" "==s.charAt(0))s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}}}),r=n,l=(o("034f"),o("2877")),c=Object(l["a"])(r,s,i,!1,null,null,null),d=c.exports,u=o("d225"),p=o("b0b4"),m=o("bc3a"),h=o.n(m);function f(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];while(" "==s.charAt(0))s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}h.a.defaults.baseURL="http://47.103.159.175:8080",h.a.defaults.timeout=1e4;var v=f("token");h.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",h.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",h.a.interceptors.request.use(function(e){return v&&(e.headers.token=v),e},function(e){return Promise.error(e)});var b=function(){function e(){Object(u["a"])(this,e)}return Object(p["a"])(e,null,[{key:"get",value:function(e,t,o){return new Promise(function(a,s){h.a.get(e,{params:t},o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}},{key:"post",value:function(e,t,o){return new Promise(function(a,s){h.a.post(e,JSON.stringify(t),o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}},{key:"post2",value:function(e,t,o){return new Promise(function(a,s){h.a.post(e,JSON.stringify(t),o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}}]),e}(),g=b,y={getTableData:function(e,t,o){var a="";g.get("/WorkOrder/list",{merchantCode:e,pageNo:t,pageSize:o}).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code?(a=e,console.log("111111",a)):alert(e.message)}),setTimeout(function(){return console.log("22222",a),a},2e3)}},C={list:function(e){return g.get("/WorkOrder/list",e)}},w=C,k=(o("499a"),o("b828")),x=o("8c4f"),S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{visible:e.nvShow,width:"850px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.nvShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#999999"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务分类")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:8}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{prop:"name"}}),o("el-table-column",{attrs:{prop:"memberCardType"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.memberCardType?[0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.row.memberCardName))]):e._e(),3==t.row.memberCardType&&0!=t.row.memberCardType?o("span",[e._v("(余次"+e._s(t.row.surplusCount)+")")]):e._e(),3!=t.row.memberCardType&&0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.row.cardBalance))]):e._e()]:void 0}}],null,!0)}),o("el-table-column",{attrs:{prop:"price"}})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},_=[],N=(o("ac6a"),o("f3e2"),o("7f7f"),o("6d67"),{components:{},data:function(){return{tableList:[{label:"级别",prop:"name"},{label:"名称",prop:"memberCardType"},{label:"别名",prop:"price"}],nvShow:!0,getRowKey:function(e){var t=0;return t=e.code+e.goodsVipId,t},getRowKey1:function(e){},checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[],searchList:[]}},computed:{},methods:{handleCheckAllChange:function(){},getTree:function(){var e=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:1}).then(function(t){console.log("请求弹窗树状结果",t),"10000"==t.code&&(e.nvSearchList=t.data,t.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),e.searchList=t.data,console.log("%c商品模板","color:#70ff57;font-size:20px;font-weight:bold",e.options))})},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},cellcb:function(e){if(e.list.length>0)return"myCell"},toggleRowExpansion:function(e,t){console.log("手风琴下拉列表",e,t),this.secondList=t.list},confirm:function(){var e=this.arr1.concat(this.arr2);console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.$emit("sendNv",e)},close:function(){this.$emit("closeNv",!1)},serverChecked:function(e){this.arr1=e,console.log("勾选选项",e,this.serverSelected)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",e,this.serverSelected,this.arr2)},handleClassify:function(e){console.log("点击二级分类",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.customerCode,categoryCode:e,level:"3"}).then(function(e){console.log("请求的书距",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,3==t.memberCardType?t.price=e.standardPrice:t.price=t.memberCardGoodsPrice,null==e.price&&(e.price=0),t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code}),e.children=e.list,e.children.map(function(e){1==e.memberCardType?e.name="通用储值卡":2==e.memberCardTypew?e.name="限定储值卡":3==e.memberCardType?e.name="次卡":4==e.memberCardType?e.name="默认卡":e.name="卡外"})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.getTree(),this.customerCode="3100000100069"}}),L=N,O=Object(l["a"])(L,S,_,!1,null,"2452493f",null),I=O.exports,T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hint"},[o("el-dialog",{attrs:{center:"","close-on-click-modal":!1,title:"提示",center:"","before-close":e.close,visible:e.notice,width:"25%"},on:{"update:visible":function(t){e.notice=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("h3",[e._v("您选择了线下支付方式，请确认已收到客户钱款后再确认完成支付")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("结算时间：")]),o("div",{staticStyle:{width:"70%",height:"30px",background:"#f2f2f2","line-height":"30px","border-radius":"10px"}},[e._v(e._s(e.date))])])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-right":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#999","font-weight":"bold"},attrs:{type:"text"},on:{click:e.close}},[e._v("未收到钱款")])],1)]),o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-left":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#0000FF","font-weight":"bold"},attrs:{type:"text",disabled:e.onceClick},on:{click:e.confirm}},[e._v("已收款，确认")])],1)])],1)],1)])],1)},A=[],M=(o("a481"),{components:{},props:{notice:Boolean,onceClick:Boolean},data:function(){return{date:"2019-10-31 10:00:00",hintShow:!0}},computed:{},methods:{confirm:function(){this.$emit("rec")},close:function(){this.$emit("unrec")}},mounted:function(){},created:function(){var e=new Date,t=e.toLocaleString("chinese",{hour12:!1});this.date=t.replace(/\//g,"-")}}),$=M,P=(o("4af5"),Object(l["a"])($,T,A,!1,null,"7abbb91e",null)),D=P.exports,G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello",staticStyle:{width:"100%","margin-left":"-2px"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"exportTab"}},[o("excel",{attrs:{list:e.allList}})],1),o("div",{staticStyle:{width:"100%","margin-top":"50px"}},[o("div",{staticClass:"d-flex"},[o("div",{staticClass:"font-big",staticStyle:{"margin-top":"5px","margin-left":"10px"}},[e._v("输入车牌号开单:")]),o("carNum",{staticStyle:{"margin-left":"15px"},model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}}),o("div",{staticClass:"ml"},[o("el-button",{attrs:{type:"primary"},on:{click:e.goQuickOrder}},[e._v("快捷开单")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.goCompre}},[e._v("综合开单")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"}},[e._v("使用兑换码")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出明细")])],1)],1),o("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"},on:{"tab-click":e.tabChange},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.tabTitle,function(e,t){return o("el-tab-pane",{key:t,attrs:{label:e,name:e}})}),1),o("div",{staticClass:"d-flex",staticStyle:{width:"100%","margin-top":"20px","margin-left":"10px"}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"开单时间"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.getTime,callback:function(t){e.getTime=t},expression:"getTime"}})],1),o("el-form-item",{attrs:{label:"金额"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入.."},model:{value:e.fMoney,callback:function(t){e.fMoney=t},expression:"fMoney"}}),e._v(" --- "),o("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入.."},model:{value:e.eMoney,callback:function(t){e.eMoney=t},expression:"eMoney"}})],1),o("el-form-item",{attrs:{label:"请选择工单类型"}},[o("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"工单类型"},on:{change:e.typeChange},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},e._l(e.types,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",[o("el-input",{staticClass:"ml",attrs:{placeholder:"请输入车牌号/姓名/手机号"},model:{value:e.other,callback:function(t){e.other=t},expression:"other"}})],1),o("el-form-item",[o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),o("div",{staticStyle:{width:"100%",overflow:"auto"}},[o("el-table",{ref:"tableDatas",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[o("el-table-column",{attrs:{prop:"workorderType",label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.workorderType?"综合单":"快捷单"))])]}}])}),o("el-table-column",{attrs:{prop:"workOrderCode",label:"工单编号",width:"180"}}),o("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号",width:"130"}}),o("el-table-column",{attrs:{prop:"vehicleIdNum",label:"车架号",width:"180"}}),o("el-table-column",{attrs:{prop:"customerName",label:"客户姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"customerPhone",label:"手机号码",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"服务项",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical","word-wrap":"break-word","white-space":"normal"}},[o("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[e._l(t.row.serverList2,function(t,a){return o("div",{key:a},[e._v(e._s(t.goodsName))])}),e._l(t.row.serverList2,function(a,s){return o("div",{key:s,attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.goodsName)+e._s(t.row.serverList2.length>2?a.goodsName[1]+"...":"..."))])})],2)],1)]}}])}),o("el-table-column",{attrs:{prop:"name",label:"商品",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical","word-wrap":"break-word","white-space":"normal"}},[o("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[e._l(t.row.goodsList2,function(t,a){return o("div",{key:a},[e._v(e._s(t.goodsName))])}),e._l(t.row.goodsList2,function(a,s){return o("div",{key:s,attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.goodsName)+e._s(t.row.goodsList2.length>2?a.goodsName[1]+"...":"..."))])})],2)],1)]}}])}),o("el-table-column",{attrs:{prop:"totalMoney",label:"工单总额",width:""}}),o("el-table-column",{attrs:{prop:"preferentialMoney",label:"优惠金额",width:""}}),o("el-table-column",{attrs:{prop:"realityMoney",label:"应收金额/元",width:"180"}}),o("el-table-column",{attrs:{prop:"createName",label:"开单人员",width:"100"}}),o("el-table-column",{attrs:{prop:"workorderTime",label:"开单时间",width:"180"}}),o("el-table-column",{attrs:{prop:"payTime",label:"支付完成时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!=t.row.status?o("span",[e._v(e._s(t.row.payTime))]):e._e()]}}])}),o("el-table-column",{attrs:{prop:"name",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:1==t.row.status||2==t.row.status?{color:"#0000ff"}:0==t.row.status||3==t.row.status?{color:"#00cc00"}:4==t.row.status?{color:"#ff0000"}:{color:"#333333"}},[e._v(e._s(0==t.row.status?"草稿":1==t.row.status?"施工中":2==t.row.status?"待确认":3==t.row.status?"待支付":4==t.row.status?"挂账":5==t.row.status?"已完成":"已作废"))])]}}])}),o("el-table-column",{staticStyle:{"font-size":"14px"},attrs:{prop:"name",label:"操作",width:"244",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.finish(t.$index,t.row)}}},[e._v("完工  |")]):e._e(),1==t.row.status||2==t.row.status||3==t.row.status||4==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.close(t.$index,t.row)}}},[e._v("结算  |")]):e._e(),5==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.look(t.$index,t.row)}}},[e._v("查看  |")]):e._e(),3==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.buyer(t.$index,t.row)}}},[e._v("挂账  ")]):e._e(),1==t.row.status||0==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑  |")]):e._e(),6!=t.row.status&&3!=t.row.status&&5!=t.row.status&&4!=t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,t.row)}}},[e._v("作废  |")]):e._e(),3!=t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.copy(t.$index,t.row)}}},[e._v("复制")]):e._e()]}}])})],1)],1),o("div",{staticStyle:{"margin-left":"380px",float:"left","margin-top":"40px","margin-bottom":"80px"}},[o("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),o("finish",{attrs:{customerPhone:e.datas.customerPhone,plateNumber:e.datas.plateNumber,merchantName:e.datas.merchantName,merchantPhone:e.datas.merchantPhone,isShowFinish:e.isShowFinish,orderCode:e.datas.orderCode},on:{closeCompAlert:e.closeCompAlert,compConfirm:e.compConfirm,noSend:e.noSend}}),o("buyer",{attrs:{carNumber:e.carNumber,buyerAlert:e.buyerAlert},on:{closeBuyerAlert:e.closeBuyerAlert,buyerConfirm:e.sendBuyerData}})],1)},V=[],E=o("21a6"),F=o.n(E),j=o("1146"),R=o.n(j),z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%","show-close":!1},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},on:{change:e.inputTel},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger",disabled:e.dis},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},B=[],U={components:{},props:{isShowFinish:{type:Boolean}},data:function(){return{status:null,completeConfirm:!0,tel:"",dis:!0}},computed:{},methods:{inputTel:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)?this.dis=!1:(this.$message.error("请输入正确的手机号"),this.tel="",this.dis=!0)},close:function(){this.$emit("closeCompAlert")},noSend:function(){this.$emit("noSend",this.status)},comConfirm:function(){this.$emit("compConfirm",this.status,this.tel)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},W=U,Z=(o("e5fb"),Object(l["a"])(W,z,B,!1,null,"5db253a5",null)),Y=Z.exports,q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("el-input",{attrs:{placeholder:this.province?"请输入内容":"请先选择省简称",readonly:!this.province,maxlength:"8"},model:{value:e.plateOther,callback:function(t){e.plateOther=t},expression:"plateOther"}},[o("el-button",{attrs:{slot:"prepend"},on:{click:function(t){t.stopPropagation(),e.showKeyborad=!e.showKeyborad}},slot:"prepend"},[o("span",{staticClass:"title",class:{placeholder:!e.province}},[e._v(e._s(e.province||"省简称"))]),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"}),o("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showKeyborad,expression:"showKeyborad"}],staticClass:"plate-number-wrapper",attrs:{type:"flex",justify:"space-around"}},e._l(e.provincialAbbrev,function(t,a){return o("div",{key:a,staticClass:"item",class:{active:e.province===t},on:{click:function(o){o.stopPropagation(),e.province=t,e.showKeyborad=!1}}},[e._v("\n          "+e._s(t)+"\n        ")])}),0)],1)],1)],1)},Q=[],H=o("01c8"),J={props:{value:{type:String,default:""}},data:function(){return{province:"",showKeyborad:!1,plateOther:"",provincialAbbrev:X}},computed:{plateNumber:{get:function(){return this.province+this.plateOther},set:function(e){if(e.length>1){var t=e.split(""),o=Object(H["a"])(t),a=o[0],s=o.slice(1);this.province=a,this.plateOther=s.join("")}else this.province=e}}},watch:{value:function(e){this.plateNumber!==e&&(this.plateNumber=e)},plateNumber:function(e){this.$emit("input",e)}},mounted:function(){var e=this;this.plateNumber=this.value,document.addEventListener("click",function(){e.showKeyborad=!1})},beforeDestroy:function(){document.removeEventListener("click",function(){})}},X=["皖","苏","浙","沪","闽","赣","鄂","湘","桂","琼","京","津","冀","晋","新","蒙","辽","吉","黑","川","渝","云","贵","藏","陕","甘","宁","青","鲁","豫","粤","港","澳","台","警","领","使","学","军","WJ"],K=J,ee=(o("39e8"),Object(l["a"])(K,q,Q,!1,null,"72396bc6",null)),te=ee.exports,oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{visible:e.buyerAlert,width:"40%",title:"挂账",center:"","close-on-click-modal":!1,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.buyerAlert=t}}},[o("div",{staticClass:"dialogContent"},[o("div",{staticClass:"dialogContentTop"},[o("span",{staticClass:"label"},[e._v("挂账选择")]),o("span",{staticClass:"labelDetail"},[e._v("请选择车牌号【"+e._s(e.carNumber)+"】挂账类型")])]),o("div",{staticClass:"dialogContentMiddle"},[o("div",{staticClass:"Item"},[o("el-radio",{attrs:{label:"1"},on:{change:e.radioChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("单位挂账")]),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.radio,expression:"radio == 1"}],staticStyle:{display:"inline"}},[o("el-select",{attrs:{placeholder:"请选择挂账单位"},on:{focus:e.getComponys},model:{value:e.unitValue,callback:function(t){e.unitValue=t},expression:"unitValue"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e}})}),1),o("span",{staticClass:"handleBtn",on:{click:e.createUnit}},[e._v("新建挂账单位")])],1)],1),o("div",{staticClass:"Item"},[o("el-radio",{attrs:{label:"2"},on:{change:e.radioChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("个人挂账")]),o("div",{directives:[{name:"show",rawName:"v-show",value:2==e.radio,expression:"radio == 2"}],staticStyle:{display:"inline"}},[o("el-select",{attrs:{placeholder:"请选择个人挂账用户"},on:{focus:e.getPersonage},model:{value:e.unitValue2,callback:function(t){e.unitValue2=t},expression:"unitValue2"}},e._l(e.options2,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e}})}),1),o("span",{staticClass:"handleBtn",on:{click:e.addPer}},[e._v("新建客户")])],1)],1),o("div",{staticClass:"Item"},[o("span",[e._v("预计结算日期：")]),o("el-date-picker",{staticClass:"chooseDate",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}})],1),o("div",{staticClass:"SMSAlert"},[e._v("\n            短信提醒\n          ")]),o("div",{staticClass:"Item"},[o("span",{staticClass:"openSMS"},[e._v("开启短信提醒：")]),o("el-radio",{attrs:{label:"1"},model:{value:e.SMS,callback:function(t){e.SMS=t},expression:"SMS"}},[e._v("是")]),o("el-radio",{attrs:{label:"0"},model:{value:e.SMS,callback:function(t){e.SMS=t},expression:"SMS"}},[e._v("否")])],1),o("div",{staticClass:"SMSTip"},[e._v("\n            短信提醒选择开启，会在预计结算日期当天上午09:00发送挂账待结算短信给车主\n          ")])]),o("div",{staticClass:"Item"},[o("span",{staticStyle:{"vertical-align":"top"}},[e._v("短信提醒内容：")]),o("div",{staticClass:"textarea"},[e._v("\n\t\t\t\t\t\t"+e._s(e.msg)+"\n\t\t\t\t\t")])])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.buyerConfirm}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"新增挂账单位",visible:e.dialog2,width:"40%",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog2=t}}},[o("div",{staticClass:"createNewUnit"},[o("div",[o("div",{staticClass:"label"},[e._v("*挂账单位名称")]),o("el-input",{attrs:{placeholder:"请输入挂账单位名称"},model:{value:e.newUnit.name,callback:function(t){e.$set(e.newUnit,"name",t)},expression:"newUnit.name"}})],1),o("div",[o("div",{staticClass:"label"},[e._v("*联系人")]),o("el-input",{attrs:{placeholder:"请输入单位联系人"},model:{value:e.newUnit.people,callback:function(t){e.$set(e.newUnit,"people",t)},expression:"newUnit.people"}})],1),o("div",[o("div",{staticClass:"label"},[e._v("*手机号")]),o("el-input",{attrs:{placeholder:"请输入单位手机号"},model:{value:e.newUnit.telphone,callback:function(t){e.$set(e.newUnit,"telphone",t)},expression:"newUnit.telphone"}})],1),o("div",[o("div",{staticClass:"label"},[e._v("单位地址")]),o("el-input",{attrs:{placeholder:"请输入单位地址"},model:{value:e.newUnit.address,callback:function(t){e.$set(e.newUnit,"address",t)},expression:"newUnit.address"}})],1),o("div",[o("div",{staticClass:"label"},[e._v("备注")]),o("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:e.newUnit.remark,callback:function(t){e.$set(e.newUnit,"remark",t)},expression:"newUnit.remark"}})],1)]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialog2=!1}}},[e._v("返回上一步")]),o("el-button",{attrs:{type:"primary"},on:{click:e.newCompany}},[e._v("保 存")])],1)]),o("newSelf",{ref:"newSelf",attrs:{carNumber:e.carNumber}})],1)},ae=[],se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增客户信息",visible:e.dialogVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:17,offset:1}},[a("el-form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.rules,"label-width":"16em"}},[a("el-form-item",{attrs:{label:"客户名称:",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.name,callback:function(t){e.$set(e.infoForm,"name",t)},expression:"infoForm.name"}})],1),a("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.phone,callback:function(t){e.$set(e.infoForm,"phone",t)},expression:"infoForm.phone"}})],1),a("el-form-item",{attrs:{label:"性别:",prop:"sex"}},[[a("el-radio",{attrs:{label:"1"},model:{value:e.infoForm.sex,callback:function(t){e.$set(e.infoForm,"sex",t)},expression:"infoForm.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.infoForm.sex,callback:function(t){e.$set(e.infoForm,"sex",t)},expression:"infoForm.sex"}},[e._v("女")])]],2),a("el-form-item",{attrs:{label:"生日:"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择出生日期"},model:{value:e.infoForm.birthday,callback:function(t){e.$set(e.infoForm,"birthday",t)},expression:"infoForm.birthday"}})],1),a("el-form-item",{attrs:{label:"客户标签:"}},[a("el-select",{attrs:{placeholder:"请选择客户标签",multiple:!0},model:{value:e.infoForm.labelList,callback:function(t){e.$set(e.infoForm,"labelList",t)},expression:"infoForm.labelList"}},e._l(e.labelList,function(e){return a("el-option",{key:e.id,attrs:{label:e.labelName,value:e.labelName}})}),1)],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请填写客户备注信息"},model:{value:e.infoForm.remark,callback:function(t){e.$set(e.infoForm,"remark",t)},expression:"infoForm.remark"}})],1),a("el-form-item",{attrs:{label:"所在城市:"}},[a("el-cascader",{ref:"cascaderAddr",attrs:{options:e.options,props:{value:"code",label:"name",children:"child"}},on:{change:e.handleChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1),a("el-form-item",{attrs:{label:"详细地址:",prop:"address"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.address,callback:function(t){e.$set(e.infoForm,"address",t)},expression:"infoForm.address"}})],1),a("el-form-item",{attrs:{label:"微信:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.wechatPhone,callback:function(t){e.$set(e.infoForm,"wechatPhone",t)},expression:"infoForm.wechatPhone"}})],1),a("el-form-item",{attrs:{label:"QQ:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.qq,callback:function(t){e.$set(e.infoForm,"qq",t)},expression:"infoForm.qq"}})],1),a("el-form-item",{attrs:{label:"邮箱:"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.email,callback:function(t){e.$set(e.infoForm,"email",t)},expression:"infoForm.email"}})],1),a("el-form-item",{attrs:{label:"证件号码:",prop:"idCard"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.idCard,callback:function(t){e.$set(e.infoForm,"idCard",t)},expression:"infoForm.idCard"}})],1),a("div",{staticClass:"fontleft"},[e._v("\n\t\t\t\t\t身份证图片上传:\n\t\t\t\t\t"),a("span",{staticClass:"color"},[e._v("(每张小于5M)")])]),a("el-row",[a("el-col",{attrs:{span:5,offset:10}},[e._v("正面")]),a("el-col",{attrs:{span:5,offset:4}},[e._v("反面")])],1),a("el-row",{attrs:{offset:5}},[a("el-col",{attrs:{span:8,offset:7}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imageUrl,name:"image",accept:"image/*","show-file-list":!1,"on-success":function(t){return e.handleUploaderSuccess(t,"idCardImg1")},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.infoForm.idCardImg1?a("img",{staticClass:"avatar",attrs:{src:e.infoForm.idCardImg1}}):a("i",[a("img",{staticClass:"imageStyle",attrs:{src:o("a902")}})])])],1),a("el-col",{attrs:{span:6,offset:1}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imageUrl,name:"image","show-file-list":!1,"on-success":function(t){return e.handleUploaderSuccess(t,"idCardImg2")},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.infoForm.idCardImg2?a("img",{staticClass:"avatar",attrs:{src:e.infoForm.idCardImg2}}):a("i",[a("img",{staticClass:"imageStyle",attrs:{src:o("302f")}})])])],1)],1),a("div",{staticClass:"fontleft"},[e._v("\n\t\t\t\t\t驾驶证图片上传:\n\t\t\t\t\t"),a("span",{staticClass:"color"},[e._v("(每张小于5M)")])]),a("el-row",[a("el-col",{attrs:{span:5,offset:10}},[e._v("正面")]),a("el-col",{attrs:{span:5,offset:4}},[e._v("反面")])],1),a("el-row",{attrs:{offset:5}},[a("el-col",{attrs:{span:8,offset:7}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imageUrl,name:"image","show-file-list":!1,"on-success":function(t){return e.handleUploaderSuccess(t,"driverLicenseImg1")},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.infoForm.driverLicenseImg1?a("img",{staticClass:"avatar",attrs:{src:e.infoForm.driverLicenseImg1}}):a("i",[a("img",{staticClass:"imageStyle",attrs:{src:o("55c3")}})])])],1),a("el-col",{attrs:{span:6,offset:1}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imageUrl,name:"image","show-file-list":!1,"on-success":function(t){return e.handleUploaderSuccess(t,"driverLicenseImg2")},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.infoForm.driverLicenseImg2?a("img",{staticClass:"avatar",attrs:{src:e.infoForm.driverLicenseImg2}}):a("i",[a("img",{staticClass:"imageStyle",attrs:{src:o("9c02")}})])])],1)],1),a("div",{staticClass:"fontleft"},[e._v("\n\t\t\t\t\t其他图片上传:\n\t\t\t\t\t"),a("span",{staticClass:"color"},[e._v("(每张小于5M)")])]),a("el-row",[a("el-col",{attrs:{span:8,offset:7}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imageUrl,name:"image","show-file-list":!1,"on-success":function(t){return e.handleUploaderSuccess(t,"otherPictures1")},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.infoForm.otherPictures1?a("img",{staticClass:"avatar",attrs:{src:e.infoForm.otherPictures1}}):a("i",[a("img",{staticClass:"imageStyle",attrs:{src:o("4aad")}})])])],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:14}},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.UpdateDetailsCustomerInfo}},[e._v("保 存")])],1)],1)],1)],1)},ie=[],ne=o("cebc"),re=(o("96cf"),o("3b8d")),le=(o("7514"),o("a8db"));o("ac4d"),o("8a81");function ce(e){var t=[],o=!0,a=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(o=(i=n.next()).done);o=!0){var r=i.value,l=r.child,c=Object(le["a"])(r,["child"]);if(l.length){var d=c;d.child=ce(l),t.push(d)}else t.push(c)}}catch(u){a=!0,s=u}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return t}var de,ue={components:{},props:{carNumber:{type:String},merchantCode:{type:String},visible:Boolean,add:Boolean,info:{type:Object,default:function(){return{}}}},computed:{},data:function(){return{dialogVisible:!1,area:[],originalPhone:"",infoForm:{cusClass:"0",cusType:"0",name:"",phone:"",qq:"",wechatPhone:"",email:"",idCard:"",birthday:"",address:"",cityCode:"",cityName:"",districtCode:"",provinceCode:"",provinceName:"",idCardImg1:"",idCardImg2:"",driverLicenseImg1:"",driverLicenseImg2:"",otherPictures1:"",sex:""},date:"",options:[],labelList:[],imageUrl:"",rules:{name:{required:!0,message:"客户名称不能为空",trigger:"blur"},phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],sex:{required:!0,message:"请选择性别",trigger:"blur"},address:{max:50,message:"请填写地址，不超过50个字",trigger:"blur"},idCard:[{max:18,message:"长度不超过18位",trigger:"blur"}]}}},created:function(){this.imageUrl=this.$imageUrl,this.getCityInfoList(),this.getLabInfoList()},methods:{close:function(){this.dialogVisible=!1},handleRemove:function(e,t){console.log(e,t)},handleUploaderSuccess:function(e,t){var o=this;setTimeout(function(){console.log(e),o.infoForm[t]=e.data.url},1e3)},handleChange:function(e){console.log(e),console.log(this.area);var t=this.options.find(function(t){return t.code===e[0]}),o=t.child.find(function(t){return t.code===e[1]});console.log(o);var a=o.child.find(function(t){return t.code===e[2]});console.log(t.name,o.name,a.name),this.infoForm.cityName=o.name,this.infoForm.cityCode=o.code,this.infoForm.provinceCode=t.code,this.infoForm.provinceName=t.name,this.infoForm.districtCode=a.code,this.infoForm.districtName=a.name,console.log(this.$refs["cascaderAddr"].getCheckedNodes()[0])},handlePictureCardPreview:function(e){console.log(e),this.dialogImageUrl=e.url},getCityInfoList:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$http.get("/system/getRegionTreeList",{merchantCode:this.$route.query.merchantCode}).then(function(e){t.options=ce(e.data)});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getLabInfoList:function(){var e=this;this.$http.get("LaborCarController/getCustomerLabelList",{merchantCode:this.$route.query.merchantCode}).then(function(t){e.labelList=t.data})},UpdateDetailsCustomerInfo:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=Object(ne["a"])({merchantCode:this.$route.query.merchantCode,plateNumber:this.carNumber},this.infoForm),console.log(t),this.$http.post("/onAccount/addUserOnAccount",t).then(function(e){"10000"==e.code?o.dialogVisible=!1:alert(e.message)});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},pe=ue,me=(o("6184"),Object(l["a"])(pe,se,ie,!1,null,"7cc6fcd0",null)),he=me.exports,fe={components:{newSelf:he},props:{buyerAlert:{type:Boolean},carNumber:{type:String}},data:function(){return{company:[],personage:[],msg:"",merchantCode:"",dialog1:!1,dialog2:!1,radio:"1",SMS:"0",chooseDate:"",phone:"",textarea:"",unitValue:"",unitValue2:"",newUnit:{name:"",people:"",telphone:"",address:"",remark:""}}},computed:{options:function(){return this.company.map(function(e){e.value=e.id,e.label=e.name}),this.company},options2:function(){return this.personage.map(function(e){e.value=e.code,e.label=e.name+"/"+e.phone}),this.personage}},methods:{getComponys:function(){var e=this;this.$http.get("/onAccount/onAccountList_T",{merChantCode:this.$route.query.merchantCode,pageNum:1,pageSize:999,name:"",vehicleCode:this.carNumber}).then(function(t){e.company=t.data})},getPersonage:function(){var e=this;this.$http.get("/onAccount/getUserOnAccountList",{merchantCode:this.$route.query.merchantCode,plateNum:this.carNumber,condition:""}).then(function(t){e.personage=t.data})},handleDialogClose:function(){this.$parent.buyerAlert=!1},addPer:function(){this.$refs.newSelf.dialogVisible=!0},newCompany:function(){var e=this,t={merchantCode:this.$route.query.merchantCode,name:this.newUnit.name,contactPerson:this.newUnit.people,contactPhone:this.newUnit.telphone,address:this.newUnit.address,remark:this.newUnit.remark,vehicleCode:this.carNumber,id:""};this.$http.post("/onAccount/onAccount",t).then(function(t){(t.code="10000")?e.dialog2=!1:alert(t.message)})},radioChange:function(e){console.log(e),2==e?this.unitValue="":this.unitValue2="",this.getMsg()},createUnit:function(){this.dialog2=!0},close:function(){this.$emit("closeBuyerAlert")},getMsg:function(){var e=this;this.$http.get("/system/getOnAcountSMSMessage",{merchantCode:this.$route.query.merchantCode,plateNumber:this.carNumber,onAccountType:1==this.radio?"2":"1"}).then(function(t){e.msg=t.data})},buyerConfirm:function(){var e=this,t={onAccountType:1==this.radio?"2":"1",onAccountId:1==this.radio?this.unitValue.id:this.unitValue2.code,toPhone:1==this.radio?this.unitValue.contactPhone:this.unitValue2,estimateBlanceTime:this.chooseDate,flag:this.SMS};this.$emit("buyerConfirm",t),setTimeout(function(){e.radio="1",e.SMS="0",e.chooseDate="",e.unitValue2="",e.textarea="",e.unitValue="",e.newUnit={name:"",people:"",telphone:"",address:"",remark:""}},1e3)}},mounted:function(){},created:function(){this.getMsg()}},ve=fe,be=(o("085c"),Object(l["a"])(ve,oe,ae,!1,null,"4ff14e92",null)),ge=be.exports,ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("div",{},[o("el-table",{attrs:{data:e.list,id:"exportTab"}},[o("el-table-column",{attrs:{prop:"workorderType",label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.workorderType?"综合单":"快捷单"))])]}}])}),o("el-table-column",{attrs:{prop:"workOrderCode",label:"工单编号",width:"180"}}),o("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),o("el-table-column",{attrs:{prop:"vehicleIdNum",label:"车架号"}}),o("el-table-column",{attrs:{prop:"customerName",label:"客户姓名"}}),o("el-table-column",{attrs:{prop:"customerPhone",label:"手机号码"}}),o("el-table-column",{attrs:{prop:"name",label:"服务项",width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",e._l(t.row.serverList2,function(t,a){return o("div",{key:a},[o("div",[e._v(e._s(t.goodsName))])])}),0)]}}])}),o("el-table-column",{attrs:{prop:"name",label:"商品"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goodsList2,function(t,a){return o("div",{key:a},[o("div",[e._v(e._s(t.goodsName))])])})}}])}),o("el-table-column",{attrs:{prop:"totalMoney",label:"工单总额"}}),o("el-table-column",{attrs:{prop:"preferentialMoney",label:"优惠金额"}}),o("el-table-column",{attrs:{prop:"realityMoney",label:"应收金额/元"}}),o("el-table-column",{attrs:{prop:"createName",label:"开单人员"}}),o("el-table-column",{attrs:{prop:"workorderTime",label:"开单时间"}}),o("el-table-column",{attrs:{prop:"payTime",label:"支付完成时间",width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:1==t.row.status||2==t.row.status?{color:"#0000ff"}:0==t.row.status||3==t.row.status?{color:"#00cc00"}:4==t.row.status?{color:"#ff0000"}:{color:"#333333"}},[e._v(e._s(0==t.row.status?"草稿":1==t.row.status?"施工中":2==t.row.status?"待确认":3==t.row.status?"待支付":4==t.row.status?"挂账":5==t.row.status?"已完成":"已作废"))])]}}])})],1)],1)])},Ce=[],we={props:{list:Array},components:{},data:function(){return{}},computed:{},methods:{},mounted:function(){},created:function(){}},ke=we,xe=Object(l["a"])(ke,ye,Ce,!1,null,"375435ca",null),Se=xe.exports,_e={components:{finish:Y,carNum:te,excel:Se,buyer:ge},data:function(){return{personage:[],buyerWorkOrderCode:"",company:[],editableTabsValue:"全部",allList:[],carNumber:"",buyerAlert:!1,isShowFinish:!1,orderCode:null,finishIdx:null,datas:{customerPhone:"",plateNumber:"",merchantName:"",merchantPhone:""},province:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],tabTitle:["全部","草稿","施工中","待确认","待支付","挂账","已完成","已作废"],cur:0,other:"",orderType:"",types:[{value:"",label:"全部"},{value:"2",label:"快捷单"},{value:"1",label:"综合单"}],eMoney:"",fMoney:"",getTime:"",plateNumber:"",status:"",currentPage:1,pageSize:10,total:null,tableData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-7776e6),e.$emit("pick",[o,t])}}]},value6:"",value7:""}},created:function(){this.merchantCode=this.$route.query.merchantCode,console.log("操作人id",this.$route.query.employeeId),void 0!=this.$route.query.employeeId&&localStorage.setItem("createId",this.$route.query.employeeId||""),this.getTableData(this.merchantCode,1,10),this.getAlllist()},methods:{getAlllist:function(){var e=this;this.$http.get("/WorkOrder/list",{merchantCode:this.merchantCode,pageNo:1,pageSize:999999,startTime:"",endTime:"",status:"",serchMoney1:"",serchMoney2:"",customerName:"",orderType:""}).then(function(t){"10000"==t.code&&(t.data.map(function(e){var t=[],o=[];e.laborOrderGoodsList.map(function(a){1==a.type?(t.push(a),e.serverList2=t):(o.push(a),e.goodsList2=o)})}),e.allList=t.data),e.$nextTick(function(){e.$refs.tableDatas.doLayout()})})},getTableData:function(e,t,o,a,s,i,n,r,l,c){var d=this;this.$http.get("/WorkOrder/list",{merchantCode:e,pageNo:t,pageSize:o,startTime:a,endTime:s,status:i,serchMoney1:n,serchMoney2:r,customerName:l,orderType:c}).then(function(e){console.log("请求结果工单列表",e),"10000"==e.code&&(e.data.map(function(e){var t=[],o=[];e.laborOrderGoodsList.map(function(a){1==a.type?(t.push(a),e.serverList2=t):(o.push(a),e.goodsList2=o)})}),d.tableData=e.data,d.total=e.total),d.$nextTick(function(){d.$refs.tableDatas.doLayout()}),console.log("最后的数组",d.tableData)})},tabChange:function(e){console.log("选中的选项",e);var t=e.index;this.cur=e,this.status=0==t?"":t-1,this.getTableData(this.merchantCode,1,10,"","",this.status)},search:function(){console.log("时间",this.getTime,"金额",this.fMoney+"--"+this.eMoney,"工单类型",this.orderType,"其他选项",this.other);var e="",t="";null!=this.getTime&&(e=this.getTime[0],t=this.getTime[1]),this.getTableData(this.merchantCode,1,10,e,t,this.status,this.fMoney,this.eMoney,this.other,this.orderType)},typeChange:function(){console.log("工单类型",this.orderType)},finish:function(e,t){var o=this;console.log(t),this.orderCode=t.workOrderCode,this.finishIdx=e,this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:t.plateNumber}).then(function(e){if(console.log("请求商家电话/名称结果",e),"10000"==e.code){o.isShowFinish=!0;var a=t.customerPhone,s=t.plateNumber,i=e.data.merchantPhone,n=e.data.merchantName,r=t.workOrderCode;o.datas={customerPhone:a,plateNumber:s,merchantName:n,merchantPhone:i,orderCode:r}}else alert(e.message)})},compConfirm:function(e,t){this.finishOrder(t,this.datas.plateNumber,this.datas.merchantName,this.datas.merchantPhone,this.datas.orderCode)},noSend:function(e){console.log("挂账",this.datas.orderCode,this.datas.customerPhone),this.finishOrder("",this.datas.plateNumber,this.datas.merchantName,this.datas.merchantPhone,this.datas.orderCode)},closeCompAlert:function(){this.isShowFinish=!1},finishOrder:function(e,t,o,a,s){var i=this;this.$http.get("/WorkOrder/sendMessage",{toPhone:e,action:"WORK_ORDER_FINISHED",plateNum:t,merchantName:o,merchantPhone:a,orderCode:s,merchantCode:this.merchantCode}).then(function(e){console.log("请求完单结果",e),"10000"==e.code?(i.tableData[i.finishIdx].status=2,i.isShowFinish=!1):alert(e.message)})},look:function(e,t){var o;o=5==t.status?"/billdetail":1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,type:"look"}}),location.reload()},close:function(e,t){console.log("结算",t),3==t.status||4==t.status?this.$router.push({path:"/financialClose",query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType}}):this.$router.push({path:"/close",query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType}}),location.reload()},buyer:function(e,t){this.buyerAlert=!0,this.carNumber=t.plateNumber,this.buyerWorkOrderCode=t.workOrderCode,this.rowIdx=e},sendBuyerData:function(e){var t=this;this.$http.get("/WorkOrder/buyoncredit",{merchantCode:this.merchantCode,workOrderCode:this.buyerWorkOrderCode,onAccountType:e.onAccountType,onAccountId:e.onAccountId,plateNum:this.carNumber,estimateBlanceTime:e.estimateBlanceTime,flag:1==e.flag}).then(function(e){"10000"==e.code?(t.tableData[t.rowIdx].status=4,t.buyerAlert=!1):alert(e.message)})},closeBuyerAlert:function(){this.buyerAlert=!1},set:function(e,t){var o;o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"set",status:t.status}}),location.reload()},del:function(e,t){var o=this;console.log("作废",e,t),this.$http.get("/WorkOrder/updateStatus",{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode}).then(function(t){console.log("请求作废结果",t),"10000"==t.code&&(o.tableData[e].status=6)})},copy:function(e,t){var o;console.log(t),o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"copy"}}),location.reload()},goCompre:function(){var e;e=""!=this.plateNumber?{carNum:this.plateNumber,merchantCode:this.merchantCode}:{merchantCode:this.merchantCode},this.$router.push({path:"/comprehensiveOrder",query:e})},goQuickOrder:function(){var e;e=""!=this.plateNumber?{carNum:this.plateNumber,has:"has",merchantCode:this.merchantCode}:{has:"noHas",merchantCode:this.merchantCode},this.$router.push({path:"/quickOrder",query:e}),location.reload()},handleClick:function(){alert("button click")},handleCurrentChange:function(e){var t="",o="";null!=this.getTime&&(t=this.getTime[0],o=this.getTime[1]),this.getTableData(this.merchantCode,e,10,t,o,this.status,this.fMoney,this.eMoney,this.other,this.orderType),console.log("当前页: ".concat(e))},exportExcel:function(){var e={raw:!0},t=R.a.utils.table_to_book(document.querySelector("#exportTab"),e),o=R.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{F.a.saveAs(new Blob([o],{type:"application/octet-stream"}),"工单列表.xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,o)}return o}}},Ne=_e,Le=(o("527a"),Object(l["a"])(Ne,G,V,!1,null,"4d795106",null)),Oe=Le.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-spb",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{height:"60px","margin-left":"30px"}},[a("div",{staticClass:"font-big"},[e._v(e._s(e.carNum))])]),"copy"!=e.useType?a("div",{staticStyle:{"margin-left":"5px","margin-top":"8px"}},[a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){0==e.dis?e.setCar():e.dm()}}})]):e._e(),a("div",{staticStyle:{"margin-left":"120px"}},[a("el-switch",{attrs:{"inactive-color":"#999999","active-color":"#13ce66",disabled:e.dis},on:{change:function(t){return e.check()}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1),a("div",{staticClass:"font-big",staticStyle:{"margin-left":"10px"}},[e._v("\n\t\t\t\t\t使用他人会员卡\n\t\t\t\t\t"),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.state))])])]),a("div",{staticStyle:{color:"#666666"}},[a("div",{staticClass:"d-flex"},[a("div",[a("span",{staticStyle:{color:"red","margin-right":"10px"}},[e._v("*")]),a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加手机号",disabled:e.dis},on:{change:e.inputTel},model:{value:e.carAddTel,callback:function(t){e.carAddTel=t},expression:"carAddTel"}})],1),a("div",[a("span",{staticStyle:{color:"red","margin-right":"10px","margin-left":"20px"}},[e._v("*")]),a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加姓名",disabled:e.dis},model:{value:e.carAddName,callback:function(t){e.carAddName=t},expression:"carAddName"}})],1),a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"22px","margin-top":"14px"}},[e._v("\n\t\t\t\t\t\t挂账:\n\t\t\t\t\t\t"),a("span",{staticStyle:{color:"red","padding-top":"3px"}},[e._v("¥ "+e._s(e.buyer))])]),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"22px"}},[a("div",{staticStyle:{"padding-top":"14px"}},[e._v("本次公里数")]),a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"5px"}},[a("el-input",{staticClass:"kil",staticStyle:{width:"100px"},attrs:{disabled:e.dis},model:{value:e.carKil,callback:function(t){e.carKil=t},expression:"carKil"}}),a("div",{staticStyle:{"padding-top":"14px","margin-left":"5px"}},[e._v("KM")])],1)]):e._e()]),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[a("div",[a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加发动机号",disabled:e.dis},model:{value:e.carAddEngine,callback:function(t){e.carAddEngine=t},expression:"carAddEngine"}})],1),a("div",[a("el-input",{staticClass:"phone",staticStyle:{"margin-left":"22px",height:"23px",width:"200px"},attrs:{placeholder:"添加车架号",disabled:e.dis},model:{value:e.carVin,callback:function(t){e.carVin=t},expression:"carVin"}})],1),a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{"margin-left":"22px","padding-top":"14px"}},[e._v("车辆注册日期")]),a("div",{staticClass:"c-date",staticStyle:{width:"200px","margin-left":"5px"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",disabled:e.dis},model:{value:e.carDate,callback:function(t){e.carDate=t},expression:"carDate"}})],1)])]):e._e(),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[a("div",[a("el-input",{staticClass:"phone",staticStyle:{width:"120px"},attrs:{placeholder:"车身颜色",disabled:e.dis},model:{value:e.carColor,callback:function(t){e.carColor=t},expression:"carColor"}})],1),a("div",{staticClass:"cartype",staticStyle:{height:"23px","margin-left":"22px"}},[a("el-select",{staticStyle:{width:"202px",height:"23px"},attrs:{placeholder:"请选择",disabled:e.dis},on:{change:e.chCar},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}},e._l(e.brand,function(e){return a("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1),a("el-cascader",{staticStyle:{width:"302px","margin-left":"22px"},attrs:{disabled:e.dis,options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.seriesName,callback:function(t){e.seriesName=t},expression:"seriesName"}})],1)]):e._e()])]),a("div",{staticClass:"d-flex",staticStyle:{height:"60px","margin-left":"30px"}},[a("div",{staticStyle:{width:"300px"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容...",disabled:e.dis},on:{focus:e.searchShowClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("div",{staticStyle:{"margin-left":"22px"}},[a("el-button",{attrs:{type:"primary",disabled:e.dis},on:{click:e.searchShowClick}},[e._v("选择服务/商品")])],1),a("div",{staticStyle:{"margin-left":"20px","margin-top":"14px"}},[a("font",{attrs:{color:"#808080"}},[e._v("找不到项目？")]),a("el-button",{staticStyle:{color:"#409eff"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNs}},[e._v("新建服务")]),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"服务不计入库存,如:洗车、保养..."}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})]),a("el-button",{staticStyle:{"margin-left":"5px",color:"#409eff"},attrs:{disabled:e.dis,type:"text"},on:{click:e.openNp}},[e._v("新建商品")]),a("span",{staticStyle:{color:"#409eff"}},[e._v("(配件)")]),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"商品计入库存,如:玻璃水、机油滤芯..."}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("div",{staticStyle:{"margin-top":"20px"}},[e._m(0),a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"},on:{"tab-click":e.vipChange},model:{value:e.vipBoxCur,callback:function(t){e.vipBoxCur=t},expression:"vipBoxCur"}},e._l(e.sCheck,function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.memberCardName,name:e}})}),1)],1),a("div",{staticStyle:{width:"100%","margin-top":"20px"}},[a("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[a("el-checkbox-group",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"},on:{change:e.checkGroup},model:{value:e.checkServer,callback:function(t){e.checkServer=t},expression:"checkServer"}},e._l(e.fCheck,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(o){return e.checkChange(o,t)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[[a("div",[e._v(e._s(t.goodsName))]),a("div",{staticStyle:{"margin-left":"5px"}},[e._v("¥"+e._s(t.price))])]],2)}),1)],1),a("div",{staticStyle:{"text-align":"left",color:"#c5c5c8","margin-top":"20px","margin-left":"50px","border-left":"3px solid #6F93FE","padding-left":"3px"}},[e._v("会员卡内常用项目")]),a("el-checkbox-group",{on:{change:e.checkGroup2},model:{value:e.checkServer2,callback:function(t){e.checkServer2=t},expression:"checkServer2"}},[a("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[a("div",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.laborItemsVoList,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(a){return e.checkChange2(o,t)}}},[[a("div",[e._v(e._s(t.name))]),a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{"margin-left":"5px"}},[e._v("剩余"+e._s(t.surplusCount)+"次")])])]],2)}),1),a("div",{staticClass:"c-checkBoxs",staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.freeItemsVoList,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(a){return e.checkChange2(o,t)}}},[[a("div",[e._v(e._s(t.name))]),a("div",{staticStyle:{"margin-left":"5px"}},[e._v("剩余"+e._s(t.surplusCount)+"次")]),a("div",{staticClass:"d-flex"})]],2)}),1)])]),a("div",{staticStyle:{"margin-left":"20px","margin-top":"70px","text-align":"center"}},[a("font",{attrs:{size:"1"}},[a("font",{attrs:{color:"#808080"}},[e._v("更多项目请在搜索栏中搜索~")])],1)],1)],1),a("div",{staticClass:"end d-spb",staticStyle:{"margin-left":"20px"}},[a("div",{style:{position:"relative"}},[a("div",{staticClass:"end-img d-flex"},[a("div",{staticClass:"carAlert",on:{click:function(t){return e.showCar()}}},[a("img",{attrs:{src:o("c013"),alt:""}})]),a("div",{staticClass:"icon",staticStyle:{"text-align":"center"}},[e._v(e._s(e.allCarNum))])]),e.isCarShow?a("div",{staticClass:"carTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#fff",fontSize:"14px",backgroundColor:"#409eff"},data:e.carList,"show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"goodsName",label:"已选项目",width:"180"}}),a("el-table-column",{attrs:{prop:"num",label:"清空",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[a("span",{on:{click:e.clearAll}},[a("i",{staticClass:"el-icon-delete"}),e._v("\n\t\t\t\t\t\t\t\t\t清空\n\t\t\t\t\t\t\t\t")])]}},{key:"default",fn:function(t){return[a("span",{staticClass:"carDel",staticStyle:{"margin-right":"5px",color:"#4c6acc","font-size":"5px"},on:{click:function(o){0==e.dis?e.handleDelete(t.$index,t.row):e.dm()}}},[e._v("删除")]),a("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[a("el-input-number",{attrs:{size:"small",min:1,max:999,disabled:e.dis||1==t.row.isGift},on:{change:function(o){return e.carGoodsCount(t.$index,t.row)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})],1)]}}],null,!1,2271213377)}),a("el-table-column",{attrs:{prop:"price",label:"",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[a("i",{staticClass:"el-icon-close",on:{click:e.closeCar}})]}},{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[e._v("¥"+e._s(t.row.price))])]}}],null,!1,2227630479)})],1)],1):e._e()]),a("div",{staticClass:"end-btn d-flex"},[a("div",{staticClass:"title"},[e._v("\n\t\t\t\t\t已选 \n\t\t\t\t\t"),a("span",{staticStyle:{"font-size":"28px",color:"#f00"}},[e._v(e._s(0==e.dis?e.carList.length:e.fCheck.length))]),e._v("\n\t\t\t\t\t 个项目\n\t\t\t\t")]),a("div",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toBill}},[e._v("下一步")])],1)])]),a("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}}),a("newserve",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),a("setCar",{attrs:{setCarshow:e.setCarshow},on:{closeCarAlert:e.closeCarAlert,carConfirm:e.sendCarData}}),a("uservip",{attrs:{usevip:e.usevip,vehicleId:e.vehicleId},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.sendVipData}}),a("chooseGoods",{ref:"goods",on:{onfirm:e.onfirm}})],1)},Te=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"30px"}},[o("div",{staticClass:"font-big",staticStyle:{"text-align":"left"}},[e._v("快速选择开单项目")])])}],Ae=(o("0cd8"),o("2caf"),o("c5f6"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建服务","close-on-click-modal":!1,center:"",visible:e.nsIsShow,width:"40%"},on:{"update:visible":function(t){e.nsIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"服务名称"}},[o("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"服务分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择服务分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e.showHour?o("el-form-item",{attrs:{label:"工时/小时"}},[o("el-col",{attrs:{span:7}},[o("el-input",{model:{value:e.form.hour,callback:function(t){e.$set(e.form,"hour",t)},expression:"form.hour"}})],1),o("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[o("span",{staticStyle:{"margin-right":"10px"}},[e._v("工时单价")]),o("el-input",{staticStyle:{width:"60%"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1):e._e(),o("el-form-item",{attrs:{label:"一口价"}},[o("el-input",{model:{value:e.form.buy,callback:function(t){e.$set(e.form,"buy",t)},expression:"form.buy"}})],1),o("el-form-item",{attrs:{label:"服务模板"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务模板"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.nsList,function(e,t){return o("el-option",{key:t,attrs:{label:e.templateName,value:e.code}})}),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)}),Me=[],$e={components:{},props:{nsIsShow:Boolean,nsList:Array,searchList:Array},data:function(){return{options:null,value:null,showHour:!1,radio:"1",chooseRadio:null,List:[],form:{name:"",region:"",hour:"",price:"",buy:"",model:""},newServe:!0,tel:""}},computed:{},methods:{look:function(){console.log("查看",this.$props.nsList)},handleChange:function(e){console.log("%c选择德服务分类","color:#70ff57;font-size:20px;font-weight:bold",e,this.form.region)},fList:function(e){console.log("选择的",e)},chRadio:function(e){console.log(e),this.showHour=2==e},close:function(){this.$emit("closeNs")},save:function(){var e=this;this.$emit("saveNs");var t,o,a,s,i,n,r=this.form;""!=r.region?(t=r.region[0].split(",")[0],o=r.region[1].split(",")[0],a=r.region[2].split(",")[0],s=r.region[0].split(",")[1],i=r.region[1].split(",")[1],n=r.region[2].split(",")[1]):alert("请选择服务分类"),console.log(t,s,o,i,a,n),this.getNewServe(r.name,t,s,o,i,a,n,r.buy,r.model),setTimeout(function(){e.form={name:"",region:"",hour:"",price:"",buy:"",model:""}},2e3)},confirm:function(){var e=this;this.$emit("sendNs");var t,o,a,s,i,n,r=this.form;""!=r.region?(t=r.region[0].split(",")[0],o=r.region[1].split(",")[0],a=r.region[2].split(",")[0],s=r.region[0].split(",")[1],i=r.region[1].split(",")[1],n=r.region[2].split(",")[1]):alert("请选择服务分类"),console.log("分类",t,s,o,i,a,n),this.getNewServe(r.name,t,s,o,i,a,n,r.buy,r.model),setTimeout(function(){e.form={name:"",region:"",hour:"",price:"",buy:"",model:""}},2e3)},getNewServe:function(e,t,o,a,s,i,n,r,l){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"2",type:"2",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:a,twoCategoryName:s,threeCategoryCode:i,threeCategoryName:n,standardPrice:r,createName:"fnb",createCode:"007",templateCode:l}).then(function(e){console.log("新建服务结果",e),"10000"==e.code||alert(e.message)})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Pe=$e,De=(o("2d4b"),Object(l["a"])(Pe,Ae,Me,!1,null,"08c56b3a",null)),Ge=De.exports,Ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建商品","close-on-click-modal":!1,center:"",visible:e.npIsShow,width:"50%"},on:{"update:visible":function(t){e.npIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"商品(配件)名称"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"商品(配件)分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择商品分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-input",{attrs:{placeholder:'如"米其林"等'},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),o("el-form-item",{attrs:{label:"规格"}},[o("el-input",{attrs:{placeholder:'如"255/60R18"、"J000823"等'},model:{value:e.form.spe,callback:function(t){e.$set(e.form,"spe",t)},expression:"form.spe"}})],1),o("el-form-item",{attrs:{label:"计量单位"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择计量单位"},on:{focus:e.getUnit},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.unit,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("span",[e._v(e._s(t))])])}),1)],1),o("el-form-item",{attrs:{label:"商品(配件)售价"}},[o("el-input",{attrs:{placeholder:"¥0"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),o("el-form-item",{attrs:{label:"原厂编码"}},[o("el-input",{attrs:{placeholder:"请输入原厂编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),o("el-form-item",{attrs:{label:"库存阈值"}},[o("el-input",{attrs:{placeholder:"请输入安全库存预警值"},model:{value:e.form.repertory,callback:function(t){e.$set(e.form,"repertory",t)},expression:"form.repertory"}})],1),o("el-form-item",{attrs:{label:"配件编码"}},[o("el-input",{attrs:{placeholder:"请输入商品配件编码"},model:{value:e.form.coding,callback:function(t){e.$set(e.form,"coding",t)},expression:"form.coding"}})],1),o("el-form-item",{attrs:{label:"厂家类型"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择厂家类型"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.type,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"条形码"}},[o("el-input",{attrs:{placeholder:"请输入条形码"},model:{value:e.form.barCode,callback:function(t){e.$set(e.form,"barCode",t)},expression:"form.barCode"}})],1),o("el-form-item",{attrs:{label:"商品(配件)介绍"}},[o("el-input",{attrs:{placeholder:"请输入商品介绍、例如：库存/规格/品牌等",type:"textarea"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)},Ee=[],Fe={components:{},props:{npIsShow:{type:Boolean},searchList:Array},data:function(){return{showHour:!1,radio:"1",chooseRadio:null,type:[{label:"原厂件",value:"1"},{label:"品牌件",value:"2"},{label:"副厂件",value:"3"},{label:"拆解件",value:"4"},{label:"修复件",value:"5"},{label:"假货",value:"6"}],unit:[],form:{name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""},newProduct:!0,tel:""}},computed:{},methods:{getUnit:function(){var e=this;this.$http.get("/laborSynthesize/getUnit",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?e.unit=t.data:alert(t.message)})},handleChange:function(e){console.log(e)},close:function(){this.$emit("closeNp")},save:function(){var e=this;this.$emit("saveNp");var t,o,a,s,i,n,r=this.form;""!=r.region?(t=r.region[0].split(",")[0],o=r.region[1].split(",")[0],a=r.region[2].split(",")[0],s=r.region[0].split(",")[1],i=r.region[1].split(",")[1],n=r.region[2].split(",")[1]):alert("请选择商品分类"),this.addNewProduct(r.name,t,s,o,i,a,n,r.price,r.brand,r.spe,r.unit,r.code,r.model,r.barCode,r.text),setTimeout(function(){e.form={name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""}},2e3)},confirm:function(){var e=this;this.$emit("sendNp");var t,o,a,s,i,n,r=this.form;""!=r.region?(t=r.region[0].split(",")[0],o=r.region[1].split(",")[0],a=r.region[2].split(",")[0],s=r.region[0].split(",")[1],i=r.region[1].split(",")[1],n=r.region[2].split(",")[1]):alert("请选择商品分类"),console.log("分类",t,s,o,i,a,n),this.addNewProduct(r.name,t,s,o,i,a,n,r.price,r.brand,r.spe,r.unit,r.code,r.model,r.barCode,r.text),setTimeout(function(){e.form={name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""}},2e3)},addNewProduct:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"1",type:"1",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:a,twoCategoryName:s,threeCategoryCode:i,threeCategoryName:n,standardPrice:r,createName:"fnb",createCode:"007",brandName:l,specification:c,unit:d,oemCode:u,quality:p,snCode:m,description:h}).then(function(e){console.log("请求新建商品结果",e),"10000"==e.code||alert(e.message)})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},je=Fe,Re=(o("674e"),Object(l["a"])(je,Ve,Ee,!1,null,"310a9646",null)),ze=Re.exports,Be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"setCar"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑车辆",center:"",visible:e.setCarshow,width:"30%","show-close":!1},on:{"update:visible":function(t){e.setCarshow=t}}},[o("div",{staticClass:"d-flex"},[o("carNum",{staticStyle:{width:"100%"},model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},Ue=[],We={name:"setCar",components:{carNum:te},props:{setCarshow:{type:Boolean}},data:function(){return{carAbb:"",carAbbs:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],setCar:!0,carNum:"",plateNumber:""}},computed:{},methods:{close:function(){this.$emit("closeCarAlert",this.$props.setCarshow)},carConfirm:function(){this.$emit("carConfirm",this.$props.setCarshow,this.plateNumber)}},mounted:function(){},created:function(){}},Ze=We,Ye=(o("30f2"),Object(l["a"])(Ze,Be,Ue,!1,null,"a396fae8",null)),qe=Ye.exports,Qe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"useVip"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"使用他人会员卡",center:"",visible:e.usevip,width:"30%","show-close":!1},on:{"update:visible":function(t){e.usevip=t}}},[o("div",[o("el-input",{attrs:{placeholder:"请输入客户姓名、手机号进行搜索","suffix-icon":"el-icon-search",size:"mini"},on:{input:e.changeInput},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),o("el-table",{directives:[{name:"show",rawName:"v-show",value:e.showData,expression:"showData"}],staticStyle:{width:"100%",background:"#F2F2F2"},attrs:{data:e.tableData},on:{"row-click":e.rowClick}},[o("el-table-column",{attrs:{prop:"name",label:"客户姓名",align:"center"}}),o("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},He=[],Je=(o("d25f"),{props:{usevip:{type:Boolean},vehicleId:String},components:{},data:function(){return{showData:!1,restaurants:[],state:"",tableData:[]}},computed:{},methods:{rowClick:function(e){this.state=e.name+"/"+e.phone,this.condition=e.customerCode,this.showData=!1},changeInput:function(){var e=this;this.$http.get("/LaborFastOrder/searchCustomer",{merchantCode:this.merchantCode,vehicleId:this.$props.vehicleId,keyWords:this.state}).then(function(t){"10000"==t.code?(e.showData=!0,e.tableData=t.data):alert(t.message)})},close:function(){this.$emit("closeVipAlert",this.$props.usevip)},carConfirm:function(){this.$emit("vipConfirm",this.condition,this.state)},querySearch:function(e,t){var o=this.restaurants,a=e?o.filter(this.createFilter(e)):o;t(a)},createFilter:function(e){return function(t){return 0===t.cName.toLowerCase().indexOf(e.toLowerCase())||0===t.phone.toLowerCase().indexOf(e.toLowerCase())||0===t.carNum.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.state=e.cName+"/"+e.phone+"/"+e.carNum,this.otherName=e.cName,this.otherPhone=e.phone,this.otherCar=e.carNum},handleIconClick:function(e){console.log("bi",e)},loadAll:function(){return[{cName:"张三",phone:"155280324555",carNum:"川Q1293"},{cName:"李四",phone:"12320324555",carNum:"川A12333"},{cName:"王麻子",phone:"15120324555",carNum:"川M18273"}]}},mounted:function(){this.restaurants=this.loadAll()},created:function(){this.merchantCode=this.$route.query.merchantCode}}),Xe=Je,Ke=(o("4cae"),Object(l["a"])(Xe,Qe,He,!1,null,"04229fe4",null)),et=Ke.exports,tt=(new a["default"],function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{visible:e.popShopServeVisible,center:"",width:"60%",title:"选择服务和商品"},on:{"update:visible":function(t){e.popShopServeVisible=t}}},[o("div",{staticClass:"popShopServeLeft"},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.popShopServeClick},model:{value:e.popShopServeActive,callback:function(t){e.popShopServeActive=t},expression:"popShopServeActive"}},[o("el-tab-pane",{attrs:{label:"服务",name:"服务"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"30%"},attrs:{"unique-opened":!0},on:{select:e.ServeSelect}},e._l(e.servesData,function(t){return o("el-submenu",{key:t.code,attrs:{index:t.code}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t){return o("el-menu-item",{key:t.code,attrs:{index:t.code}},[e._v(e._s(t.name))])})],2)}),1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"}}},[o("el-table-column",{attrs:{label:"名称",prop:"goodsName",width:"170"}}),o("el-table-column",{attrs:{label:"价格",prop:"price"}}),o("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})]}}])})],1)],1),o("el-tab-pane",{attrs:{label:"商品",name:"商品"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"30%"},attrs:{"unique-opened":!0},on:{select:e.ServeSelect}},e._l(e.shopsData,function(t){return o("el-submenu",{key:t.code,attrs:{index:t.code}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t){return o("el-menu-item",{key:t.code,attrs:{index:t.code}},[e._v(e._s(t.name))])})],2)}),1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"}}},[o("el-table-column",{attrs:{label:"名称",prop:"goodsName",width:"170"}}),o("el-table-column",{attrs:{label:"价格",prop:"price"}}),o("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})]}}])})],1)],1),o("el-tab-pane",[o("span",{attrs:{slot:"label"},slot:"label"},[o("div",{staticClass:"inputSearch"},[o("el-input",{attrs:{placeholder:"请输入搜索名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}},[o("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},on:{click:e.search},slot:"prefix"})])],1)]),o("div",{staticStyle:{height:"360px"}},[o("el-table",{staticStyle:{width:"560px"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"},align:"center"}},[o("el-table-column",{attrs:{prop:"goodsName",label:"名称",width:"240",align:"center"}}),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"}}),o("el-table-column",{attrs:{label:"选择",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-checkbox",{staticStyle:{"text-align":"center"},on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})],1)]}}])})],1)],1)])],1)],1),o("div",{staticClass:"popShopServeRight"},[o("div",{staticClass:"popShopServeRightHead"},[e._v("\n          已选项目\n        ")]),o("div",{staticClass:"selectedList"},e._l(e.selectedGoods,function(t){return o("div",{key:t.goodsCode,staticClass:"selectedItem"},[o("div",[e._v("\n              "+e._s("1"==t.type?"【服务】":"【商品】")+"\n              "+e._s(t.goodsName)+"\n            ")]),o("div",{staticClass:"del",on:{click:function(o){return e.DelselectedGoods(t)}}},[o("div",{staticClass:"el-icon-close"})])])}),0),o("div",{staticClass:"twoBtn"},[o("el-button",{on:{click:function(t){e.popShopServeVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.serveShopEnSure}},[e._v("确定")])],1)])])],1)}),ot=[],at={computed:{tableData:function(){var e=this;return this.selectedGoods.forEach(function(t){e.initData.forEach(function(e){e.goodsCode==t.goodsCode&&(e.selected=!0)})}),this.initData}},data:function(){return{tableData1:[],tableData2:[],searchContent:"普通洗车",popShopServeVisible:!1,popShopServeActive:"服务",servesData:[],shopsData:[],initData:[],selectedGoods:[],ensureSelect:[]}},methods:{popShopServeClick:function(){var e=this;this.initData=[],"商品"==this.popShopServeActive&&0==this.shopsData.length&&this.$http.get("/LaborGoods/categoryList",{merchantCode:this.Mcode,parentCode:0,oneCategoryCode:"S02"}).then(function(t){e.shopsData=t.data})},ServeSelect:function(e,t){this.getLevel3(e)},getLevel3:function(e){var t=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.Mcode,categoryCode:e,level:3}).then(function(e){var o=e.data;o.forEach(function(e){e.selected=!1,e.goodsCome=3,e.goodsCount=1,e.num=e.goodsCount}),t.initData=o})},selectedClick:function(e,t){e?this.selectedGoods.push(t):this.DelselectedGoods(t)},DelselectedGoods:function(e){var t=this.selectedGoods.length-1;for(t;t>=0;t--)this.selectedGoods[t].goodsCode==e.goodsCode&&this.selectedGoods.splice(t,1)},serveShopEnSure:function(){this.$emit("onfirm",this.selectedGoods)},search:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborGoods/listByCategoryForWork",{merchantCode:this.Mcode,condition:this.searchContent});case 2:t=e.sent,t.successful&&(t.data.map(function(e){e.selected=!1,e.goodsCome=3,e.goodsCount=1,e.num=e.goodsCount}),o=t.data,this.initData=o);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=this;this.Mcode=this.$route.query.merchantCode,this.$http.get("/LaborGoods/categoryList",{merchantCode:this.Mcode,parentCode:0,oneCategoryCode:"S01"}).then(function(t){e.servesData=t.data})}},st=at,it=(o("cbd3"),Object(l["a"])(st,tt,ot,!1,null,"636448fa",null)),nt=it.exports,rt={components:{newproduct:ze,newserve:Ge,setCar:qe,uservip:et,chooseGoods:nt},data:function(){return{customerCodeOther:"",customerNameOther:"",customerPhoneOther:"",choosedAlert:[],remarsk:"",brand:[],series:[],brandName:"",seriesName:"",workorderTime:"",showSwitch:!0,state:null,isThereVip:null,npIsShow:!1,nsIsShow:!1,nsList:null,options:null,carNone:"",customerCode:null,cur:0,tabTitle:["服务","商品"],showInput:!1,serverSelected:[],serverList:[],searchShow:!1,searchList:[],isCarShow:!1,carList:[],carList1:[],carList2:[],allNum:0,checkServer2:[],sCheck:[],checkServer:[],fCheck:[],vipbox:[],vipBoxCur:"",usevip:null,otherName:"",otherPhone:"",otherCar:"",radio:null,search:"",orderTime:"今天",amgValue:"",amg:[],carType:"",carTypes:[],buyer:"0",carColor:"",carDate:"",carVin:"",carKil:"",carAddEngine:"",carAddName:null,carAddTel:null,setCarshow:!1,vehicleId:null,carNum:"暂无车牌",dis:!1,choosed:[]}},computed:{allCarNum:function(){var e=0;return this.carList.map(function(t){e+=t.goodsCount}),e}},created:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.getBrand(),this.merchantCode=this.$route.query.merchantCode,this.useType=this.$route.query.type,this.orderId=this.$route.query.orderid,this.workOrderCode=this.$route.query.workOrderCode,"has"==this.$route.query.has&&(this.carNum=this.$route.query.carNum,this.showInput=!0,this.inputVipList(this.carNum)),"look"!=this.$route.query.type){e.next=16;break}return t="",e.next=10,this.getLookList(t);case 10:this.dis=!0,this.carNone="none",this.showInput=!0,setTimeout(function(){a.fCheck=a.choosed,a.carList=a.choosed,console.log("查看",a.fCheck,a.carList)},2800),e.next=30;break;case 16:if("copy"!=this.$route.query.type&&"set"!=this.$route.query.type){e.next=28;break}return o="copy",e.next=20,this.getLookList(o);case 20:return this.dis=!1,this.carNone="hidden",this.showInput=!0,e.next=25,this.getFcheck();case 25:setTimeout(function(){var e=[],t=[],o=[],s=[];a.choosed.map(function(s){null==s.goodsVipId&&(a.fCheck.map(function(t){s.goodsName==t.goodsName&&(t.mapList=s.mapList,t.goodsCount=s.goodsCount,t.isGift=s.isGift,e.push(t))}),console.log("arr",e)),null!=s.goodsVipId&&(console.log("使用他人会员卡",a.sCheck),a.sCheck.map(function(e){null!=e.laborItemsVoList&&e.laborItemsVoList.length>0&&e.laborItemsVoList.map(function(e){s.goodsName+s.goodsVipId==e.goodsName+e.goodsVipId&&(e.mapList=s.mapList,e.isGift=s.isGift,e.goodsCount=s.goodsCount,t.push(e))}),null!=e.freeItemsVoList&&e.freeItemsVoList.length>0&&e.freeItemsVoList.map(function(e){console.log(e.goodsName+e.goodsVipId),s.goodsName+s.goodsVipId==e.goodsName+e.goodsVipId&&(e.goodsCount=s.goodsCount,e.isGift=s.isGift,o.push(e))})}))});for(var i=0;i<a.choosed.length;i++)if(null==a.choosed[i].goodsVipId){for(var n=a.choosed[i],r=n.goodsName,l=!1,c=0;c<e.length;c++){var d=e[c],u=d.goodsName;if(u==r){l=!0;break}}l||s.push(n)}a.$refs.goods.selectedGoods=a.uniqs(s),a.fCheck=a.fCheck.concat(a.uniqs(s)),a.checkServer=e.concat(a.uniqs(s)),a.checkServer2=t.concat(o),a.carList=t.concat(e).concat(o).concat(a.uniqs(s))},2800),e.next=30;break;case 28:this.getFcheck(),this.getCarBrand();case 30:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{addNew:function(e,t,o){var a=this,s="",i="";null!=this.carType&&(s=this.carType.split("/")[1]),null!=this.amgValue&&(i=this.amgValue.split("/")[1]),this.$http.post("/laborSynthesize/addCarAndCustomer",{plateNumber:e,phone:t,name:o,vehicleIdNum:this.carVin,engineNum:this.carAddEngine,registeredDate:this.carDate,brandName:s,modelName:i,seriesName:i,lastMileage:this.carKil,carColor:this.carColor,source:"S",merchantCode:this.merchantCode}).then(function(e){"10000"==e.code?(a.vehicleId=e.data.vehicleId,a.customerCode=e.data.customerCode):alert(e.message)})},getRowKeys:function(e){return e.goodsCode},dm:function(){console.log("dis",this.dis)},getLookList:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:2}).then(function(e){if("10000"==e.code){if(o.isMyCard=e.data.isMyCard,1==e.data.isMyCard){o.radio=!0;var t=e.data.customerNameOther+"/"+e.data.customerPhoneOther;o.state=t,o.customerCodeOther=e.data.customerCodeOther||"",o.customerNameOther=t.split("/")[0]||"",o.customerPhoneOther=t.split("/")[1]||""}else o.radio=!1;o.remarsk=e.data.remarks;var a=e.data.seriesName,s=e.data.modelName;o.brand.map(function(t){e.data.brandName==t.brandName&&(o.brandName=t.value,o.chCar(t.value))}),setTimeout(function(){var e=o;e.series.map(function(t){if(a==t.label){var o=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==s&&(e.seriesName=[o,t.value])})},1500)}})},1500),o.radio?o.getOther(e.data.plateNumber):o.inputVipList(e.data.plateNumber),setTimeout(function(){o.carNum=e.data.plateNumber,o.carAddTel=e.data.customerPhone,o.carAddName=e.data.customerName,o.carKil=e.data.mileage,o.carDate=e.data.applyDate,o.carAddEngine=e.data.engineNum,o.carVin=e.data.vehicleIdNum,o.carColor=e.data.carColor,o.carType=e.data.modelName,o.amgValue=e.data.seriesName,o.choosed=e.data.laborGoodsVoList,o.customerCode=e.data.customerCode,o.orderStatus=e.data.status,o.workorderTime=e.data.workorderTime},2e3)}else alert(e.message)});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getOther:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:t}).then(function(e){if("10000"==e.code){o.buyer=e.data.buyoncreditMoney||0;var t=e.data.seriesName,a=e.data.modelName;if(o.brand.map(function(t){e.data.brandName==t.brandName&&(o.brandName=t.value,o.chCar(t.value))}),setTimeout(function(){var e=o;e.series.map(function(o){if(t==o.label){var s=o.value;e.getSeriesList2(o.value.split("/")[0]),setTimeout(function(){o.children.map(function(t){t.vehicleName==a&&(e.seriesName=[s,t.value])})},1500)}})},1500),0==e.data.canUseNum?o.isThereVip=0:o.isThereVip=1,o.carAddTel=e.data.customerPhone,o.carAddName=e.data.customerName,o.carKil=e.data.lastMileage,o.carDate=e.data.registeredDate,o.carAddEngine=e.data.engineNum,o.carVin=e.data.vehicleIdNum,o.carColor=e.data.vehicleColor,o.goodsVipId=e.data.customerMemberCardId,o.merchantName=e.data.merchantName,o.merchantPhone=e.data.merchantPhone,o.vehicleId=e.data.vehicleId,o.customerCode=e.data.customerCode,o.showInput=!0,o.sCheck=[],e.data.vipGoodsList){var s=[],i=[],n=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),i.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),n.push(e))}),o.sCheck=o.deWeight(s).concat(o.deWeight(i).concat(o.deWeight(n))),o.getVipProduct(o.customerCodeOther)}}else alert(e.message)});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getFcheck:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborGoods/findFastOrderGoods",{merchantCode:this.merchantCode}).then(function(e){"10000"==e.code&&(e.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.goodsVipId=null,e.num=1,e.goodsCount=e.num}),t.fCheck=e.data)});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getVipProduct:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborFastOrder/findOtherVipGoods",{merchantCode:this.merchantCode,customerCode:t}).then(function(e){if("10000"==e.code){if(e.data){var t=[],a=[],s=[];e.data.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=2,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),t.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),a.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e))}),o.sCheck=o.sCheck.concat(o.deWeight(t).concat(o.deWeight(a).concat(o.deWeight(s))))}o.radio=!0}else alert(e.message),o.radio=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),inputVipList:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){if("10000"==e.code){t.buyer=e.data.buyoncreditMoney||0;var o=e.data.seriesName,a=e.data.modelName;if(t.brand.map(function(o){e.data.brandName==o.brandName&&(t.brandName=o.value,t.chCar(o.value))}),setTimeout(function(){var e=t;e.series.map(function(t){if(o==t.label){var s=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==a&&(e.seriesName=[s,t.value])})},1500)}})},1500),0==e.data.canUseNum?t.isThereVip=0:t.isThereVip=1,t.carAddTel=e.data.customerPhone,t.carAddName=e.data.customerName,t.carKil=e.data.lastMileage,t.carDate=e.data.registeredDate,t.carAddEngine=e.data.engineNum,t.carVin=e.data.vehicleIdNum,t.carColor=e.data.vehicleColor,t.goodsVipId=e.data.customerMemberCardId,t.merchantName=e.data.merchantName,t.merchantPhone=e.data.merchantPhone,t.vehicleId=e.data.vehicleId,t.customerCode=e.data.customerCode,t.showInput=!0,t.sCheck=[],e.data.vipGoodsList){var s=[],i=[],n=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),i.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),n.push(e))}),t.sCheck=t.deWeight(s).concat(t.deWeight(i).concat(t.deWeight(n)))}}else alert(e.message)})},vipChange:function(e){this.vipbox=e.name},chCar2:function(){var e=this;this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(t){"10000"==t.code?e.amg=t.data:alert(t.message)})},toBill:function(){var e=this;""==this.carAddTel||null==this.carAddTel?alert("请填入手机号"):""==this.carAddName||null==this.carAddName?alert("请填入姓名"):(null==this.vehicleId&&this.addNew(this.carNum,this.carAddTel,this.carAddName),setTimeout(function(){var t,o,a="",s="",i="";console.log("车型车系",e.brandName,e.seriesName),null!=e.brandName&&""!=e.brandName&&(a=e.brandName.split("/")[1]),null!=e.seriesName&&""!=e.seriesName&&(i=e.seriesName[1].split("/")[1],s=e.seriesName[0].split("/")[1]),1==e.radio?(t=1,o=1):(t=0,o=2);var n=e.useType,r=e.orderId;console.log("type",n,r);var l=e.workOrderCode;0==e.carList.length?e.$alert("请选择商品","提示",{confirmButtonText:"确定"}):(e.$store.commit("list",e.carList),e.$router.push({path:"/quickOrderBill",query:{customerCodeOther:e.customerCodeOther,customerPhoneOther:e.customerPhoneOther,customerNameOther:e.customerNameOther,remarsk:e.remarsk,isThereVip:e.isThereVip,merchantPhone:e.merchantPhone,merchantName:e.merchantName,orderid:r,workOrderCode:l,type:n,merchantCode:e.merchantCode,plateNumber:e.carNum,goodsVipId:e.goodsVipId,goodsCome:o,isMyCard:t,customerName:e.carAddName,customerPhone:e.carAddTel,mileage:e.carKil,engineNum:e.carAddEngine,vehicleIdNum:e.carVin,applyDate:e.carDate,carColor:e.carColor,brandName:a,modelName:i,seriesName:s,customerCode:e.customerCode,workorderTime:e.workorderTime,orderStatus:e.orderStatus}}))},2e3))},searchShowClick:function(){this.$refs.goods.popShopServeVisible=!0},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S01",type:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:e}).then(function(e){"10000"==e.code&&(t.searchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}))})},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(o.serverList=e.data)})},tabChangess:function(e){this.cur=e;var t="S01";t=0==e?"S01":"S02",this.getTree(t)},delSelected:function(e,t){var o,a=this;this.serverList.map(function(t,a){e==t.goodsCode&&(o=a)}),this.$refs.multipleTable.toggleRowSelection(t,!1),this.fCheck.map(function(e,t){a.serverList[o]==e&&a.fCheck.splice(t,1)}),this.checkServer.map(function(e,t){a.serverList[o]==e&&a.checkServer.splice(t,1)})},serverChecked:function(e){this.serverSelected=e},handleClassify:function(e){var t=this;this.getThree(e.code,"3"),console.log("二级分类",e,this.choosedAlert),setTimeout(function(){t.serverList.map(function(e,o){t.choosedAlert.forEach(function(a){console.log(a.goodsCode==e.goodsCode),a.goodsCode==e.goodsCode&&t.$refs.multipleTable.toggleRowSelection(t.serverList[o],!0)})})},1500)},close:function(){this.searchShow=!1},onfirm:function(e){var t=this;this.$refs.goods.popShopServeVisible=!1,e.map(function(e,o){t.fCheck.map(function(o,a){e.goodsName==o.goodsName&&t.fCheck.splice(a,1)})}),this.fCheck=this.fCheck.concat(e),e.map(function(e,o){t.checkServer.map(function(o,a){e.goodsName==o.goodsName&&t.checkServer.splice(a,1)})}),this.checkServer=this.checkServer.concat(e),this.carList=this.deWeight(this.checkServer)},handleOpen:function(e){},handleClose:function(e){},getSummaries:function(e){var t=e.columns,o=e.data,a=[],s=[];return console.log("params",e),t.forEach(function(e,t){if(0!==t){if(s="price"==e.property?o.map(function(e){return Number(e.goodsCount*e.price)}):o.map(function(e){return Number(e["goodsCount"])}),"price"==e.property)s.every(function(e){return isNaN(e)})||(a[t]=s.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),a[t]+=" 元");else if("goodsCount"==e.property){var i=o.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})||(a[t]=i.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),a[t]+=" 件")}}else a[t]="总计"}),a},carGoodsCount:function(e,t){this.$set(this.carList,e,t),this.$store.commit("list",this.carList)},handleDelete:function(e,t){var o=this;this.carList.splice(e,1),this.checkServer.map(function(e,a){t==e&&(o.checkServer.splice(a,1),o.carList1.splice(a,1))}),this.checkServer2.map(function(e,a){t==e&&(o.checkServer2.splice(a,1),o.carList2.splice(a,1))}),this.$refs.goods.DelselectedGoods(t)},clearAll:function(e){this.carList=[],this.checkServer=[],this.checkServer2=[],this.carList1=[],this.carList2=[],this.$refs.goods.selectedGoods=[]},closeCar:function(){this.isCarShow=!1},showCar:function(){this.isCarShow=!0},checkGroup:function(e){},checkGroup2:function(e){},checkChange:function(e,t){console.log("选择的商品自带商品",e,t),this.$refs.goods.selectedClick(e,t),this.carList=this.checkServer.concat(this.checkServer2)},checkChange2:function(e,t){t.num=1,this.carList=this.checkServer2.concat(this.checkServer)},closeVipAlert:function(e){this.usevip=!1,this.radio=!1},sendVipData:function(e,t){this.state=t,this.showInput=!0,this.usevip=!1,this.customerCodeOther=e||"",this.customerNameOther=t.split("/")[0]||"",this.customerPhoneOther=t.split("/")[1]||"",this.getVipProduct(e)},check:function(){null!=this.vehicleId?this.radio?this.usevip=!0:(""!=this.customerCodeOther&&this.delObj(this.carNum),this.otherName="",this.otherPhone="",this.otherCar="",this.state=""):(this.$alert("使用他人会员卡请先输入正确车牌号","提示",{confirmButtonText:"确定"}),this.radio=!1)},delObj:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){if("10000"==e.code){if(t.customerCode=e.data.customerCode,t.sCheck=[],e.data.vipGoodsList){var o=[],a=[],s=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),o.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),a.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e))}),t.sCheck=t.deWeight(o).concat(t.deWeight(a).concat(t.deWeight(s)))}}else alert(e.message)})},closeCarAlert:function(e){this.setCarshow=!1},sendCarData:function(e,t){this.state="",this.radio=!1,this.setCarshow=!1,this.carNum=t,this.inputVipList(t),this.showInput=!0},setCar:function(){this.setCarshow=!0},getCarBrand:function(){var e=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.value=e.brandId,e.label=e.brandName}),e.carTypes=t.data)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求获取车辆品牌列表结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})},chCar:function(e){var t=this;""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求获取车辆车系列表结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getSeriesList2:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){"10000"==t.code&&(e.nsList=t.data)}),this.getOptions("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},openNp:function(){var e=this;this.npIsShow=!0,this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S02"}).then(function(t){"10000"==t.code?(t.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),e.options=t.data):alert(t.message)})},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],n=t[s];if(JSON.stringify(n)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t},inputTel:function(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;t.test(e)||(this.$message.error("请输入正确的手机号"),this.carAddTel="")}}},lt=rt,ct=(o("4d2f"),Object(l["a"])(lt,Ie,Te,!1,null,"3c41c8f6",null)),dt=ct.exports,ut=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"quickOrderBill"},[o("div",{staticClass:"choose",staticStyle:{"padding-left":"30px"}},[e._v("\n\t\t已选\n\t\t"),o("span",{staticStyle:{color:"#0000FF"}},[e._v(e._s(e.List.length))]),e._v("\n\t\t个项目\n\t")]),o("div",{staticStyle:{"padding-left":"30px","margin-top":"20px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"20px",backgroundColor:"#d7d7d7"},data:e.List}},[o("el-table-column",{attrs:{align:"center",prop:"name",label:"名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"单价",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,disabled:0==e.dis?1==t.row.isGift:e.dis,size:"mini",label:"描述文字"},on:{change:function(o){return e.handleChange(t.$index,t.row)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotal",label:"小计",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotal))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"deduct",label:"提成",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.deduct))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"emp",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.List)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.List)}}},[e._v("删除")])],1),0==t.row.isGift?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1)],1),o("div",{staticClass:"d-flex remark"},[o("div",[e._v("本次备注:")]),o("div",{staticStyle:{width:"300px"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入备注信息(打印单显示,最多120字)",clearable:"",disabled:e.dis},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",color:"#000000","font-size":"18px"}},[e._v("\n\t\t\t总价:\n\t\t\t"),o("span",{staticStyle:{color:"#FF0000","font-size":"32px"}},[e._v("¥"+e._s(e.all2))])]),o("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.goquick}},[e._v("继续添加项目")]),o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),o("div",{staticClass:"d-flex"},["set"!=e.useType||"0"==e.orderStatus?o("el-button",{attrs:{type:"primary",size:"small",disabled:e.dis},on:{click:e.goList}},[e._v("开单")]):e._e()],1),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"10px"}},[3!=e.orderStatus&&2!=e.orderStatus?o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.setCompAlert}},[e._v("完工")]):e._e()],1)]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("buyer",{attrs:{carNumber:e.carNumber,buyerAlert:e.buyerAlert},on:{closeBuyerAlert:e.closeBuyerAlert,buyerConfirm:e.sendBuyerData}}),o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%"},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeCompAlert}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger"},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},pt=[],mt=o("bd86"),ht=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},ft=[],vt={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){console.log("选择员工确认弹窗",this.checkList,this.checkList2),this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},bt=vt,gt=(o("901d"),Object(l["a"])(bt,ht,ft,!1,null,"4596af06",null)),yt=gt.exports,Ct=Object(mt["a"])({components:{emp:yt,buyer:ge,comp:Y},data:function(){return{isFirstEnter:!1,carNumber:null,mapList:null,form:{},buyerAlert:!1,isShowFinish:!1,tel:null,chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,inputShow:!1,inputShow2:!1,allArr:[],all:0,remark:"",List:[],dis:!1}},computed:{all2:function(){return this.all.toFixed(2)}},watch:{},created:function(){var e=this;this.isFirstEnter=!0,this.createId=localStorage.getItem("createId"),console.log("创建",this.createId),this.isThereVip=this.$route.query.isThereVip,this.orderStatus=this.$route.query.orderStatus,0==this.orderStatus?this.statusList=1:this.statusList="",console.log("订单状态",this.orderStatus);var t=this.$route.query,o=this.form;console.log("车辆注册日期",t),this.remark=t.remarsk,this.useType=this.$route.query.type,this.carNumber=t.plateNumber,this.merchantCode=this.$route.query.merchantCode,this.merchantPhone=o.merchantPhone,this.merchantName=o.merchantName,this.customerCodeOther=t.customerCodeOther,this.customerPhoneOther=t.customerPhoneOther,this.customerNameOther=t.customerNameOther,console.log("使用他人会员卡",this.customerPhoneOther,this.customerNameOther,this.customerCodeOther),o.workOrderCode=t.workOrderCode,o.orderId=t.orderid,o.goodsCome=t.goodsCome,o.goodsVipId=t.goodsVipId,o.customerName=t.customerName,o.customerPhone=t.customerPhone,o.plateNumber=t.plateNumber,o.mileage=t.mileage,o.engineNum=t.engineNum,o.vehicleIdNum=t.vehicleIdNum,o.applyDate=t.applyDate,o.carColor=t.carColor,o.brandName=t.brandName,o.modelName=t.modelName,o.seriesName=t.seriesName,o.customerCode=t.customerCode,o.isMyCard=t.isMyCard,o.workorderTime=t.workorderTime,"set"==this.useType||"copy"==this.useType||"look"==this.useType?this.$store.state.carList.map(function(e){void 0==e.mapList&&(e.mapList=[]),1==e.isGift?e.subtotal=0:e.subtotal=e.goodsCount*e.price,e.deduct=0}):this.$store.state.carList.map(function(e){1==e.isGift?e.subtotal=0:e.subtotal=Number(e.goodsCount)*Number(e.price),e.sell=null,e.road=null,e.deduct=0}),"look"==this.$route.query.type&&(this.dis=!0),this.List=this.$store.state.carList,this.List.map(function(t){t.isGift=t.isGift||0,e.all+=t.subtotal}),this.$store.commit("list",this.List)},methods:{setBillOrder:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k){var x=this;this.$http.post("/LaborFastOrder/addLaborOrder",{merchantCode:this.merchantCode,workOrderCode:this.form.workOrderCode,brandName:this.form.brandName,customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,orderId:e,goodsCome:t,goodsVipId:o,type:a,workorderType:s,customerName:i,customerPhone:n,plateNumber:r,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,employeeId:v,updateId:b,workOrderTime:g,isMyCard:y,remarks:C,totalMoney:w,laborOrderGoodsList:k}).then(function(e){console.log("请求结果",e),"10000"==e.code?x.$router.push({path:"/",query:{merchantCode:x.merchantCode}}):alert(e.message)})},billing:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k,x){var S=this;this.$http.post("/LaborFastOrder/addLaborOrder",{customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,isThereVip:this.isThereVip,merchantCode:this.merchantCode,status:this.statusList,brandName:this.form.brandName,workOrderCode:e,orderId:t,goodsCome:o,goodsVipId:a,type:s,workorderType:i,customerName:n,customerPhone:r,plateNumber:l,mileage:c,engineNum:d,vehicleIdNum:u,applyDate:p,carColor:m,modelName:h,seriesName:f,customerCode:v,employeeId:b,updateId:g,workOrderTime:y,isMyCard:C,remarks:w,totalMoney:k,laborOrderGoodsList:x}).then(function(e){console.log("新增工单请求结果",e),1e4==e.code?(S.$router.push({path:"/",query:{merchantCode:S.merchantCode}}),S.$destroy("quickOrder")):alert(e.message)})},finish:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k,x,S,_,N){var L,O,I,T=this;console.log("传递",this.useType,this.form.orderId),"set"==this.useType?(L=this.form.workOrderCode,O=this.form.orderId,I=2):(L=null,O=null,I=null),this.$http.post("/LaborFastOrder/sendSms",{customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,isThereVip:this.isThereVip,merchantCode:this.merchantCode,brandName:this.form.brandName,status:I,orderId:O,workOrderCode:L,goodsCome:e,goodsVipId:t,type:o,workorderType:a,customerName:s,customerPhone:i,plateNumber:n,mileage:r,engineNum:l,vehicleIdNum:c,applyDate:d,carColor:u,modelName:p,seriesName:m,customerCode:h,employeeId:f,updateId:v,workOrderTime:b,isMyCard:g,remarks:y,totalMoney:C,laborOrderGoodsList:w,toPhone:this.tel,action:"WORK_ORDER_FINISHED",plateNum:this.carNumber,merchantName:this.form.merchantName,merchantPhone:this.form.merchantPhone}).then(function(e){console.log("请求完工结果",e),1e4==e.code?T.$router.push({path:"/",query:{merchantCode:T.merchantCode}}):alert(e.message)})},comConfirm:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List),this.isShowFinish=!1},noSend:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List),this.isShowFinish=!1},closeCompAlert:function(){this.isShowFinish=!1},setCompAlert:function(){this.isShowFinish=!0},buyerAjax:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k){var x,S,_,N=this;"set"==this.useType?(x=this.form.workOrderCode,S=this.form.orderId,_=4):(x=null,S=null),this.$http.post("/LaborFastOrder/buyoncredit",{status:_,isThereVip:this.isThereVip,isBuyoncredit:e,orderId:S,workOrderCode:x,merchantCode:this.merchantCode,goodsCome:t,goodsVipId:o,type:a,workorderType:s,customerName:i,customerPhone:n,plateNumber:r,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,createId:v,updateId:b,workOrderTime:g,isMyCard:y,remarks:C,totalMoney:w,laborOrderGoodsList:k}).then(function(e){console.log("请求挂账结果",e),"10000"==e.code?N.$router.push({path:"/",query:{merchantCode:N.merchantCode}}):alert(e.message)})},sendBuyerData:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.buyerAlert=!1,this.buyerAjax("2",e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},closeBuyerAlert:function(){this.buyerAlert=!1},setBuyerAlert:function(){this.buyerAlert=!0},goquick:function(){this.$store.commit("list",this.List),this.$router.go(-1)},save:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal});var e=this.form,t="",o="";"copy"==this.useType||void 0==this.useType?this.billing(o,t,e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List):"set"==this.useType&&this.setBillOrder(e.orderId,e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},goList:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal}),console.log("开单",this.List);var e=this.form,t="",o="";"set"==this.useType?(t=this.form.workOrderCode,o=this.form.orderId):(t="",o=""),this.billing(t,o,e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},goClose:function(){this.$router.push({path:"/close",query:{id:"Agony"}})},changet:function(){var e=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(t,o){e+=t.subtotal}),this.all=parseFloat(e)},changet2:function(){this.inputShow2=!1},sendEmpData:function(e,t){this.empAlert=!1,console.log("销售施工",e,t);var o=[];""==e&&""==t||(o=e.concat(t)),this.List[this.chooseEmpidx].mapList=o,console.log("最后数组",o),this.$set(this.List,this.chooseEmpidx,this.List[this.chooseEmpidx])},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,console.log("显示弹窗",e,t),this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].code}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},set:function(e,t){var o=0;t.isGift=1,t.subtotal=0,t.goodsCount=1,console.log("最后欧的值",this.List),this.$set(this.List,e,t),this.List.forEach(function(e,t){o+=e.subtotal}),this.all=parseFloat(o),this.$store.commit("list",this.List)},deleteRow:function(e,t){console.log(e),this.List.splice(e,1);var o=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(e,t){o+=Number(e.subtotal)}),this.all=parseFloat(o),this.$store.commit("list",this.List)},handleChange:function(e,t){var o=0;this.List[e].subtotal=(Number(this.List[e].goodsCount)*Number(this.List[e].price)).toFixed(2),this.List.forEach(function(e,t){o+=Number(e.subtotal)}),this.all=parseFloat(o),this.$store.commit("list",this.List)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){}},"watch",{allPrice:function(){var e=this;this.List.map(function(t){e.all+=t.subtotal})}}),wt=Ct,kt=(o("0939"),Object(l["a"])(wt,ut,pt,!1,null,"667595b6",null)),xt=kt.exports,St=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"comprehensiveOrder"},[o("div",{staticClass:"header",staticStyle:{background:"#F2F2F2",padding:"10px 0px"}},[o("div",{staticClass:" center"},[o("div",{staticStyle:{"font-size":"32px",color:"#fff","font-weight":"bold","margin-right":"15px"}},[e._v("老用户搜索")]),o("div",{staticClass:"d-flex",staticStyle:{width:"400px"}},[o("el-input",{staticStyle:{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"},attrs:{disabled:"copy"==e.useType,placeholder:"根据客户姓名、电话、车牌号进行搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("el-button",{attrs:{type:"primary"},on:{click:e.searchOld}},[e._v("搜索")])],1),o("div",{staticStyle:{"margin-left":"15px","font-size":"24px",color:"#fff","font-weight":"bold"},on:{click:e.addUser}},[e._v("新增车辆/客户")])])]),o("div",{staticClass:"body"},[o("div",{staticClass:"b1"},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("车主信息")]),o("el-form",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"},attrs:{"label-position":"right","label-width":"120px",model:e.owner}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("label",{attrs:{slot:"label"},slot:"label"},[o("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n\t\t\t\t\t\t车牌号\n\t\t\t\t\t")]),o("el-input",{attrs:{disabled:e.dis||"copy"==e.useType},on:{change:e.importCarnum},model:{value:e.owner.plateNumber,callback:function(t){e.$set(e.owner,"plateNumber",t)},expression:"owner.plateNumber"}})],1),o("el-form-item",{attrs:{label:"客户手机号"}},[o("label",{attrs:{slot:"label"},slot:"label"},[o("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n\t\t\t\t\t\t客户手机号\n\t\t\t\t\t")]),o("el-input",{attrs:{disabled:e.dis},on:{change:e.inputTel},model:{value:e.owner.customerPhone,callback:function(t){e.$set(e.owner,"customerPhone",t)},expression:"owner.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.customerName,callback:function(t){e.$set(e.owner,"customerName",t)},expression:"owner.customerName"}})],1),o("el-form-item",{attrs:{label:"本次里程"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.lastMileage,callback:function(t){e.$set(e.owner,"lastMileage",e._n(t))},expression:"owner.lastMileage"}})],1),o("el-form-item",{attrs:{label:"下次保养里程"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请输入下次保养里程",disabled:e.dis},model:{value:e.owner.nextKeepFitKm,callback:function(t){e.$set(e.owner,"nextKeepFitKm",t)},expression:"owner.nextKeepFitKm"}},[o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(5e3),value:Number(e.owner.lastMileage)+Number(5e3)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(5e3)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(7500),value:Number(e.owner.lastMileage)+Number(7500)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(7500)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(1e4),value:Number(e.owner.lastMileage)+Number(1e4)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(1e4)+"km"))])])],1)],1),o("el-form-item",{attrs:{label:"下次保养日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"填写日期有助于提醒用户",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.nextKeepFitTime,callback:function(t){e.$set(e.owner,"nextKeepFitTime",t)},expression:"owner.nextKeepFitTime"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号",disabled:e.dis},model:{value:e.owner.vehicleIdNum,callback:function(t){e.$set(e.owner,"vehicleIdNum",t)},expression:"owner.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号",disabled:e.dis},model:{value:e.owner.engineNum,callback:function(t){e.$set(e.owner,"engineNum",t)},expression:"owner.engineNum"}})],1),o("el-form-item",{attrs:{label:"车辆注册日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请输入注册日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.applyDate,callback:function(t){e.$set(e.owner,"applyDate",t)},expression:"owner.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择",disabled:e.dis},on:{change:e.chCar},model:{value:e.owner.brandName,callback:function(t){e.$set(e.owner,"brandName",t)},expression:"owner.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车系车型"}},[o("el-cascader",{staticStyle:{width:"202px"},attrs:{disabled:e.dis,options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.owner.seriesName,callback:function(t){e.$set(e.owner,"seriesName",t)},expression:"owner.seriesName"}})],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色",disabled:e.dis},on:{input:e.ic},model:{value:e.owner.carColor,callback:function(t){e.$set(e.owner,"carColor",t)},expression:"owner.carColor"}})],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择保险到期日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.compulsoryInsureDeadline,callback:function(t){e.$set(e.owner,"compulsoryInsureDeadline",t)},expression:"owner.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择年检日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.annualInspectDate,callback:function(t){e.$set(e.owner,"annualInspectDate",t)},expression:"owner.annualInspectDate"}})],1),o("el-form-item",{attrs:{label:"预计交车时间"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"datetime",placeholder:"请选择交车时间",disabled:e.dis,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.owner.estimateSubmit,callback:function(t){e.$set(e.owner,"estimateSubmit",t)},expression:"owner.estimateSubmit"}})],1)],1),o("div",{staticClass:"farewell"},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("送修人信息")]),o("div",{staticClass:"d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"26px","margin-right":"12px"}},[e._v("送修人姓名")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人姓名",disabled:e.dis},model:{value:e.owner.repairName,callback:function(t){e.$set(e.owner,"repairName",t)},expression:"owner.repairName"}})],1)]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"30px","margin-right":"12px"}},[e._v("送修人手机号")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人手机号",disabled:e.dis},on:{change:e.inputTel2},model:{value:e.owner.repairPhone,callback:function(t){e.$set(e.owner,"repairPhone",t)},expression:"owner.repairPhone"}})],1)])])])],1),o("div",{staticClass:"b2",staticStyle:{"font-size":"14px",background:"#fff","border-radius":"15px","margin-top":"10px","padding-left":"36px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",{},[e._v("其他信息")]),o("div",{staticStyle:{"margin-left":"25px"}},[o("el-checkbox",{on:{change:e.userVipChange},model:{value:e.useVip,callback:function(t){e.useVip=t},expression:"useVip"}},[e._v("使用他人会员卡")])],1),1==e.useVip?o("div",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.state))]):e._e(),o("el-button",{class:1==e.useVip?"c1":"",staticStyle:{"margin-right":"30px","margin-left":"45px"},attrs:{type:"text"},on:{click:function(t){1==e.useVip&&e.openVipPop()}}},[e._v("\n\t\t\t\t\t可用会员卡"+e._s(e.vipNum)+"张\n\t\t\t\t")]),o("div",{staticStyle:{color:"#999"}},[e._v("\n\t\t\t\t\t来店消费统计：来店消费\n\t\t\t\t\t"),o("span",[e._v(e._s(e.expense))]),e._v("\n\t\t\t\t\t次,消费"+e._s(e.price)+"元  挂账："+e._s(e.buyer)+"元\n\t\t\t\t")])],1),o("div",{staticClass:"lastTimeRemark"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",[e._v("上次备注：")]),o("div",[e._v(e._s(e.lastTimeRemark))])])])]),o("div",{staticClass:"serve"},[o("commonGoods",{ref:"common",on:{serverSelected:e.serverSelected,goodsSelected:e.goodsSelected}})],1),o("div",{staticClass:"b3",staticStyle:{background:"#fff","border-radius":"15px","margin-top":"10px","padding-top":"10px","padding-bottom":"10px"}},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("维修/保养项目(工时)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"服务名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"serviceTime",label:"服务时长",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.serviceTime||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"服务次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:t.row.surplusCount?Number(t.row.surplusCount):999,size:"mini",disabled:!(!e.dis||1!=t.row.isGift)},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px",display:"flex"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索服务名称",disabled:e.dis},on:{focus:e.showNoVip},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showNoVip},slot:"append"})],1),o("div"),o("div",[o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNs}},[e._v("没搜到?新建服务")])],1)],1)],1),o("b4",{attrs:{dis:e.dis,manOur:e.manOur2,Elist:e.Elist,customerCode:e.customerCode},on:{children:e.children1}}),o("b5",{attrs:{dis:e.dis,manOur:e.manOur3},on:{children:e.children2}}),o("b6",{attrs:{dis:e.dis,manOur:e.manOur4,useType:e.useType},on:{children:e.children3}}),o("b7",{attrs:{dis:e.dis,subjoin:e.subjoin,useType:e.useType},on:{selectChange:e.selectChange,priceChange:e.priceChange,remarksChange:e.remarksChange}}),o("div",{staticClass:"b8"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","margin-left":"36px"}},[o("h4",{staticStyle:{"margin-right":"20px"}},[e._v("备注")]),o("el-input",{staticStyle:{width:"900px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印单显示,最多120字)",disabled:e.dis},model:{value:e.otherRemark,callback:function(t){e.otherRemark=t},expression:"otherRemark"}})],1)])],1),o("div",{staticClass:"footer"},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end","align-items":"center","margin-right":"30px"}},[o("div",{staticClass:"font"},[e._v("总价：")]),o("div",{staticStyle:{color:"#ff0000","font-size":"30px"}},[e._v("¥"+e._s(e.allNums))]),o("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),"set"!=e.useType||"0"==e.orderStatus?o("div",[o("el-button",{attrs:{type:"primary",disabled:e.dis},on:{click:e.confirm}},[e._v("开单")])],1):e._e()])]),o("useOtherVip",{attrs:{usevip:e.usevip,vehicleId:e.vehicleId},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.vipConfirm}}),o("vippop",{attrs:{vipPop:e.vipPop,vipList:e.vipList,customerCode:e.cust},on:{closeVipPop:e.closeVipPop,confirmVipPop:e.confirmVipPop}}),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("nv",{attrs:{nvIsShow:e.nvIsShow,searchList:e.nvSearchList,customerCode:e.customerCode,fatherData:e.fatherData},on:{closeNv:e.closeNv,sendNv:e.sendNv}}),o("newServe",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),o("addcar",{attrs:{addUserIsShow:e.addUserIsShow},on:{closeAc:e.closeAc,sendAc:e.sendAc}})],1)},_t=[],Nt=(o("386d"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{staticStyle:{"margin-top":"0"},attrs:{visible:e.nvIsShow,width:"850px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.nvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff",color:"#FFFFFF"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:8}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:8}},[e._v("服务分类")]),o("el-col",{staticClass:"checked",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:4}},[e._v("售价")]),o("el-col",{attrs:{span:4}},[o("el-input",{attrs:{placeholder:"请输入查询内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGoods(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{directives:[{name:"show",rawName:"v-show",value:""==e.search,expression:"search == ''"}],ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName,"row-key":e.getRowKey1,height:"500"},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{type:"expand","reserve-selection":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(t){return o("el-checkbox-group",{key:t,on:{change:function(o){return e.handleCheckAllChange(t)}},model:{value:e.checkboxGroup1,callback:function(t){e.checkboxGroup1=t},expression:"checkboxGroup1"}},[o("el-checkbox",{staticStyle:{width:"100%"},attrs:{label:t}},[o("span",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(1==t.memberCardType?"通用储值卡":2==t.memberCardType?"限定储值卡":3==t.memberCardType?"次卡":4==t.memberCardType?"默认卡":"卡外")+"\n\t\t\t\t\t\t\t\t\t\t")]),0!=t.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.memberCardName))]):e._e(),3==t.memberCardType&&0!=t.memberCardType?o("span",[e._v("(余次"+e._s(t.surplusCount)+")")]):e._e(),3!=t.memberCardType&&0!=t.memberCardType?o("span",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.cardBalance))]):e._e(),o("span",{staticStyle:{"margin-left":"50px"}},[e._v("¥"+e._s(t.price))]),null!=t.serviceDiscount&&3!=t.memberCardType?o("span",{staticStyle:{padding:"4px 15px","border-radius":"7px","text-align":"center",background:"#169BD5",color:"#fff","margin-left":"10px"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(10*Number(t.serviceDiscount))+"折\n\t\t\t\t\t\t\t\t\t\t")]):e._e()])],1)})}}])}),o("el-table-column",{attrs:{width:"200",prop:"name"}}),o("el-table-column",{attrs:{width:"260",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.twoCategoryName+"/"+t.row.threeCategoryName))])]}}])}),o("el-table-column",{attrs:{prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("¥"+e._s(t.row.standardPrice))]):e._e(),t.row.list.length>1?o("span",[e._v("有会员卡")]):e._e()]}}])})],1),o("el-table",{directives:[{name:"show",rawName:"v-show",value:""!=e.search,expression:"search != ''"}],ref:"searchTable",attrs:{"row-key":"goodsCode",data:e.tableData,"show-header":!1},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45"}}),o("el-table-column",{attrs:{width:"220",prop:"name"}}),o("el-table-column",{attrs:{width:"260",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.twoCategoryName+"/"+t.row.threeCategoryName))])]}}])}),o("el-table-column",{attrs:{prop:"standardPrice"}})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)}),Lt=[],Ot=null,It={components:{},props:{nvIsShow:Boolean,searchList:Array,customerCode:String},watch:{search:function(e){var t=this;e&&(Ot&&clearTimeout(Ot),Ot=setTimeout(function(){Ot=null,t.searchGoods()},500))},serverList:function(e,t){var o=this;this.$nextTick(function(){o.endList.forEach(function(t){e.forEach(function(e){e.list.map(function(e){e.goodsCode+e.goodsCome==t.goodsCode+t.goodsCome&&o.checkboxGroup1.push(e)})})})})},tableData:function(e,t){var o=this;this.$nextTick(function(){o.endList.map(function(t){e.forEach(function(e){e.goodsCode==t.goodsCode&&o.$refs.searchTable.toggleRowSelection(e,!0)})})})}},data:function(){return{searchTable:[],tableData:[],search:"",getRowKey:function(e){var t=0;return t=Number(e.code+e.goodsVipId),t},getRowKey1:function(e){return e.code},checkboxGroup1:[],checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[],multipleSelection:[]}},computed:{endList:function(){return this.searchTable.concat(this.checkboxGroup1)}},methods:{handleSelectionChange:function(e){this.searchTable=e},searchGoods:function(){var e=this;this.$http.get("/LaborGoods/listByCategoryForLaborSynthesize",{merchantCode:this.merchantCode,type:1,condition:this.search}).then(function(t){null!=t.data&&(t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),e.tableData=t.data)})},handleCheckAllChange:function(e){},print:function(){},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},cellcb:function(e){if(e.list.length>0)return"myCell"},toggleRowExpansion:function(e,t){this.secondList=t.list},confirm:function(){var e=this.endList;this.endList.map(function(e){e.serviceTime=e.serviceMinutes}),console.log(e),this.$emit("sendNv",e)},close:function(){this.$emit("closeNv",!1)},serverChecked:function(e){},serverChecked2:function(e){this.arr3=this.$refs.multipleTable.selection,this.arr2=this.arr2.concat(this.arr3)},handleClassify:function(e){this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.$props.customerCode,categoryCode:e,level:"3"}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,t.specification=e.specification,t.brandName=e.brandName,t.serviceMinutes=e.serviceMinutes,t.memberCardType,t.price=e.standardPrice,null==e.price&&(e.price=0),t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:999,serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:3,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code,specification:e.specification,brandName:e.brandName,serviceMinutes:e.serviceMinutes})}),t.serverList=e.data):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){var e=this;this.$bus.$on("delRow",function(t){var o=e;o.checkboxGroup1.map(function(e,a){e.memberCardType+e.goodsCode+e.goodsName==t.memberCardType+t.goodsCode+t.goodsName&&o.checkboxGroup1.splice(a,1)})}),this.merchantCode=this.$route.query.merchantCode}},Tt=It,At=(o("c8c6"),Object(l["a"])(Tt,Nt,Lt,!1,null,"40443713",null)),Mt=At.exports,$t=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"common"},[o("div",{staticClass:"d-flex"},[o("p",{staticClass:"title"},[e._v("常用服务商品")]),o("el-button",{staticClass:"text",attrs:{type:"text"},on:{click:e.setCommon}},[e._v("设置常用服务商品")])],1),o("div",{staticClass:"d-flex"},[e._m(0),o("div",{staticClass:"border-right"},e._l(e.server,function(t,a){return o("div",{key:a},[o("div",{staticClass:"border",class:t.selected?"selected":"",on:{click:function(o){return e.select1(t,a)}}},[e._v(e._s(t.goodsName))])])}),0)]),o("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[e._m(1),o("div",{staticClass:"border-right"},e._l(e.goods,function(t,a){return o("div",{key:a},[o("div",{staticClass:"border",class:t.selected?"selected":"",on:{click:function(o){return e.select2(t)}}},[e._v(e._s(t.goodsName))])])}),0)]),o("setCommon",{ref:"setCommon"})],1)},Pt=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"border-left"},[o("p",[e._v("服务")]),o("p",[e._v("(工时)")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"border-left"},[o("p",[e._v("商品")]),o("p",[e._v("(配件)")])])}],Dt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{visible:e.popShopServeVisible,center:"",width:"60%","close-on-click-modal":!1,title:"设置常用项","show-close":!1},on:{"update:visible":function(t){e.popShopServeVisible=t}}},[o("div",{staticClass:"popShopServeLeft"},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.popShopServeClick},model:{value:e.popShopServeActive,callback:function(t){e.popShopServeActive=t},expression:"popShopServeActive"}},[o("el-tab-pane",{attrs:{label:"服务",name:"服务"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"30%"},attrs:{"unique-opened":!0},on:{select:e.ServeSelect}},e._l(e.servesData,function(t){return o("el-submenu",{key:t.code,attrs:{index:t.code}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t){return o("el-menu-item",{key:t.code,attrs:{index:t.code}},[e._v(e._s(t.name))])})],2)}),1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"}}},[o("el-table-column",{attrs:{label:"名称",prop:"goodsName",width:"170"}}),o("el-table-column",{attrs:{label:"价格",prop:"price"}}),o("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})]}}])})],1)],1),o("el-tab-pane",{attrs:{label:"商品",name:"商品"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"30%"},attrs:{"unique-opened":!0},on:{select:e.ServeSelect}},e._l(e.shopsData,function(t){return o("el-submenu",{key:t.code,attrs:{index:t.code}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t){return o("el-menu-item",{key:t.code,attrs:{index:t.code}},[e._v(e._s(t.name))])})],2)}),1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"}}},[o("el-table-column",{attrs:{label:"名称",prop:"goodsName",width:"170"}}),o("el-table-column",{attrs:{label:"价格",prop:"price"}}),o("el-table-column",{attrs:{label:"选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox",{on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})]}}])})],1)],1),o("el-tab-pane",[o("span",{attrs:{slot:"label"},slot:"label"},[o("div",{staticClass:"inputSearch"},[o("el-input",{attrs:{placeholder:"请输入搜索名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}},[o("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},on:{click:e.search},slot:"prefix"})])],1)]),o("div",{staticStyle:{height:"360px"}},[o("el-table",{staticStyle:{width:"560px"},attrs:{data:e.tableData,height:"360","header-cell-style":{background:"#eef1f6"},align:"center"}},[o("el-table-column",{attrs:{prop:"goodsName",label:"名称",width:"240",align:"center"}}),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"}}),o("el-table-column",{attrs:{label:"选择",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-checkbox",{staticStyle:{"text-align":"center"},on:{change:function(o){return e.selectedClick(t.row.selected,t.row)}},model:{value:t.row.selected,callback:function(o){e.$set(t.row,"selected",o)},expression:"scope.row.selected"}})],1)]}}])})],1)],1)])],1)],1),o("div",{staticClass:"popShopServeRight"},[o("div",{staticClass:"popShopServeRightHead"},[e._v("\n          已选项目\n        ")]),o("div",{staticClass:"selectedList"},e._l(e.selectedGoods,function(t){return o("div",{key:t.goodsCode,staticClass:"selectedItem"},[o("div",[e._v("\n              "+e._s("1"==t.type?"【服务】":"【商品】")+"\n              "+e._s(t.goodsName)+"\n            ")]),o("div",{staticClass:"del",on:{click:function(o){return e.DelselectedGoods(t)}}},[o("div",{staticClass:"el-icon-close"})])])}),0),o("div",{staticClass:"twoBtn"},[o("el-button",{on:{click:function(t){e.popShopServeVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.serveShopEnSure}},[e._v("确定")])],1)])])],1)},Gt=[],Vt={computed:{tableData:function(){var e=this;return this.selectedGoods.forEach(function(t){e.initData.forEach(function(e){e.goodsCode==t.goodsCode&&(e.selected=!0)})}),this.initData}},data:function(){return{tableData1:[],tableData2:[],searchContent:"普通洗车",popShopServeVisible:!1,popShopServeActive:"服务",servesData:[],shopsData:[],initData:[],selectedGoods:[],ensureSelect:[]}},methods:{handleDel:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t,o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,o),console.log(o.code),e.next=4,this.$http.get("/system/setFastOrder",{merchantCode:this.Mcode,code:o.code});case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}},e,this)}));function t(t,o){return e.apply(this,arguments)}return t}(),popShopServeClick:function(){var e=this;this.initData=[],"商品"==this.popShopServeActive&&0==this.shopsData.length&&this.$http.get("/LaborGoods/categoryList",{merchantCode:this.Mcode,parentCode:0,oneCategoryCode:"S02"}).then(function(t){e.shopsData=t.data})},ServeSelect:function(e,t){console.log(e,t),this.getLevel3(e)},getLevel3:function(e){var t=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.Mcode,categoryCode:e,level:3}).then(function(e){var o=e.data;o.forEach(function(e){e.selected=!1}),t.initData=o,console.log(t.initData)})},selectedClick:function(e,t){console.log(e,t),e?this.selectedGoods.push(t):this.DelselectedGoods(t)},DelselectedGoods:function(e){var t=this.selectedGoods.length-1;for(t;t>=0;t--)this.selectedGoods[t].goodsCode==e.goodsCode&&this.selectedGoods.splice(t,1);console.log(this.selectedGoods),this.tableData.forEach(function(t){t.goodsCode==e.goodsCode&&(t.selected=!1)})},serveShopEnSure:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.ensureSelect=JSON.parse(JSON.stringify(this.selectedGoods)),console.log(this.ensureSelect),this.ensureSelect.forEach(function(e){t.push(e.goodsCode)}),o=t.join(","),e.next=7,this.$http.get("/system/batchAddFastOrder",{merchantCode:this.Mcode,goodsCodes:o});case 7:a=e.sent,a.successful&&(this.selectedGoods=[],this.ensureSelect=[],this.getList());case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getList:function(){var e=this;this.$http.get("/LaborGoods/findLaborSynthesizeFastOrderGoods",{merchantCode:this.$route.query.merchantCode}).then(function(t){"10000"==t.code&&(e.popShopServeVisible=!1,t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=2,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),e.$parent.list=t.data)})},search:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborGoods/listByCategoryForWork",{merchantCode:this.Mcode,condition:this.searchContent});case 2:t=e.sent,t.successful&&(o=t.data,o.forEach(function(e){e.selected=!1}),this.initData=o,console.log(this.initData));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getUsuallyData:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/system/fastOrderGoods",{merchantCode:this.Mcode});case 2:t=e.sent,console.log("获已经设置的常用项",t),t.successful&&(o=t.data,this.tableData1=o.filter(function(e){return 2==e.type}),this.tableData2=o.filter(function(e){return 1==e.type}));case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=this;this.Mcode=this.$route.query.merchantCode,this.$http.get("/LaborGoods/categoryList",{merchantCode:this.Mcode,parentCode:0,oneCategoryCode:"S01"}).then(function(t){console.log("左边分类",t),e.servesData=t.data})}},Et=Vt,Ft=(o("be2d"),Object(l["a"])(Et,Dt,Gt,!1,null,"0cc6ba5f",null)),jt=Ft.exports,Rt={components:{setCommon:jt},data:function(){return{list:[]}},computed:{goods:function(){return this.list.filter(function(e){return 2==e.type})||[]},server:function(){return this.list.filter(function(e){return 1==e.type})||[]},goodsSelected:function(){return this.goods.filter(function(e){return 1==e.selected})},serverSelected:function(){return this.server.filter(function(e){return 1==e.selected})}},methods:{setCommon:function(){this.$refs.setCommon.popShopServeVisible=!0},select1:function(e,t){e.selected=!e.selected,this.$emit("serverSelected",this.serverSelected,e.selected,e)},select2:function(e,t){e.selected=!e.selected,this.$emit("goodsSelected",this.goodsSelected,e.selected,e)},getList:function(){var e=this;this.$http.get("/LaborGoods/findLaborSynthesizeFastOrderGoods",{merchantCode:this.$route.query.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.memberCardType="0",e.goodsCode=e.code,e.goodsCome=3,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),e.list=t.data)})}},created:function(){this.getList()}},zt=Rt,Bt=(o("c9c5"),Object(l["a"])(zt,$t,Pt,!1,null,"7b1ec3e1",null)),Ut=Bt.exports,Wt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"select-goods__wrap",width:"700"},on:{hide:function(t){return e.$emit("close",e.selectionList,e.type)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[o("el-row",{attrs:{type:"flex"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.name,expression:"!name"}],staticClass:"line"}),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table",attrs:{"header-cell-class-name":"table-header","cell-class-name":"table-cell",height:"300px","row-key":"goodsCode",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection","reserve-selection":"",align:"center",width:"45"}}),e._l(e.table,function(e,t){return o("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",align:"center",formatter:e.formatter,prop:e.prop,label:e.label}})}),e._t("append",null,{slot:"append"})],2)],1),o("div",{attrs:{slot:"reference"},slot:"reference"},[o("el-input",{staticStyle:{width:"300px"},attrs:{disabled:e.dis,clearable:"",placeholder:e.placeholderText},on:{clear:function(t){return e.clearList()}},nativeOn:{click:function(t){return e.handleInputClick(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return t.stopPropagation(),e.showNoVip(t)}},slot:"append"})],1)],1)],1)},Zt=[],Yt=(o("6b54"),o("87b3"),o("456d"),[{prop:"name",label:"服务名称"},{prop:"twoCategoryName",label:"服务分类",formatter:function(e){return"".concat(e.twoCategoryName).concat(e.threeCategoryName?"/"+e.threeCategoryName:"")}},{prop:"standardPrice",label:"售价"}]),qt=[{prop:"name",label:"商品名称"},{prop:"brandName",label:"品牌"},{prop:"specification",label:"规格"},{prop:"inStock",label:"当前库存",formatter:function(){return"-"}},{prop:"standardPrice",label:"售价"}],Qt=null,Ht={props:{dis:{type:Boolean,default:!1},type:{type:String,default:"service"},placeholder:String},data:function(){return{curCategoryInfo:{},showDialog:!1,name:"",tableData:[],tableLoading:!1,categoryList:[],categoryLoading:!1,selectionList:[],treeProps:{label:"categoryName",children:"children"}}},computed:{merchantCode:function(){return UserModule.merchantCode},placeholderText:function(){return this.placeholder||"service"===this.type?"搜索服务名称":"goods"===this.type?"搜索商品名称、品牌、规格":"搜索门店耗材"},table:function(){return"service"===this.type?Yt:(this.type,qt)}},watch:(de={},Object(mt["a"])(de,"curCategoryInfo.categoryCode",function(e,t){this.curCategoryInfo&&e!==t&&this.getGoodsListByCategory(this.curCategoryInfo.categoryCode,this.curCategoryInfo.level)}),Object(mt["a"])(de,"name",function(e){var t=this;e?(Qt&&clearTimeout(Qt),Qt=setTimeout(function(){Qt=null,t.getGoodsListByCategory()},500)):(Qt&&clearTimeout(Qt),Object.keys(this.curCategoryInfo).length&&this.getGoodsListByCategory(this.curCategoryInfo.categoryCode,this.curCategoryInfo.level))}),de),created:function(){},methods:{clearList:function(){this.tableData=[]},showNoVip:function(){"service"==this.type?this.$parent.showNoVip():this.$parent.showPartsNoVip()},init:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getGoodsCategoryList();case 3:this.categoryList.length&&(t=this.categoryList[0],this.curCategoryInfo=t,this.$refs.tree.setCurrentKey(t.categoryCode)),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),handleInputClear:function(){this.getGoodsListByCategory(this.curCategoryInfo.categoryCode,this.curCategoryInfo.level)},handleInputClick:function(e){this.showDialog&&e.stopPropagation()},getGoodsCategoryList:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.categoryLoading=!0,t=this.$http.get("/LaborGoods/listByCategoryForLaborSynthesize",{merchantCode:this.$route.query.merchantCode,type:"service"===this.type?1:2,condition:this.name}),o=t.data,this.tableData=o,e.next=6,this.$nextTick();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:return e.prev=11,this.categoryLoading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));function t(){return e.apply(this,arguments)}return t}(),getGoodsListByCategory:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t,o){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.tableLoading=!0,this.$http.get("/LaborGoods/listByCategoryForLaborSynthesize",{merchantCode:this.$route.query.merchantCode,type:"service"===this.type?1:"merchant"==this.type?3:2,condition:this.name}).then(function(e){e.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),a.tableData=e.data}),e.next=5,this.$nextTick();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:return e.prev=10,this.tableLoading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));function t(t,o){return e.apply(this,arguments)}return t}(),getGoodsListByName:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,getGoodsListByName({merchantCode:this.merchantCode,name:this.name,goodsType:"service"===this.type?2:1});case 3:t=e.sent,o=t.data,this.tableData=o,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}))),handleSelectionChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectionList=e,this.$emit("selectionChange",e,this.type)},categoryTreeClick:function(e){this.curCategoryInfo=e}}},Jt=Ht,Xt=(o("8dbb"),o("14d4"),Object(l["a"])(Jt,Wt,Zt,!1,null,"5a522314",null)),Kt=Xt.exports,eo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp,"show-close":!1},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},to=[],oo={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ao=oo,so=(o("d1df"),Object(l["a"])(ao,eo,to,!1,null,"0f79e27a",null)),io=so.exports,no=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b4"},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("维修/保养项目(配件)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:0==e.dis?1==t.row.isGift:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"销售人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px",display:"flex"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},on:{focus:e.showPartsNoVip},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("div"),o("div",[o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品")])],1)],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList,customerCode:this.$props.customerCode},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},ro=[],lo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:6}},[e._v("商品名称")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:3}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-size":"18px",color:"#fff"},attrs:{span:3}},[e._v("售价")]),o("el-col",{attrs:{span:5}},[o("el-input",{attrs:{placeholder:"请输入查询内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGoods(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{directives:[{name:"show",rawName:"v-show",value:""==e.search,expression:"search ==''"}],ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName,height:"400"},on:{"expand-change":e.toggleRowExpansion,"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection"}}),o("el-table-column",{attrs:{type:"expand"},on:{click:function(t){return e.showSecond(e.scope.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(t){return o("el-checkbox-group",{key:t,on:{change:function(o){return e.handleCheckAllChange(t)}},model:{value:e.checkboxGroup1,callback:function(t){e.checkboxGroup1=t},expression:"checkboxGroup1"}},[o("el-checkbox",{staticStyle:{width:"100%","margin-left":"40px"},attrs:{label:t}},[o("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[o("div",[e._v(e._s(1==t.memberCardType?"通用储值卡":2==t.memberCardType?"限定储值卡":3==t.memberCardType?"次卡":4==t.memberCardType?"默认卡":"卡外"))]),0!=t.memberCardType?o("div",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.memberCardName))]):e._e(),3==t.memberCardType&&0!=t.memberCardType?o("div",[e._v("(余次"+e._s(t.surplusCount)+")")]):e._e(),3!=t.memberCardType&&0!=t.memberCardType?o("div",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.cardBalance))]):e._e(),o("div",{staticStyle:{"margin-left":"50px"}},[e._v("¥"+e._s(t.price))]),null!=t.serviceDiscount&&3!=t.memberCardType?o("div",{staticStyle:{padding:"4px 15px","margin-left":"10px","border-radius":"7px","text-align":"center",background:"#169BD5",color:"#fff"}},[e._v(e._s(10*Number(t.serviceDiscount))+"折\n\t\t\t\t\t\t\t\t\t\t")]):e._e()])])],1)})}}])}),o("el-table-column",{attrs:{width:"150",prop:"name"}}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"}}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.standardPrice)+"\n\t\t\t\t\t\t\t\t")]):e._e(),t.row.list.length>1?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t有会员卡\n\t\t\t\t\t\t\t\t")]):e._e()]}}])})],1),o("el-table",{directives:[{name:"show",rawName:"v-show",value:""!=e.search,expression:"search != ''"}],ref:"searchTable",attrs:{"row-key":"goodsCode",data:e.tableData,"show-header":!1},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45"}}),o("el-table-column",{attrs:{width:"150",prop:"name"}}),o("el-table-column",{attrs:{width:"90",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{prop:"standardPrice"}})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},co=[],uo=null,po={props:{pnvIsShow:Boolean,searchList:Array,customerCode:String},components:{},watch:{search:function(e){var t=this;e&&(uo&&clearTimeout(uo),uo=setTimeout(function(){uo=null,t.searchGoods()},500))},serverList:function(e,t){var o=this;this.$nextTick(function(){o.endList.forEach(function(t){e.forEach(function(e){e.list.map(function(e){e.goodsCode+e.goodsCome==t.goodsCode+t.goodsCome&&o.checkboxGroup1.push(e)})})})})},tableData:function(e,t){var o=this;this.$nextTick(function(){o.endList.map(function(t){e.forEach(function(e){e.goodsCode==t.goodsCode&&o.$refs.searchTable.toggleRowSelection(e,!0)})})})}},data:function(){return{searchTable:[],tableData:[],search:"",checkboxGroup1:[],checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[]}},computed:{endList:function(){return this.searchTable.concat(this.checkboxGroup1)}},methods:{handleSelectionChange:function(e){this.searchTable=e},searchGoods:function(){var e=this;this.$http.get("/LaborGoods/listByCategoryForLaborSynthesize",{merchantCode:this.merchantCode,type:2,condition:this.search}).then(function(t){null!=t.data&&(t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),e.tableData=t.data)})},handleCheckAllChange:function(e){},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},toggleRowExpansion:function(e){this.secondList=e.list},confirm:function(){var e=this.endList;this.$emit("sendPnv",e)},close:function(){this.$emit("closePnv",!1)},showSecond:function(e){},serverChecked:function(e){this.arr1=e,this.serverSelected=this.arr1.concat(this.arr2)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),this.serverSelected=this.arr1.concat(this.arr2)},handleClassify:function(e){console.log("点击",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.$props.customerCode,categoryCode:e,level:"3"}).then(function(e){console.log("%c请求三级列表","color:#70ff57;font-size:20px;font-weight:bold",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,t.specification=e.specification,t.brandName=e.brandName,t.memberCardType,t.price=e.standardPrice,t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:999,serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:3,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code,specification:e.specification,brandName:e.brandName})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){var e=this;this.$bus.$on("delRows",function(t){var o=e;o.checkboxGroup1.map(function(e,a){e.memberCardType+e.goodsCode+e.goodsName==t.memberCardType+t.goodsCode+t.goodsName&&o.checkboxGroup1.splice(a,1)})}),this.merchantCode=this.$route.query.merchantCode}},mo=po,ho=(o("91c5"),Object(l["a"])(mo,lo,co,!1,null,"af546858",null)),fo=ho.exports,vo={components:{newproduct:ze,pnv:fo,selectGoods:Kt,emp:io},props:{Elist:{type:Array},dis:{type:Boolean},manOur:{type:Array},customerCode:{type:String}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null}},computed:{},methods:{selectGoods:function(e,t){console.log("type",t),"goods"==t&&(this.$parent.manOur2=this.uniqs(this.$parent.manOur2.concat(e)))},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S02",type:e}).then(function(e){console.log("%c请求新建服务分类的 一 二 三级列表结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},openNp:function(){this.npIsShow=!0,this.getOptions("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("2")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S02",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){e.map(function(e){null==e.price&&(e.price=0),e.subtotalMoney=e.price*e.goodsCount}),console.log("%c确认按钮","color:#70ff57;font-size:20px;font-weight:bold",e),this.manOur=this.uniqs(this.manOur.concat(e)),this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},set:function(e,t){this.manOur[e].subtotalMoney=0,this.manOur[e].goodsCount=1,this.$set(this.manOur[e],"isGift",1)},deleteRow:function(e,t){this.$bus.$emit("delRows",this.manOur[e]),this.$set(this.manOur[e],"goodsCount",1),this.$set(this.manOur[e],"isGift",0),t.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var a=this;console.log("%c111","font-size:100px"),a.manOur[a.chooseEmpidx].mapList=o,console.log(this.manOur),this.$emit("children",this.manOur)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},manOurMoneyChange:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t),this.$emit("children",this.manOur)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],n=t[s];if(JSON.stringify(n)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},bo=vo,go=(o("af8d"),Object(l["a"])(bo,no,ro,!1,null,"507610e8",null)),yo=go.exports,Co=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b5"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"材料名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"geted",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"inventory",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px",display:"flex"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},on:{focus:e.showPartsNoVip},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("div"),o("div",[o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品(配件)")])],1)],1),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},wo=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("门店耗材"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("注:材料中的商品只记录库存变化,不计入结算余额")])])}],ko=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff",color:"#fff"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"#fff","font-size":"18px"},attrs:{span:5}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"#fff","font-size":"18px"},attrs:{span:4}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"#fff","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"#fff","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"#fff"},attrs:{span:4}},[e._v("售价")]),o("el-col",{attrs:{span:4}},[o("el-input",{attrs:{placeholder:"请输入查询内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGoods(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{directives:[{name:"show",rawName:"v-show",value:""==e.search,expression:"search == ''"}],ref:"multipleTable",attrs:{"show-header":!1,data:e.serverList,"row-key":e.getRowKeys,height:"400"},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{width:"200",prop:"goodsName"}}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t¥"+e._s(t.row.price)+"\n\t\t\t\t\t\t\t")]}}])})],1),o("el-table",{directives:[{name:"show",rawName:"v-show",value:""!=e.search,expression:"search != ''"}],ref:"searchTable",attrs:{"row-key":"goodsCode",data:e.tableData,"show-header":!1},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45"}}),o("el-table-column",{attrs:{width:"",prop:"goodsName"}}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{prop:"standardPrice"}})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.mapList},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},xo=[],So=null,_o={components:{},props:{pnvIsShow:Boolean,searchList:Array},data:function(){return{searchTable:[],tableData:[],search:"",getRowKeys:function(e){return e.goodsCode},searchShow:!0,serverSelected:[],serverList:[]}},watch:{search:function(e){var t=this;e&&(So&&clearTimeout(So),So=setTimeout(function(){So=null,t.searchGoods()},500))},serverList:function(e,t){var o=this;this.$nextTick(function(){o.endList.forEach(function(t){e.forEach(function(e){e.goodsCode+e.goodsCome==t.goodsCode+t.goodsCome&&o.$refs.multipleTable.toggleRowSelection(e,!0)})})})},tableData:function(e,t){var o=this;this.$nextTick(function(){o.endList.map(function(t){e.forEach(function(e){e.goodsCode==t.goodsCode&&o.$refs.searchTable.toggleRowSelection(e,!0)})})})}},computed:{endList:function(){return this.searchTable.concat(this.serverSelected)}},methods:{handleSelectionChange:function(e){this.searchTable=e},searchGoods:function(){var e=this;this.$http.get("/LaborGoods/listByCategoryForLaborSynthesize",{merchantCode:this.merchantCode,type:3,condition:this.search}).then(function(t){null!=t.data&&(t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.price=e.standardPrice,e.serviceTime=e.serviceMinutes,e.goodsName=e.name,e.goodsVipId=null,e.num=1,e.isGift=0,e.mapList=[],e.goodsCount=e.num,e.selected=!1,e.subtotalMoney=e.goodsCount*e.price}),e.tableData=t.data)})},confirm:function(){this.$emit("sendPnv",this.endList)},close:function(){this.$emit("closePnv")},serverChecked:function(e){this.serverSelected=e},handleClassify:function(e){this.getThree(e.code,"3")},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){"10000"==e.code&&(e.data.map(function(e){e.goodsCome=3,e.goodsCount=1}),o.serverList=e.data)})},handleOpen:function(e){},handleClose:function(e){}},mounted:function(){},created:function(){var e=this;this.merchantCode=this.$route.query.merchantCode,this.$bus.$on("dl",function(t){e.$refs.multipleTable.toggleRowSelection(t,!1)})}},No=_o,Lo=(o("0c0b"),Object(l["a"])(No,ko,xo,!1,null,"645350fc",null)),Oo=Lo.exports,Io={components:{pnv:Oo,newproduct:ze,merchant:Kt},props:{dis:{type:Boolean},manOur:{type:Array}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empAlert:null}},computed:{},methods:{selectMerchant:function(e,t){"merchant"==t&&(this.$parent.manOur3=this.uniqs(this.$parent.manOur3.concat(e)))},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S03",type:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--无会员卡弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("2")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S03",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){this.manOur=this.uniqs(this.manOur.concat(e)),this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},openNp:function(){this.npIsShow=!0,this.getOptions("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},set:function(e,t){t[e].isGift=1},deleteRow:function(e,t){this.$bus.$emit("dl",t[e]),this.manOur.splice(e,1)},manOurMoneyChange:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],n=t[s];if(JSON.stringify(n)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},To=Io,Ao=(o("0b4f"),Object(l["a"])(To,Co,wo,!1,null,"2be4c816",null)),Mo=Ao.exports,$o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b6"},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("客户自带材料")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入商品名称",disabled:e.dis},on:{change:e.input},model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入品牌",disabled:e.dis},on:{change:e.input},model:{value:t.row.brandName,callback:function(o){e.$set(t.row,"brandName",o)},expression:"scope.row.brandName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入规格型号",disabled:e.dis},on:{change:e.input},model:{value:t.row.model,callback:function(o){e.$set(t.row,"model",o)},expression:"scope.row.model"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"商品数量",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},on:{change:e.input},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1)]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("el-button",{attrs:{type:"primary"}},[e._v("+新增")])],1):e._e()],1)},Po=[],Do={components:{},props:{dis:{type:Boolean},manOur:{type:Array,default:[]},useType:String},data:function(){return{manOurSearch:""}},computed:{},methods:{add:function(){this.manOur.push({goodsName:"",brandName:"",model:"",goodsCount:"1",remarks:"",type:4})},input:function(){this.$emit("children",this.manOur)},deleteRow:function(e,t){this.manOur.splice(e,1),this.$emit("children",this.manOur)},changeManOurNum:function(e,t,o,a){this.$emit("children",this.manOur)}},mounted:function(){},created:function(){}},Go=Do,Vo=(o("3262"),Object(l["a"])(Go,$o,Po,!1,null,"072427ec",null)),Eo=Vo.exports,Fo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b7"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"附加费用名称"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","justify-content":"center"}},[o("div",{staticStyle:{"margin-right":"10px"}},[e._v("附加费用名称")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("新增")]),o("div",{staticStyle:{color:"#409Eff"}},[e._v("/")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("编辑")])],1)]}},{key:"default",fn:function(t){return[o("el-select",{attrs:{placeholder:"请选择",disabled:e.dis},on:{"visible-change":e.getlists,change:e.selectChange},model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}},e._l(e.lists,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"金额/元"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入金额",disabled:e.dis},on:{change:e.priceChange},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",e._n(o))},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},on:{change:e.remarksChange},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,e.manOur)}}},[e._v("删除")])]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("el-button",{attrs:{type:"primary"}},[e._v("+新增")])],1):e._e(),o("addition",{attrs:{isShowAddition:e.isShowAddition,addlists:e.addlists},on:{close:e.addPrice}})],1)},jo=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("附加费用"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("附加费用 注:加工费、管理费、税费等其他费用")])])}],Ro=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{title:"附加费用","close-on-click-modal":!1,center:"",visible:e.isShowAddition,width:"40%"},on:{close:e.close,"update:visible":function(t){e.isShowAddition=t}}},[o("el-input",{attrs:{maxlength:"10",placeholder:"请输入附加费类别,不超过10字"},model:{value:e.add,callback:function(t){e.add=t},expression:"add"}},[o("el-button",{staticStyle:{background:"#409eff",color:"#fff","border-top-left-radius":"0","border-bottom-left-radius":"0",border:"1px solid #409eff"},attrs:{slot:"append",type:"primary",disabled:e.addlists.length>10},on:{click:e.adds},slot:"append"},[e._v("添 加")])],1),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h3",[e._v("附加费列表")]),o("span",{staticStyle:{color:"#b2baca"}},[e._v("(最多创建10个,当前总计: "),o("span",{staticStyle:{color:"#fea022"}},[e._v(e._s(e.addlists.length)+"个")]),e._v(")")])]),o("el-table",{attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:900,background:"#f1f4f5"},data:e.addlists}},[o("el-table-column",{attrs:{type:"index",label:"序号"}}),o("el-table-column",{attrs:{prop:"name",width:"300",label:"附加费名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showSet?o("div",[e._v(e._s(t.row.name))]):e._e(),t.row.showSet?e._e():o("el-input",{model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.showSet?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑")]):e._e(),t.row.showSet?e._e():o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.save(t.$index,t.row)}}},[e._v("保存")]),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,e.addlists)}}},[e._v("删除")])]}}])})],1)],1)],1)},zo=[],Bo={components:{},props:{isShowAddition:Boolean,addlists:Array},data:function(){return{all:"3",add:""}},computed:{},methods:{set:function(e,t){console.log("编辑",t),t.showSet=!1,t.showSave=!0,this.$set(this.$props.addlists,e,t)},save:function(e,t){var o=this;t.showSet=!0,t.showSave=!1,this.$http.get("/laborSynthesize/editAdditional",{merchantCode:this.merchantCode,name:t.name,id:t.id}).then(function(a){console.log("%c请求结果","color:red;font-size:20px",a),"10000"==a.code?o.$set(o.$props.addlists,e,t):alert(a.message)})},del:function(e,t){this.$http.get("/laborSynthesize/deleteAdditional",{merchantCode:this.merchantCode,name:t[e].name,id:t[e].id}).then(function(o){console.log("%c请求删除结果","color:red;font-size:20px",o),"10000"==o.code?t.splice(e,1):alert(o.message)})},getlists:function(){var e=this;this.$http.get("/laborSynthesize/getAdditional",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?(e.lists=t.data,t.data.map(function(e){e.showSet=!0,e.showSave=!1}),e.addlists=t.data,console.log("打开的弹框",e.addlists)):alert(t.message)})},adds:function(){var e=this;""!=this.add?this.$http.get("/laborSynthesize/addAdditional",{name:this.add,merchantCode:this.merchantCode}).then(function(t){console.log("%c请求结果","color:red;font-size:20px",t),"10000"==t.code?(e.getlists(),e.add=""):alert(t.message)}):alert("请输入附加费类别")},close:function(){this.$emit("close",this.addlists)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Uo=Bo,Wo=(o("c259"),Object(l["a"])(Uo,Ro,zo,!1,null,"715118dd",null)),Zo=Wo.exports,Yo={components:{addition:Zo},props:{dis:{type:Boolean},subjoin:{type:Array},useType:String},data:function(){return{addlists:[],lists:null,isShowAddition:!1,options:[],manOur:[]}},computed:{sums:function(){var e=this,t=0;console.log("数组",e.manOur);for(var o=0;o<e.manOur.length;o++)t+=Number(e.manOur[o].price);return console.log("%c计算总和","color:#70ff57;font-size:20px;font-weight:bold",t),t}},watch:{subjoin:function(e){this.manOur=e}},methods:{del:function(e,t){t.splice(e,1)},addPrice:function(e){this.isShowAddition=!1,this.options=e},addlist:function(){this.isShowAddition=!0,this.getlists()},add:function(){this.manOur.push({name:"",price:"",remarks:""})},getlists:function(){var e=this;this.$http.get("/laborSynthesize/getAdditional",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?(e.lists=t.data,t.data.map(function(e){e.showSet=!0,e.showSave=!1}),e.addlists=t.data,console.log("打开的弹框",e.addlists)):alert(t.message)})},selectChange:function(){this.manOur;this.$emit("selectChange",this.manOur)},priceChange:function(){this.$emit("priceChange",this.manOur)},remarksChange:function(){this.$emit("remarksChange",this.manOur)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},qo=Yo,Qo=(o("1b16"),Object(l["a"])(qo,Fo,jo,!1,null,"2aa2742e",null)),Ho=Qo.exports,Jo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新增车辆/客户","close-on-click-modal":!1,center:"",visible:e.addUserIsShow,width:"50%","show-close":!1},on:{"update:visible":function(t){e.addUserIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("carNum",{model:{value:e.form.plateNumber,callback:function(t){e.$set(e.form,"plateNumber",t)},expression:"form.plateNumber"}})],1),o("el-form-item",{attrs:{label:"用户手机号"}},[o("el-input",{attrs:{placeholder:"请填写11位数字"},model:{value:e.form.customerPhone,callback:function(t){e.$set(e.form,"customerPhone",e._n(t))},expression:"form.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{placeholder:"请输入客户姓名,不超过10个字",maxlength:"10"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号"},model:{value:e.form.vehicleIdNum,callback:function(t){e.$set(e.form,"vehicleIdNum",t)},expression:"form.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号"},model:{value:e.form.engineNum,callback:function(t){e.$set(e.form,"engineNum",t)},expression:"form.engineNum"}})],1),o("el-form-item",{attrs:{label:"注册日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择注册日期","value-format":"yyyy-MM-dd"},model:{value:e.form.applyDate,callback:function(t){e.$set(e.form,"applyDate",t)},expression:"form.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择品牌"},on:{change:e.chCar,focus:e.getBrand},model:{value:e.form.brandName,callback:function(t){e.$set(e.form,"brandName",t)},expression:"form.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车型车系"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.form.seriesNames,callback:function(t){e.$set(e.form,"seriesNames",t)},expression:"form.seriesNames"}})],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色"},model:{value:e.form.carColor,callback:function(t){e.$set(e.form,"carColor",t)},expression:"form.carColor"}})],1),o("el-form-item",{attrs:{label:"本次公里数"}},[o("el-input",{attrs:{placeholder:"请输入本次公里数"},model:{value:e.form.lastMileage,callback:function(t){e.$set(e.form,"lastMileage",t)},expression:"form.lastMileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择保险到期日期","value-format":"yyyy-MM-dd"},model:{value:e.form.compulsoryInsureDeadline,callback:function(t){e.$set(e.form,"compulsoryInsureDeadline",t)},expression:"form.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择年检日期","value-format":"yyyy-MM-dd"},model:{value:e.form.annualInspectDate,callback:function(t){e.$set(e.form,"annualInspectDate",t)},expression:"form.annualInspectDate"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},Xo=[],Ko={components:{carNum:te},props:{addUserIsShow:Boolean},data:function(){return{brand:[],series:[],List:[],form:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",lastMileage:"",customerName:"",customerPhone:"",plateNumber:""},newProduct:!0,tel:""}},computed:{},methods:{handleChange:function(e){console.log(e)},close:function(){this.$emit("closeAc")},save:function(){this.$emit("noSend")},confirm:function(){this.form.brandId=this.form.brandName.split("/")[0]||"",this.form.brandName=this.form.brandName.split("/")[1]||"",this.form.seriesName=this.form.seriesNames[0].split("/")[1]||"",this.form.seriesId=this.form.seriesNames[0].split("/")[0]||"",this.form.modelId=this.form.seriesNames[1].split("/")[0]||"",this.form.modelName=this.form.seriesNames[1].split("/")[1]||"",console.log(this.form.seriesName,this.form.brandId,this.form.brandName,this.form.modelId,this.form.modelName,"12312",this.form.seriesNames),this.$emit("sendAc",this.form)},chCar:function(e){var t=this;""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求获取车辆车系列表结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;console.log("选择车型车系"),console.log("%c车型","color:red",e[0].split("/")[0]),this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){console.log("请求车辆车型结果",e),"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求车品牌结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})}},mounted:function(){},created:function(){}},ea=Ko,ta=(o("a6d0"),Object(l["a"])(ea,Jo,Xo,!1,null,"46a52c5e",null)),oa=ta.exports,aa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vip"},[o("el-dialog",{attrs:{title:"","close-on-click-modal":!1,visible:e.vipPop,width:"80%","show-close":!1},on:{"update:visible":function(t){e.vipPop=t},close:e.close}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("会员卡内项目")]),o("div",{staticClass:"d-flex",attrs:{id:"d1"}},[o("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.vipChange},model:{value:e.cur2,callback:function(t){e.cur2=t},expression:"cur2"}},e._l(e.vipList,function(e,t){return o("el-tab-pane",{key:t,attrs:{label:e.memberCardName,name:e}})}),1)],1),o("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px","text-align":"center","font-size":"14px",color:"#333",background:"#F2F2F2"}},[e._v("全部服务"+e._s(e.serve)+"折,全部商品"+e._s(e.product)+"折,此处看添加卡内特殊优惠项目和赠送项目;如需添加其他项目,可在点击右上角关闭按钮后的页面添加.")]),o("div",{staticStyle:{color:"#333","font-size":"18px","margin-top":"15px",height:"73px"}},[o("div",e._l(e.tabTitle,function(t,a){return o("el-col",{key:a,staticClass:"tabs",attrs:{span:6}},[o("p",{class:{active:e.cur==a},staticStyle:{"text-align":"center","padding-bottom":"10px"},on:{click:function(t){return e.tabChangess(a)}}},[e._v(e._s(t))])])}),1)]),o("el-row",[o("el-col",{attrs:{span:18}},[o("div",{staticStyle:{"margin-top":"20px"}},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#f2f2f2"},data:e.list,"row-key":e.getRowKeys},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{prop:"goodsName",label:"服务名称"}}),o("el-table-column",{attrs:{prop:"serviceMinutes",label:"所需工时"}}),o("el-table-column",{attrs:{prop:"price",label:"工时单价(个/元)"}}),o("el-table-column",{attrs:{prop:"price",label:"单价"}}),o("el-table-column",{attrs:{type:"selection",prop:"money",label:"操作","reserve-selection":!0}})],1)],1)]),o("el-col",{attrs:{span:6}},[o("h4",[e._v("已选项目("+e._s(e.chooseList.length)+")")]),e._l(e.chooseList,function(t,a){return o("div",{key:a,staticClass:"d-spb",staticStyle:{"margin-left":"10px"}},[o("div",{staticClass:"d-flex"},[o("div",[e._v("["+e._s(t.choose)+"]")]),o("div",[e._v(e._s(t.goodsName))])]),o("div",[o("i",{staticClass:"el-icon-close",on:{click:function(o){return e.delSelected(t.goodsCode)}}})])])})],2)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},sa=[],ia={components:{},props:{vipPop:Boolean,vipList:Array,arr:Array,customerCode:String},data:function(){return{listType:"specialService",otherVipList:[],chooseList:[],cur:-1,cur2:-1,tabTitle:["特殊优惠项目--服务","特殊优惠项目--商品","赠送--服务","赠送--商品"],list:[],serverType:"",options:[],serve:10,product:"10",card:"会员卡",num:"300"}},computed:{},watch:{arr:function(e){this.list=e}},methods:{getRowKeys:function(e){return Number(e.vips)},close:function(){this.$emit("closeVipPop")},confirm:function(){var e=this,t=this.chooseList;console.log(this.chooseList),this.$nextTick(function(){e.$emit("confirmVipPop",t)})},delSelected:function(e){var t;this.list.map(function(o,a){e==o.goodsCode&&(t=a)}),this.$refs.multipleTable.toggleRowSelection(this.list[t],!1)},getList:function(e){var t=this;this.$http.get("/laborSynthesize/getOtherVipGoods",{merchantCode:this.merchantCode,vipId:e,customerCode:"3100000100106"}).then(function(e){"10000"==e.code?(e.data.specialService.map(function(e){e.num=1,e.goodsCount=e.num}),e.data.specialGoods.map(function(e){e.num=1,e.goodsCount=e.num}),e.data.freeService.map(function(e){e.num=1,e.goodsCount=e.num}),e.data.freeGoods.map(function(e){e.num=1,e.goodsCount=e.num}),t.otherVipList=e.data):alert(e.message)})},vipChange:function(e){this.cur=-1,this.getList(e.name.customerMemberCardId),this.cur2=e.index},tabChangess:function(e){this.cur=e;var t=[],o=[],a=[],s=[];if(this.otherVipList.specialService.map(function(e){e.vips=e.goodsComeVipId+1}),t=this.otherVipList.specialService,this.otherVipList.specialGoods.map(function(e){e.vips=e.goodsComeVipId+2}),o=this.otherVipList.specialGoods,this.otherVipList.freeService.map(function(e){e.vips=e.goodsComeVipId+3}),a=this.otherVipList.freeService,this.otherVipList.freeGoods.map(function(e){e.vips=e.goodsComeVipId+4}),s=this.otherVipList.freeGoods,0==e)t.map(function(e){e.choose="特殊优惠项目--服务",e.goodsName=e.name,e.mapList=[],e.goodsCome=2,e.isGift=0,e.goodsVipId=e.goodsComeVipId,e.specification=e.specification,e.brandName=e.brandName,e.serviceMinutes=e.serviceMinutes,e.subtotalMoney=e.price,e.remarks=""}),this.list=t,this.listType="specialService";else if(1==e)o.map(function(e){e.choose="特殊优惠项目--商品",e.goodsName=e.name,e.mapList=[],e.goodsCome=2,e.isGift=0,e.goodsVipId=e.goodsComeVipId,e.specification=e.specification,e.brandName=e.brandName,e.serviceMinutes=e.serviceMinutes,e.subtotalMoney=e.price}),this.list=o,this.listType="specialGoods";else if(2==e)a.map(function(e){e.choose="赠送--服务",e.goodsName=e.name,e.mapList=[],e.goodsCome=2,e.isGift=0,e.goodsVipId=e.goodsComeVipId,e.specification=e.specification,e.brandName=e.brandName,e.serviceMinutes=e.serviceMinutes,e.subtotalMoney=e.price}),this.list=a,this.listType="freeService";else if(3==e){t.map(function(e){e.choose="赠送--商品",e.goodsName=e.name,e.mapList=[],e.goodsCome=2,e.isGift=0,e.goodsVipId=e.goodsComeVipId,e.specification=e.specification,e.brandName=e.brandName,e.serviceMinutes=e.serviceMinutes,e.subtotalMoney=e.price}),this.list=s;this.listType="freeGoods"}},selectChange:function(e){this.chooseList=e},optionsChange:function(e){var t=[],o=[],a=[],s=[];"specialService"==this.listType?(this.otherVipList.specialService.map(function(o){o.twoCategoryName==e&&t.push(o)}),this.list=t):"specialGoods"==this.listType?(this.otherVipList.specialGoods.map(function(t){t.twoCategoryName==e&&o.push(t)}),this.list=o):this.otherVipList.freeService?(this.otherVipList.freeService.map(function(t){t.twoCategoryName==e&&a.push(t)}),this.list=a):this.otherVipList.freeGoods&&(this.otherVipList.freeGoods.map(function(t){t.twoCategoryName==e&&s.push(t)}),this.list=s)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},na=ia,ra=(o("75af"),Object(l["a"])(na,aa,sa,!1,null,"7d21ef4e",null)),la=ra.exports,ca={components:{vippop:la,addcar:oa,useOtherVip:et,newServe:Ge,nv:Mt,emp:io,b4:yo,b5:Mo,b6:Eo,b7:Ho,commonGoods:Ut,selectServer:Kt},data:function(){return{Blist:[],Elist:[],customerCodeOther:"",customerPhoneOther:"",customerNameOther:"",orderStatus:"",AvipList:[],BalertList:[],Clist:[],Dlist:[],delRows:[],fatherData:[],state:null,customerCode:null,cust:null,usevip:!1,vipList:[],nsIsShow:!1,nsList:null,options:null,brandId:null,familyId:null,pnvIsShow:!1,searchList:[],uvIsShow:!1,uvSearchList:[],nvIsShow:!1,nvSearchList:[],otherRemark:"",subjoin:[],manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,manOur:[],manOur2:[],manOur3:[],manOur4:[],lastTimeRemark:"",buyer:"0",price:"0",expense:"0",vipNum:0,vipCar:"皖BA827A",vipPhone:"18605533016",vipName:"张三",useVip:!1,series:[],brand:[],dis:!1,vehicleId:null,sumsm:null,owner:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",mileage:"",customerName:"",customerPhone:"",plateNumber:""},addUserIsShow:!1,vipPop:!1,search:"",useType:null}},computed:{allNums:function(){var e=this,t=0,o=0,a=0;return e.subjoin.length>0&&e.subjoin.map(function(e){t+=Number(e.price)}),e.manOur.length>0&&e.manOur.map(function(e){o+=Number(e.subtotalMoney)}),e.manOur2.length>0&&e.manOur2.map(function(e){a+=Number(e.subtotalMoney)}),(Number(t)+Number(o)+Number(a)).toFixed(2)}},created:function(){var e=this;this.createId=localStorage.getItem("createId"),this.merchantCode=this.$route.query.merchantCode,this.getBrand(),void 0!=this.$route.query.carNum&&this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.$route.query.carNum}).then(function(t){if("10000"==t.code){e.owner=t.data,e.owner.plateNumber=e.$route.query.carNum,e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode,e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value])})},1500)}})},1500),null!=t.data.vehicleColor&&(e.owner.carColor=t.data.vehicleColor),null!=t.data.registeredDate&&(e.owner.applyDate=t.data.registeredDate)}else alert(t.message)}),this.useType=this.$route.query.type,setTimeout(function(){"look"==e.$route.query.type?(e.getForm(),e.dis=!0):"copy"!=e.$route.query.type&&"set"!=e.$route.query.type||(e.workOrderCode=e.$route.query.workOrderCode,e.orderId=e.$route.query.orderid,e.getForm("copy"))},1e3)},methods:{arrayNew:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++)if(e[o].goodsCode+e[o].goodsCome==t[s].goodsCode+t[s].goodsCome){a=1;break}0==a&&t.push(e[o])}return t},selectServer:function(e,t){"service"==t&&(this.manOur=this.arrayNew(this.manOur.concat(this.Clist.concat(this.AvipList.concat(e)))))},serverSelected:function(e,t,o){var a=this;this.Blist=e,t?this.manOur=this.arrayNew(this.manOur.concat(this.Clist.concat(this.AvipList.concat(this.Blist)))):this.manOur.map(function(e,t){e.goodsCode==o.goodsCode&&a.manOur.splice(t,1)})},goodsSelected:function(e,t,o){var a=this;this.Elist=e,t?this.manOur2=this.arrayNew(this.manOur2.concat(e)):this.manOur2.map(function(e,t){e.goodsCode==o.goodsCode&&a.manOur2.splice(t,1)})},ic:function(){this.$forceUpdate()},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,code:"S01",parentCode:"0",type:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},sum:function(){},setList:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k,x,S,_,N){var L=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{orderId:this.orderId,workOrderCode:this.workOrderCode,merchantCode:this.merchantCode,customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,status:this.statusList,type:1,workorderType:"1",customerName:e,customerPhone:t,plateNumber:o,mileage:a,engineNum:s,vehicleIdNum:i,applyDate:n,carColor:r,modelName:l,seriesName:c,customerCode:d,employeeId:u,updateId:p,workOrderTime:m,isMyCard:h,remarks:f,totalMoney:N,estimateSubmit:v,brandName:b,nextKeepFitKm:g,nextKeepFitTime:y,repairName:C,repairPhone:w,annualInspectDate:k,compulsoryInsureDeadline:x,list:S,laborOrderGoodsList:_}).then(function(e){"10000"==e.code?L.$router.push({path:"/",query:{merchantCode:L.merchantCode}}):alert(e.message)})},addList:function(e,t,o,a,s,i,n,r,l,c,d,u,p,m,h,f,v,b,g,y,C,w,k,x,S,_,N,L){var O=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{merchantCode:this.merchantCode,beforeRemarks:this.lastTimeRemark,customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,type:e,workorderType:"1",customerName:t,customerPhone:o,plateNumber:a,mileage:s,engineNum:i,vehicleIdNum:n,applyDate:r,carColor:l,modelName:c,seriesName:d,customerCode:u,employeeId:p,updateId:m,workOrderTime:h,isMyCard:f,remarks:v,totalMoney:L,estimateSubmit:b,brandName:g,nextKeepFitKm:y,nextKeepFitTime:C,repairName:w,repairPhone:k,annualInspectDate:x,compulsoryInsureDeadline:S,list:_,laborOrderGoodsList:N}).then(function(e){"10000"==e.code?O.$router.push({path:"/",query:{merchantCode:O.merchantCode}}):alert(e.message)})},getForm:function(e){var t=this;this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:this.$route.query.orderType,copy:e}).then(function(e){if("10000"==e.code){t.orderStatus=e.data.status,0==t.orderStatus?t.statusList=1:t.statusList="",e.data.lastMileage=e.data.mileage||0,t.owner=e.data;var o=e.data.modelName,a=e.data.seriesName;t.brand.map(function(o){e.data.brandName==o.brandName&&(t.owner.brandName=o.value,t.chCar(o.value))}),setTimeout(function(){var e=t;e.series.map(function(t){if(a==t.label){var s=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==o&&(e.owner.seriesName=[s,t.value])})},1500)}})},2500),t.customerCode=e.data.customerCode,e.data.laborOrderGoodsList.map(function(e){1==e.type?t.manOur.push(e):2==e.type?(e.specification=e.serviceFrequency,t.manOur2.push(e)):3==e.type?(e.specification=e.serviceFrequency,t.manOur3.push(e)):t.manOur4.push(e),1!=e.type&&2!=e.type||t.$refs.common.list.map(function(t){e.goodsCode+e.goodsCome==t.goodsCode+t.goodsCome&&(t.selected=!0)})}),t.subjoin=e.data.list,t.otherRemark=e.data.remarks,1==e.data.isMyCard&&(t.useVip=!0,t.customerCodeOther=e.data.customerCodeOther,t.customerPhoneOther=e.data.customerPhoneOther,t.customerNameOther=e.data.customerNameOther,t.state=e.data.customerNameOther+"/"+e.data.customerPhoneOther,t.gp())}})},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S01",type:e}).then(function(e){"10000"==e.code&&(t.nvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},getOtherVipGoods:function(e){var t=this;this.$http.get("/laborSynthesize/getOtherVip",{merchantCode:this.merchantCode,customerCode:e,vehicleId:this.vehicleId}).then(function(e){"10000"==e.code?(t.vipList=e.data,t.vipNum=e.data.length,t.cust=t.customerCode):(t.vipList=[],t.vipNum=0,alert(e.message))})},gp:function(){var e=this,t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.owner.plateNumber}).then(function(o){"10000"==o.code?(e.vehicleId=o.data.vehicleId,t.$http.get("/laborSynthesize/getOtherVip",{merchantCode:t.merchantCode,customerCode:t.customerCodeOther,vehicleId:o.data.vehicleId}).then(function(e){"10000"==e.code?(t.vipList=e.data,t.vipNum=e.data.length,t.cust=t.customerCode):(t.vipList=[],t.vipNum=0,alert(e.message))})):alert(o.message)})},showNoVip:function(){this.nvIsShow=!0,this.getTree("1")},sendNv:function(e){e.map(function(e){e.subtotalMoney=e.goodsCount*e.price}),this.fatherData=e,this.Clist=e,this.manOur=this.uniqs(this.manOur.concat(this.Clist.concat(this.AvipList))),this.nvIsShow=!1},closeNv:function(e){this.nvIsShow=!1},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){"10000"==t.code&&(e.nsList=t.data)}),this.getOptions("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},remarksChange:function(e){this.subjoin=e},priceChange:function(e){this.subjoin=e},selectChange:function(e){this.subjoin=e},children1:function(e){e.map(function(e){e.serviceFrequency=e.specification}),this.manOur2=e},children2:function(e){e.map(function(e){e.serviceFrequency=e.specification}),this.manOur3=e},children3:function(e){this.manOur4=e},confirm:function(){var e,t=this.owner,o="",a="",s="";t.brandName&&(o=t.brandName.split("/")[1]),t.seriesName&&(a=t.seriesName[1].split("/")[1],s=t.seriesName[0].split("/")[1]),e=this.useVip?1:0;var i=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),i=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),"set"==this.useType?this.setList(t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums):this.addList("2",t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"007",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums)},save:function(){var e,t=this.owner,o="",a="",s="";t.brandName&&(o=t.brandName.split("/")[1]),t.seriesName&&(a=t.seriesName[1].split("/")[1],s=t.seriesName[0].split("/")[1]),e=this.useVip?1:0;var i=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),i=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),"set"==this.useType?this.setList(t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums):this.addList("1",t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums)},set:function(e,t){this.manOur[e].isGift=1,this.manOur[e].subtotalMoney=0,this.manOur[e].goodsCount=1},deleteRow:function(e,t){this.$bus.$emit("delRow",t[e]),this.$set(this.manOur[e],"goodsCount",1),this.$set(this.manOur[e],"isGift",0),this.manOur.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var a=this;a.manOur[a.chooseEmpidx].mapList=o},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if("10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},closeVipAlert:function(){this.usevip=!1,this.useVip=!1},vipConfirm:function(e,t){this.state=t,this.customerCodeOther=e,this.customerPhoneOther=t.split("/")[1],this.customerNameOther=t.split("/")[0],this.usevip=!1,this.getOtherVipGoods(e)},userVipChange:function(e){null!=this.vehicleId?(this.useVip=e,this.usevip=e):(this.$alert("使用他人会员卡请先输入车牌号","提示",{confirmButtonText:"确定"}),this.useVip=!1,this.usevip=!1),0==e&&(this.vipNum=0,this.state="")},openVipPop:function(){this.vipPop=!0},closeVipPop:function(){this.vipPop=!1},confirmVipPop:function(e){var t=this,o=[],a=[];e.length>0&&(e.map(function(e){1==e.goodsType?o.push(e):a.push(e)}),this.$nextTick(function(){t.AvipList=a,t.manOur2=t.deWeight(t.manOur2.concat(o)),t.manOur=t.Clist.concat(t.AvipList)}),this.vipPop=!1)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},searchOld:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.search}).then(function(t){if("10000"==t.code){e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.owner=t.data,e.owner.plateNumber=t.data.plateNumber,e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value])})},500)}})},500),null!=t.data.vehicleColor&&(e.owner.carColor=t.data.vehicleColor),null!=t.data.registeredDate&&(e.owner.applyDate=t.data.registeredDate),e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode}else alert(t.message)})},addUser:function(){this.addUserIsShow=!0},closeAc:function(){this.addUserIsShow=!1},sendAc:function(e){var t=this,o=e;this.$http.post("/laborSynthesize/addCarAndCustomer",{plateNumber:o.plateNumber,phone:o.customerPhone,name:o.customerName,vehicleIdNum:o.vehicleIdNum,engineNum:o.engineNum,registeredDate:o.applyDate,brandName:o.brandName,merchantCode:this.merchantCode,brandId:o.brandId,modelName:o.modelName,modelId:o.modelId,seriesName:o.seriesName,seriesId:o.seriesId,lastMileage:o.lastMileage||0,carColor:o.carColor,compulsoryInsureDeadline:o.compulsoryInsureDeadline,annualInspectDate:o.annualInspectDate,source:"s"}).then(function(o){if("10000"==o.code){t.customerCode=o.data.customerCode,t.vehicleId=o.data.vehicleId,t.addUserIsShow=!1,t.owner=e;var a=e.seriesName,s=e.modelName;t.brand.map(function(o){e.brandName==o.brandName&&(t.owner.brandName=o.value,t.chCar(o.value))}),setTimeout(function(){var e=t;e.series.map(function(t){if(a==t.label){var o=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==s&&(e.owner.seriesName=[o,t.value])})},1500)}})},1500)}else alert(o.message)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})},chCar:function(e){var t=this;""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getSeriesList2:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getCarName:function(){},importCarnum:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.owner.plateNumber}).then(function(t){if("10000"==t.code){e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.owner=t.data,e.owner.plateNumber=t.data.plateNumber,e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value])})},500)}})},500),e.owner.carColor=t.data.vehicleColor||"",e.owner.applyDate=t.data.registeredDate||"",e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode}else alert(t.message)})},inputTel:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)||(this.$message.error("请输入正确的手机号"),this.owner.customerPhone="")},inputTel2:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)||(this.$message.error("请输入正确的手机号"),this.owner.repairPhone="")},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],n=t[s];if(JSON.stringify(n)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){}},da=ca,ua=(o("d8aa"),Object(l["a"])(da,St,_t,!1,null,"64dea005",null)),pa=ua.exports,ma=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"close"},[o("div",{staticClass:"pl"},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"font-big",staticStyle:{"font-size":"24px"}},[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.customerName))]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("span",[e._v(e._s(e.laborOrder.customerPhone))])]),o("el-col",{staticClass:"mr",staticStyle:{width:"130px"},attrs:{span:2}},[o("div",[e._v(e._s(e.laborOrder.updateTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"30%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.mileage,callback:function(t){e.$set(e.laborOrder,"mileage",t)},expression:"laborOrder.mileage"}},[o("template",{slot:"append"},[e._v("\n\t\t\t\t\t\t\tKM\n\t\t\t\t\t\t")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("项目明细")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center","line-height":"60px"},attrs:{span:10}},[o("div",{staticClass:"font-big"},[e._v("工单编号:")]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("div",{staticClass:"font-big"},[e._v(e._s(e.laborOrder.workorderCode))])]),o("el-table",{staticStyle:{width:"60%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.listed},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"126px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.laborGoodsEmployeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.laborGoodsEmployeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"40px"}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("业务结算")]),o("table",{staticClass:"table"},[o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px",width:"100px"},attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},[o("div",{staticClass:"d-flex"},[o("p",{staticClass:"underline"},[e._v(e._s(e.vipNum)+"张")]),o("p",[e._v("可用会员卡")])]),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"40px","flex-wrap":"wrap"}},e._l(e.vipCards,function(t,a){return o("el-checkbox-group",{key:a,attrs:{label:t},on:{change:function(o){return e.changeBox(t,a)}},model:{value:e.vipList,callback:function(t){e.vipList=t},expression:"vipList"}},[o("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(o){return e.ch(o,t)}}},[e._v(e._s(t.memberCardName))])],1)}),1)])])]),o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("el-checkbox",{on:{change:e.mes},model:{value:e.isMes,callback:function(t){e.isMes=t},expression:"isMes"}},[e._v("扣卡后短信通知持卡人")])],1)]),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.timersShow}},[e._v(e._s(this.timeCardList.length)+"张")]),o("div",[e._v("可用次卡商品")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showtimeCardList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.goodsName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"1000px",border:"0",padding:"20px","padding-left":"40px","flex-wrap":"wrap"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.couponIsAlert}},[e._v(e._s(e.coupon)+"张")]),o("div",[e._v("可用优惠券")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showCouponList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("储值卡")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.balance)+"元")]),o("div",{staticStyle:{color:"#0000ff"}},[e._v("本次使用金额:"+e._s(e.thisBalance))])])]),o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"}},[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",width:"150px"}},[o("div",{staticClass:"underline",on:{click:e.codeListIsShow}},[e._v(e._s(e.alertCodeList.length)+"张")]),o("div",[e._v("可用兑换码")])]),e._l(e.codeList,function(t,a){return o("div",{key:a,staticClass:"d-flex",staticStyle:{"margin-right":"10px","align-items":"center"}},[o("div",[e._v(e._s(t.name))])])}),o("el-button",{attrs:{type:"text"},on:{click:e.addCode}},[e._v("添加新兑换码")])],2)])])]),o("div",{staticClass:"footer"},[o("div",{staticStyle:{"margin-right":"56px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.vipCount))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.codeDis)))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.favMoney)))])])])]),o("div",{staticStyle:{width:"103%",background:"#ccc",height:"70px","margin-left":"-40px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("工单总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.orderPrice))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",[o("el-input",{on:{input:e.fav},model:{value:e.favMoney,callback:function(t){e.favMoney=t},expression:"favMoney"}})],1),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("应收金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(Number(e.shouldPay).toFixed(2)))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("el-button",{staticStyle:{"margin-right":"35px"},attrs:{type:"text"},on:{click:e.back}},[e._v("返回")]),o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{disabled:e.onceClick,size:"small",type:"primary"},on:{click:e.close}},[e._v("业务结算")])],1)])]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("timesCard",{attrs:{timersCardShow:e.timersCardShow,vipCards:e.onceGoodsListAll,timeCardList:e.showtimeCardList},on:{confirmTimers:e.confirmTimers,closeTimers:e.closeTimers}}),o("codes",{ref:"codes",attrs:{codeShow:e.codeShow,alertCodeList:e.alertCodeList},on:{confirmCode:e.confirmCode,closeCode:e.closeCode}}),o("coupon",{attrs:{couponIsShow:e.couponIsShow,couponList:e.couponList},on:{confirmCoupon:e.confirmCoupon,closeCoupon:e.closeCoupon}}),o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"添加兑换码",visible:e.addCodes},on:{"update:visible":function(t){e.addCodes=t}}},[o("div",{staticStyle:{display:"flex","justify-content":"center","margin-bottom":"30px"}},[o("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("优惠券")]),o("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("次卡商品")])],1),o("el-input",{attrs:{placeholder:"请输入兑换码"},model:{value:e.importCode,callback:function(t){e.importCode=t},expression:"importCode"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeAddCode}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.sendAddCode}},[e._v("确 定")])],1)],1)],1)},ha=[],fa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},va=[],ba={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ga=ba,ya=(o("9684"),Object(l["a"])(ga,fa,va,!1,null,"2908ba16",null)),Ca=ya.exports,wa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选中的次卡商品",center:"",visible:e.timersCardShow,width:"40%","show-close":!1},on:{"update:visible":function(t){e.timersCardShow=t}}},[o("el-row",[o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.timeCardList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("已选数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.timeCardList},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"goodsName"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount"}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},ka=[],xa={components:{},props:{timeCardList:Array,timersCardShow:Boolean,vipCards:Array},data:function(){return{chooseList:[],list:[],val2:[],search:"",disShow:!0}},watch:{timersCardShow:function(e,t){}},computed:{},methods:{inputNumber:function(e,t){this.$set(this.chooseList,t,e)},getBalance:function(e){var t=this;this.$http.post("/LaborBlance/getBalance",{merchantCode:this.merchantCode,workorderCode:this.orderCode,vipCards:this.$props.vipCards,onceCards:e}).then(function(e){console.log("%c请求最高可用抵扣金额结果","color:red;font-size:20px",e),"10000"==e.code?t.$emit("confirmTimers",t.chooseList,e.data.cardBalance,e.data.maxDiscount):alert(e.message)})},confirm:function(){this.$emit("confirmTimers",this.chooseList)},close:function(){this.$emit("closeTimers")},chooseDis:function(e){this.chooseList=e}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode}},Sa=xa,_a=(o("babc"),Object(l["a"])(Sa,wa,ka,!1,null,"53aae4ed",null)),Na=_a.exports,La=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择优惠券",center:"",visible:e.couponIsShow,width:"70%"},on:{"update:visible":function(t){e.couponIsShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{align:"center",prpo:"goodsCount",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:t.row.surplusCount,label:"",size:"small"},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},Oa=[],Ia={components:{},props:{couponIsShow:Boolean,couponList:Array},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},computed:{},watch:{couponList:function(e){e.map(function(e){e.goodsCount=1}),this.list=e}},methods:{confirm:function(){this.$emit("confirmCoupon",this.chooseList)},close:function(){this.$emit("closeCoupon")},chooseDis:function(e){console.log("选择的下标",e),this.chooseList=e}},mounted:function(){},created:function(){}},Ta=Ia,Aa=(o("0611"),Object(l["a"])(Ta,La,Oa,!1,null,"fe9a49bc",null)),Ma=Aa.exports,$a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"已选兑换码",center:"",visible:e.codeShow,width:"70%","show-close":!1},on:{open:e.open}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis,select:e.tableSelect}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:""}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.confirm}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},Pa=[],Da={components:{},props:{alertCodeList:Array,codeShow:Boolean},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},watch:{alertCodeList:function(e){e.map(function(e){e.goodsCount=1}),this.list=e}},computed:{},methods:{open:function(){this.first()},selected:function(e){this.$http.get("/LaborRedeemCode/discriminateCode",{merchantCode:this.merchantCode,exchangeCode:e.exchangeCode,type:e.type}).then(function(e){"true"==e.data.status||alert("该兑换码已被使用或者暂无该兑换码"+e.message)})},tableSelect:function(e,t){var o=e.length&&-1!==e.indexOf(t);0==o?this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:t.exchangeCode,type:t.type}]).then(function(e){"10000"==e.code||alert(e.message)}):this.selected(t)},first:function(){var e=this,t=this;this.$nextTick(function(){e.list.map(function(o,a){t.$refs.multipleTable.toggleRowSelection(e.list[a],!0)})})},confirm:function(){this.$emit("confirmCode",this.chooseList)},close:function(){this.$emit("closeCode")},chooseDis:function(e){this.chooseList=e,this.$parent.getEditfindOrderInfo(this.chooseList,this.$parent.vipList)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Ga=Da,Va=(o("cd43"),Object(l["a"])(Ga,$a,Pa,!1,null,"3e1b44a8",null)),Ea=Va.exports,Fa={components:{timesCard:Na,emp:Ca,coupon:Ma,codes:Ea},data:function(){return{onceClick:!1,onceGoodsListAll:[],orderPrice:0,dataShouldPay:"",vipCount:"",thisBalance:0,totalMoney3:0,totalMoney2:0,disPrice:0,isHas:[],cardDed:0,array:[],dis:!1,arrId:[],codeShow:!1,alertCodeList:[],addCodes:!1,importCode:null,codeList:[],radio:"2",couponIsShow:!1,couponList:[],showCouponList:[],timersCardShow:!1,showtimeCardList:[],empList1:[],empList2:[],chooseEmpidx:null,empAlert:!1,payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:0,vipDis:"0",discount:0,discountMax:null,timeCardList:[],cardBalance:!1,showCard:!1,isMes:!1,vipList:[],code:"0",balance:0,coupon:"0",timeCard:"0",vipCards:[],vipNum:0,orderNum:"",list:[],laborAdditionalFeeList:[],onceCardDiscount:0,laborOrder:{plateNumber:"",customerName:"",customerPhone:"",updateTime:"",mileage:"",workorderCode:"",totalMoney:"0"}}},computed:{listed:function(){return this.list.concat(this.laborAdditionalFeeList)},shouldPay:function(){return Number(this.dataShouldPay-this.favMoney).toFixed(2)}},methods:{close:function(){var e=this;console.log("抵扣金额",this.showtimeCardList),this.onceClick=!0,this.$http.post("/LaborBlance/balance/order",{employeeId:localStorage.getItem("createId")||"",laborOrder:this.laborOrder,goodsList:this.list,laborAdditionalFeeList:this.laborAdditionalFeeList,vipNumber:this.vipNum,cardBalance:Number(this.balance),vipCards:this.vipList,onceGoodsList:this.showtimeCardList,coupons:this.showCouponList,deduction:this.vipCount,reduce:Number(this.thisBalance),shouldPay:Number(this.shouldPay),orderPrice:this.laborOrder.totalMoney,redeemCode:this.codeList,benefit:this.favMoney,redeemVerification:this.codeDis,notifyCardOwner:this.isMes}).then(function(t){"success"==t.code?(e.$router.push({path:"/financialClose",query:{workOrderCode:t.data.laborOrder.workorderCode,merchantCode:e.merchantCode}}),e.onceClick=!1):alert(t.message)})},getVipList:function(e){var t=this;this.dis=!0,setTimeout(function(){t.dis=!1},1500),this.$http.get("/LaborBlance/findOnceCards",{merchantCode:this.merchantCode,orderCode:this.orderCode,vipCardId:e}).then(function(e){console.log("%c请求查询次卡商品集合结果","color:red;font-size:20px",e),"10000"==e.code?t.timeCardList=e.data:alert(e.message)})},back:function(){this.$router.push({path:"/",query:{merchantCode:this.merchantCode}})},codeListIsShow:function(){this.codeShow=!0},confirmCode:function(e){this.codeList=e,this.codeShow=!1},closeCode:function(){this.codeShow=!1},couponIsAlert:function(){this.couponIsShow=!0},closeCoupon:function(){this.couponIsShow=!1},confirmCoupon:function(e){this.showCouponList=e,this.couponIsShow=!1},confirmTimers:function(e){this.timersCardShow=!1;var t=0;console.log("值",e),e.map(function(e){t+=Number(e.price)*Number(e.goodsCount)}),this.onceCardDiscount=t},closeTimers:function(){this.timersCardShow=!1},timersShow:function(){console.log(this.timeCardList,this.showtimeCardList),this.$bus.$emit("showList",this.timeCardList||[],this.showtimeCardList||[]),this.timersCardShow=!0},fav:function(e){e>this.dataShouldPay&&(this.$message.error("输入的优惠金额金额必须小于"+this.dataShouldPay),this.favMoney=0)},inputPrice:function(e){console.log("输入的抵扣金额",e,this.discountMax),e>this.discountMax?(this.$message.error("最高可用折扣金额为"+this.discountMax),this.discount=0):e<0?(this.$message.error("请正确输入折扣金额"+this.discountMax),this.discount=0):(console.log("输入抵扣",this.discount,this.onceCardDiscount),this.discount=e)},print:function(e){console.log(e),this.$router.push({name:"closeOrder",params:{data:this.laborOrder,vipNum:this.vipNum,list:this.list,resPrice:this.laborOrder.totalMoney-this.favMoney-this.codeDis-this.vipCount,type:e}})},addCode:function(){this.addCodes=!0},closeAddCode:function(){this.addCodes=!1},sendAddCode:function(){var e=this;this.$http.get("/LaborRedeemCode/discriminateCode",{merchantCode:this.merchantCode,exchangeCode:this.importCode,type:this.radio}).then(function(t){"true"==t.data.status?(e.codeShow=!0,e.codeShow=!1,t.data.exchangeCode=e.importCode,e.alertCodeList.push(t.data),e.codeList=e.alertCodeList,e.addCodes=!1,e.getEditfindOrderInfo(e.alertCodeList,e.vipList),e.importCode=""):alert("该兑换码已被使用或者暂无该兑换码"+t.message)})},un:function(){this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:"XP3L62FXVH32HT0X",type:1}]).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code||alert(e.message)})},mes:function(e){console.log(this.isMes,e)},changeBox:function(e,t){this.getEditfindOrderInfo(this.codeList,this.vipList)},ch:function(e,t){e&&console.log("选择的次卡",t)},cellClick:function(e){},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType}),console.log("选择的销售施工",this.list[this.chooseEmpidx])},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var a=[],s=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?a.push(e):s.push(e)}),o.empList1=o.deWeight(a),o.empList2=o.deWeight(s)):alert(e.message)})},getList:function(){var e=this;this.$http.get("/LaborBlance/findOrderInfo",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if(console.log("%c请求工单结算结果","color:red;font-size:20px",t),"10000"==t.code){t.data.laborOrder.totalMoney=t.data.orderPrice,e.laborOrder=t.data.laborOrder,t.data.goodsList.map(function(e){null==e.price&&(e.price=0),null==e.subtotalMoney&&(e.subtotalMoney=0)});var o=t.data.laborAdditionalFeeList||[];o.length>0&&(o.map(function(e){e.goodsName=e.name,e.goodsCount=1,e.subtotalMoney=e.price}),e.laborAdditionalFeeList=o),e.list=t.data.goodsList,e.vipNum=t.data.vipNumber,e.vipCards=t.data.vipCards,t.data.vipCards.map(function(t){t.isSelected&&e.vipList.push(t)});var a=[];e.vipList.map(function(e){a.push(e.customerMemberCardId)}),e.showtimeCardList=t.data.onceGoodsConsumeList,console.log("shanp ",e.showtimeCardList),e.arrId=a,e.timeCard=t.data.onceGoodsConsumeList.length,e.timeCardList=t.data.onceGoodsConsumeList,e.onceGoodsList=t.data.onceGoodsConsumeList,e.couponList=t.data.coupons,e.balance=t.data.cardBalance,e.discountMax=t.data.maxDisCount,null!=t.data.redeemCode?(e.code=t.data.redeemCode.length,e.codeList=t.data.redeemCode):e.code=0,e.vipCount=t.data.deduction,e.onceCardDiscount=t.data.onceCardDiscount,e.cardDed=t.data.onceCardDiscount,e.dataShouldPay=t.data.beforeAIShouldPay,e.thisBalance=t.data.specialDeduction,e.orderPrice=t.data.orderPrice,e.onceGoodsListAll=t.data.onceGoodsListAll}else alert(t.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniq:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],n=t[s];if(JSON.stringify(n)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t},getEditfindOrderInfo:function(e,t){var o=this;this.$http.post("LaborBlance/editFindOrderInfo",{laborOrder:this.laborOrder,goodsList:this.list,redeemCode:e,benefit:Number(this.favMoney),notifyCardOwner:this.isMes,vipCards:t,laborAdditionalFeeList:this.laborAdditionalFeeList}).then(function(e){o.vipCount=e.data.deduction,o.shouldPay=e.data.shouldPay,o.dataShouldPay=e.data.shouldPay,o.favMoney=0,o.redeemVerification=e.data.redeemVerification,o.codeDis=e.data.redeemVerification,o.balance=e.data.cardBalance,o.thisBalance=e.data.specialDeduction,o.showtimeCardList=e.data.onceGoodsConsumeList,o.onceGoodsListAll=e.data.onceGoodsListAll})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.getList()}},ja=Fa,Ra=(o("9d98"),Object(l["a"])(ja,ma,ha,!1,null,"5a38a7ee",null)),za=Ra.exports,Ba=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"billdetail"},[o("div",{staticStyle:{display:"flex","align-items":"baseline","padding-left":"50px"}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"font-big"},[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.payName))]),e._v("  "),o("span",[e._v(e._s(e.laborOrder.payTel))])]),o("el-col",{attrs:{span:3}},[o("div",[e._v(e._s(e.laborOrder.payTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"40%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.thisMileage,callback:function(t){e.$set(e.laborOrder,"thisMileage",t)},expression:"laborOrder.thisMileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-row",{staticStyle:{"align-items":"center",display:"flex"}},[o("el-col",{attrs:{span:14}},[o("div",{staticClass:"font-big"},[e._v("已选项目"+e._s(e.listed.length)+"个")])]),o("el-col",{staticStyle:{"align-items":"center"},attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"14px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("el-table",{staticStyle:{width:"70%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.listed},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"132px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.employeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.employeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])}),o("el-table-column",{attrs:{prpo:"num",align:"center",label:"提成业绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"20px"}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("支付信息")]),o("table",{staticClass:"table"},[o("tr",[o("td",[e._v("应收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.receivablePayMoney||0))]),o("td",[e._v("会员卡扣除")]),o("td",[e._v(e._s(e.laborOrder.vipOffsetMoney||0)+"元")]),o("td",[e._v("优惠券折扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.couponMoney||0))]),o("td",[e._v("人工优惠")]),o("td",[e._v("¥"+e._s(e.laborOrder.preferentialMoney||0))]),o("td",[e._v("现金")]),o("td",[e._v("¥"+e._s(e.laborOrder.cashPayMoney||0))])]),o("tr",[o("td",[e._v("微信转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatTransferPayMoney||0))]),o("td",[e._v("支付宝转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.aliTransferPayMoney||0))]),o("td",[e._v("刷银行卡")]),o("td",[e._v("¥"+e._s(e.laborOrder.swipecardPayMoney||0))]),o("td",[e._v("微信支付/支付宝支付")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatAliPay||0))])]),o("tr",[o("td",[e._v("兑换码抵扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.redeemCodeMoney||0))]),o("td",[e._v("实收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.realityMoney||0))]),o("td",[e._v("完成时间")]),o("td",[e._v(e._s(e.laborOrder.payTime))]),o("td",[e._v("操作人")]),o("td",[e._v(e._s(e.laborOrder.updateName))]),o("td",[e._v("支付方式")]),o("td",[e._v(e._s(1==e.laborOrder.payType?"现金":2==e.laborOrder.payType?"刷卡":3==e.laborOrder.payType?"微信":4==e.laborOrder.payType?"支付宝":"组合支付"))])])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"15px","align-items":"center"}},[o("div",[e._v("本次备注：")]),o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印显示,最多120字)"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer"},[o("div",[e._v("共"+e._s(e.server.length)+"项服务【含赠送"+e._s(e.fuWuGiftTimes)+"项】,")]),o("div",[e._v(e._s(e.product.length)+"件商品【含赠送"+e._s(e.goodsGiftTimes)+"件】")]),o("div",[e._v("总价: "),o("span",{staticStyle:{"font-size":"24px",color:"#ff0000","font-weight":"bold"}},[e._v("¥"+e._s(e.total))])]),o("el-button",{staticStyle:{width:"100px",height:"30px","margin-left":"30px"},attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保 存")])],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}})],1)},Ua=[],Wa={components:{emp:io},data:function(){var e;return{fuWuGiftTimes:0,goodsGiftTimes:0,server:[],product:[],chooseEmpidx:null,empAlert:!1,empList1:[],empList2:[],total:0,give2:"0",give:"0",remark:"",laborOrder:(e={redeemCodeMoney:"",vipOffsetMoney:"",preferentialMoney:"",cashPayMoney:"",wechatTransferPayMoney:"",aliTransferPayMoney:"",swipecardPayMoney:"",wechatPayMoney:"",aliPayMoney:""},Object(mt["a"])(e,"redeemCodeMoney",""),Object(mt["a"])(e,"createTime",""),Object(mt["a"])(e,"creatorId",""),Object(mt["a"])(e,"realityMoney",""),Object(mt["a"])(e,"name","前台"),Object(mt["a"])(e,"payType","已完成"),Object(mt["a"])(e,"dis","0"),e),list:[],laborAdditionalFeeList:[],kil:"12314",date:"2019-10-10 14:27:36",phone:"13555555555",name:"王二",carNum:"皖B09090"}},computed:{listed:function(){return this.list.concat(this.laborAdditionalFeeList)}},methods:{getList:function(){var e=this;this.$http.get("/LaborBlance/findInfoByOrderCode",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if(console.log("%c请求结算查看结果","color:red;font-size:20px",t),"10000"==t.code){t.data.settleaccounts.receivablePayMoney=Number(t.data.settleaccounts.receivablePayMoney).toFixed(2),e.fuWuGiftTimes=t.data.fuWuGiftTimes,e.goodsGiftTimes=t.data.goodsGiftTimes,e.laborOrder=t.data.settleaccounts;var o=t.data.laborAdditionalFeeList||[];o.length>0&&(o.map(function(e){e.goodsName=e.name,e.goodsCount=1,e.subtotalMoney=e.price}),e.laborAdditionalFeeList=o),e.list=t.data.goodsList,e.remark=t.data.settleaccounts.additionalRemarks,e.list.map(function(t){1==t.type?e.server.push(t):2==t.type&&e.product.push(t),e.total+=Number(t.subtotalMoney)})}else alert(t.message)})},save:function(){var e=this;this.$http.post("/LaborBlance/save",{workorderCode:this.orderCode,merchantCode:this.merchantCode,goodsList:this.list,mileage:this.laborOrder.thisMileage,additionalRemarks:this.remark}).then(function(t){console.log("%c请求保存结果","color:red;font-size:20px",t),"10000"==t.code?e.$router.push({path:"/",query:{merchantCode:e.merchantCode}}):alert(t.message)})},cellClick:function(e){console.log(e)},look:function(){var e="";e=1==this.workorderType?"/comprehensiveOrder":"/quickOrder",console.log("工单编号",this.orderCode,this.workorderType),this.$router.push({path:e,query:Object(mt["a"])({merchantCode:this.merchantCode,workOrderCode:this.orderCode,orderType:this.workorderType,type:"look"},"orderType",this.workorderType)}),location.reload()},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType})},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var a=[],s=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?a.push(e):s.push(e)}),o.empList1=o.deWeight(a),o.empList2=o.deWeight(s)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.workorderType=this.$route.query.orderType,this.getList()}},Za=Wa,Ya=(o("6411"),Object(l["a"])(Za,Ba,Ua,!1,null,"397d32a6",null)),qa=Ya.exports,Qa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"financialClose"},[o("div",{staticClass:"body"},[o("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"50px"}},[o("el-col",{attrs:{span:2}},[o("div",{staticClass:"font-big"},[e._v("财务结算")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center"},attrs:{span:8}},[o("div",[e._v("工单编号:")]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("div",{staticStyle:{"padding-top":"5px"}},[e._v(e._s(e.form.laborOrder.workorderCode))])]),o("el-col",{attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"14px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("div",[o("table",{staticClass:"table"},[o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},e._l(e.form.vipCards,function(t,a){return o("div",{key:a,staticClass:"d-flex",staticStyle:{padding:"25px 0px"}},[o("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(t))])])}),0)])]),o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",[e._v(e._s(e.notifyCardOwner?"通知持卡人":"不通知他人"))])])]),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.onceGoodsList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.coupons,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("卡余额")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.form.cardBalance)+"元")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("已抵扣:¥"+e._s(e.form.specialDeduction||0))])])])]),o("tr",{staticStyle:{height:"60px"}},[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"}},[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},e._l(e.form.redeemCode,function(t,a){return o("div",{key:a},[e._v(e._s(t))])}),0)])])]),o("div",{staticStyle:{"margin-right":"56px","margin-top":"50px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.deduction))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.redeemVerification))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.benefit))])])])]),o("div",{staticStyle:{background:"#ccc",height:"70px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("订单总金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.form.orderPrice))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",{staticClass:"red"},[e._v("¥"+e._s(e.form.benefit))]),o("div",{staticStyle:{"margin-left":"60px","margin-right":"10px"}},[e._v("应收总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(e.form.shouldPay))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("div",{staticStyle:{"margin-right":"15px"}},[e._v("支付方式：")]),o("div",[o("el-radio-group",{on:{change:e.radioChanges},model:{value:e.checkedRadio,callback:function(t){e.checkedRadio=t},expression:"checkedRadio"}},[o("el-radio",{attrs:{label:"1"}},[e._v("现金")]),o("el-radio",{attrs:{label:"3"}},[e._v("微信支付/支付宝支付")]),o("el-radio",{attrs:{label:"2"}},[e._v("刷卡")]),o("el-radio",{attrs:{label:"6"}},[e._v("支付宝转账")]),o("el-radio",{attrs:{label:"5"}},[e._v("微信转账")]),o("el-popover",{attrs:{placement:"bottom",width:"800",trigger:"manual"},model:{value:e.vis,callback:function(t){e.vis=t},expression:"vis"}},[o("div",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("现金：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.cash,callback:function(t){e.cash=t},expression:"cash"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:9}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("微信/支付宝支付：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.wx,callback:function(t){e.wx=t},expression:"wx"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("刷卡：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("微信转账：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.wxpay,callback:function(t){e.wxpay=t},expression:"wxpay"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("支付宝转账：")]),o("el-input",{staticStyle:{width:"30%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.alipay,callback:function(t){e.alipay=t},expression:"alipay"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:5}},[o("div",{staticStyle:{"margin-top":"10px"}},[e._v("将微信二维码发送至")])]),o("el-col",{attrs:{span:12}},[o("el-radio-group",{staticStyle:{"margin-top":"10px"},on:{change:e.mesChange},model:{value:e.mesCode,callback:function(t){e.mesCode=t},expression:"mesCode"}},[o("el-radio",{attrs:{label:"1"}},[e._v("电脑")]),o("el-radio",{attrs:{label:"2"}},[e._v("一体机")])],1)],1)],1),o("el-radio",{attrs:{slot:"reference",label:"7"},slot:"reference"},[e._v("两种以上支付方式")])],1)],1)],1)]),o("div",{class:e.vis?"mt":"normal",staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px"}},[o("el-button",{staticStyle:{"margin-right":"35px"},attrs:{type:"text"},on:{click:e.back}},[e._v("返回")]),o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"small",type:"primary"},on:{click:e.close}},[e._v("财务结算")])],1)]),o("hint",{attrs:{notice:e.notice,onceClick:e.onceClick},on:{rec:e.rec,unrec:e.unrec}}),o("codeimg",{attrs:{codeIsShow:e.codeIsShow,codeImg:e.codeImg,price:e.codePrice},on:{closeCode:e.closeCode}})],1)},Ha=[],Ja=(o("4917"),o("34ef"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"code"},[o("el-dialog",{attrs:{center:"","close-on-click-modal":!1,"before-close":e.close,title:"提示",center:"",visible:e.codeIsShow,width:"30%"},on:{"update:visible":function(t){e.codeIsShow=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("h1",[e._v("¥"+e._s(e.price))]),o("div",[o("img",{staticStyle:{width:"200px",hieght:"200px"},attrs:{src:e.codeImg,alt:""}})])])])],1)}),Xa=[],Ka={components:{},props:{codeIsShow:Boolean,codeImg:String,price:Number},data:function(){return{}},computed:{},watch:{},methods:{close:function(){this.$emit("closeCode")}},mounted:function(){},created:function(){}},es=Ka,ts=(o("f903"),Object(l["a"])(es,Ja,Xa,!1,null,"66b5d789",null)),os=ts.exports,as=(o("27ae").Base64,{components:{hint:D,codeimg:os},data:function(){return{seq:"",gp:"",onceClick:!1,codePrice:0,payType:null,codeIsShow:!1,codeImg:null,base64null:null,base64:null,notice:!1,buyoncredit:0,mesCode:"1",alipay:"",wxpay:"",bank:"",ali:"",wx:"",cash:"",vis:!1,radios:null,checkedRadio:"",payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:"0",vipDis:"0",discount:"1",couponList:[],timeCardList:[],cardBalance:!1,showCard:!1,radio:!1,isMes:null,checkList:[],code:"0",balance:178,coupon:"1",timeCard:"1",vipNum:3,orderNum:"120314891023",notifyCardOwner:!1,form:{laborOrder:{workorderCode:""}}}},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,console.log(this.orderCode),this.getInfo()},methods:{getInfo:function(){var e=this;this.$http.get("/LaborBlance/getBalanceFinance",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if("10000"==t.code){var o=e.form,a=t.data;o.laborOrder=a.laborOrder,o.orderNo=a.orderNo,o.vipCards=a.vipCards,e.notifyCardOwner=a.notifyCardOwner,o.onceGoodsList=a.onceGoodsList,o.coupons=a.coupons,o.cardBalance=a.cardBalance,o.specialDeduction=a.specialDeduction,o.redeemCode=a.redeemCode||[],o.deduction=a.deduction,o.redeemVerification=a.redeemVerification||0,o.benefit=a.benefit,o.orderPrice=a.orderPrice,o.shouldPay=a.shouldPay,o.settleaccountsId=a.settleaccountsId,o.goodsList=a.goodsList}else alert(t.message)})},getClose:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(t,o){var a,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o="0"!=o,s=this.form,e.next=4,this.$http.post("/LaborBlance/balance/finance",(a={employeeId:localStorage.getItem("createId")||"",laborOrder:s.laborOrder,vipNumber:s.vipNumber,cardBalance:s.cardBalance,vipCards:s.vipCards,onceGoodsList:s.onceGoodsList,coupons:s.coupons},Object(mt["a"])(a,"vipNumber",s.vipNumber),Object(mt["a"])(a,"deduction",s.deduction),Object(mt["a"])(a,"shouldPay",s.shouldPay),Object(mt["a"])(a,"orderPrice",s.orderPrice),Object(mt["a"])(a,"redeemCode",s.redeemCode),Object(mt["a"])(a,"benefit",s.benefit),Object(mt["a"])(a,"qrcodeTo",this.mesCode),Object(mt["a"])(a,"payType",t),Object(mt["a"])(a,"wechatAliPay",Number(this.wx)),Object(mt["a"])(a,"cashPayMoney",Number(this.cash)),Object(mt["a"])(a,"swipecardPayMoney",Number(this.bank)),Object(mt["a"])(a,"wechatTransferPayMoney",Number(this.wxpay)),Object(mt["a"])(a,"aliTransferPayMoney",Number(this.alipay)),Object(mt["a"])(a,"vipOffsetMoney",s.deduction),Object(mt["a"])(a,"settleaccountsId",s.settleaccountsId),Object(mt["a"])(a,"buyoncredit",!1),Object(mt["a"])(a,"orderNo",s.orderNo),a)).then(function(e){if("10000"==e.code){1==i.gp?i.$router.push({path:"/",query:{merchantCode:i.merchantCode,orderNo:i.form.orderNo}}):(i.notice=!1,i.getCode()),i.onceClick=!1}else alert("订单",e.message)});case 4:case"end":return e.stop()}},e,this)}));function t(t,o){return e.apply(this,arguments)}return t}(),getCode:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post2("https://autodt-gateway.yunchefu.cn/message/wechat/miniAppQrCode",{appId:"wx7451a1aa96196cd1",path:"/pagesOrder/detail/index?orderNo="+this.form.orderNo+"&merchantCode="+this.merchantCode},{headers:{},responseType:"arraybuffer"}).then(function(e){t.codeIsShow=!0,t.codeImg="data:image/png;base64,"+btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),2==t.mesCode&&t.send(t.codeImg)});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),base64ImgtoFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",o=e.split(","),a=o[0].match(/:(.*?);/)[1],s=a.split("/")[1],i=atob(o[1]),n=i.length,r=new Uint8Array(n);while(n--)r[n]=i.charCodeAt(n);return new File([r],"".concat(t,".").concat(s),{type:a})},send:function(e){console.log("照片",e),this.$http.post("/merchantImg/sendPayQrCode",{merchantCode:this.merchantCode,name:this.codePrice,base64Photo:e}).then(function(e){console.log("%c请求发送到大屏幕","color:#70ff57;font-size:20px;font-weight:bold",e),"10000"==e.code||alert(e.message)})},close:function(){var e=Object(re["a"])(regeneratorRuntime.mark(function e(){var t,o,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.form,!1,t=!1,!1,o=this,this.gp=1,"3"!=this.checkedRadio){e.next=24;break}return this.gp=0,this.payType=this.checkedRadio,e.next=11,this.getClose(this.payType,"1");case 11:this.getCode(),this.codePrice=this.form.shouldPay,!1,t=!1,!0,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.buyoncredit="1",e.next=25;break;case 24:"7"==this.checkedRadio?(a=Number(this.cash)+Number(this.wx)+Number(this.bank)+Number(this.wxpay)+Number(this.alipay),this.codePrice=this.wx,s=[],""!=this.cash&&"0"!=this.cash&&s.push("1"),""!=this.wx&&"0"!=this.wx&&s.push("3"),""!=this.bank&&"0"!=this.bank&&s.push("2"),""!=this.wxpay&&"0"!=this.wxpay&&s.push("6"),""!=this.alipay&&"0"!=this.alipay&&s.push("5"),Number(a).toFixed(2)==this.form.shouldPay?(o.gp=0,i=s.indexOf("3")>-1,i&&s.length>=2?(o.payType=s.join(","),t=!0):0==i&&s.length>=2?(this.gp=1,t=!0,this.payType=s.join(",")):s.length<2&&(t=!1,!1,this.$alert("请选择至少两种支付方式","提示",{confirmButtonText:"确定",callback:function(e){}}))):(console.log("this.form.shouldPay",this.form.shouldPay,Number(a).toFixed(2)),this.$alert("请正确输入金额","提示",{confirmButtonText:"确定",callback:function(e){}})),!0):"1"==this.checkedRadio||"2"==this.checkedRadio||"5"==this.checkedRadio||"6"==this.checkedRadio?(!1,t=!0,!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.buyoncredit="0",this.payType=this.checkedRadio):(this.$alert("请选择支付方式","错误提示",{confirmButtonText:"确定",callback:function(e){}}),!1,!1,t=!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.payType=this.checkedRadio);case 25:this.notice=t;case 26:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),rec:function(e){this.onceClick=!0,this.getClose(this.payType,"1"),this.notice=!1,this.buyoncredit=0},unrec:function(){this.notice=!1,this.buyoncredit=1},closeCode:function(){"3"==this.checkedRadio||0==this.gp?this.$router.push({path:"/",query:{merchantCode:this.merchantCode}}):this.codeIsShow=!1},mesChange:function(e){},radioChanges:function(e){console.log("选择的",e),"7"==e?this.vis=!this.vis:(this.vis=!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0)},print:function(e){var t="",o=Number(this.cash)+Number(this.wx)+Number(this.bank)+Number(this.wxpay)+Number(this.alipay);if("7"==this.checkedRadio){var a=[];if(""!=this.cash&&a.push("1"),""!=this.wx&&a.push("3"),""!=this.bank&&a.push("2"),""!=this.wxpay&&a.push("6"),""!=this.alipay&&a.push("5"),Number(o).toFixed(2)==this.form.shouldPay){var s=a.indexOf("3")>-1;s&&a.length>=2?t=a.join(","):0==s&&a.length>=2?(t=a.join(","),b3=!0):a.length<2&&(b2=!1,b3=!1,this.$alert("请选择至少两种支付方式","提示",{confirmButtonText:"确定",callback:function(e){}}))}}else t=this.checkedRadio;console.log(e,t,this.checkedRadio),this.$router.push({name:"closeOrders",params:{data:this.form.laborOrder,vipNum:this.form.vipNumber,list:this.form.goodsList,resPrice:this.form.shouldPay,type:e,payType:t,wechatAliPay:this.wx,cashPayMoney:this.cash,swipecardPayMoney:this.bank,wechatTransferPayMoney:this.wxpay,aliTransferPayMoney:this.alipay}})},addCode:function(){},mes:function(e){console.log(this.isMes,e)},radioChange:function(){console.log(this.radio)},changeBox:function(e){this.cardBalance=!0},changeBox2:function(e){console.log("val2",e),this.showCard=1==e},look:function(){var e;console.log("订单详情",this.form.laborOrder.workorderCode),e=1==this.form.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:e,query:{merchantCode:this.merchantCode,workOrderCode:this.form.laborOrder.workorderCode,orderType:this.form.laborOrder.workorderType,type:"look"}}),location.reload()},back:function(){this.$router.go(-1)}},mounted:function(){}}),ss=as,is=(o("7abc"),Object(l["a"])(ss,Qa,Ha,!1,null,"1ac10978",null)),ns=is.exports,rs=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.laborOrder.merchantName)+e._s(e.type))]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.all1)+Number(e.all2))+"元")]),o("table",{staticClass:"t2",staticStyle:{width:"40%"}},e._l(e.t4,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(Number(e.resPrice).toFixed(2)||0))]),o("td",[e._v(e._s(t.name2))]),o("td",[e._v(e._s(Number(e.resPrice).toFixed(2)||0))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.laborOrder.remarks))])]),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("温馨提示："),o("span",[e._v(e._s(e.remarks))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.laborOrder.merchantAddress))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.laborOrder.merchantPhone))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}],staticStyle:{width:"150px","margin-top":"100px","margin-bottom":"100px"},attrs:{type:"primary"}},[e._v("打印")])],1)},ls=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],cs={components:{},data:function(){return{type:"结算单",remarks:"",resPrice:0,company:"XXXXX",t4:[{name:"应付金额",price:"2450.00",name2:"剩余应付金额",price2:"2450.00"}],tel:"",addr:"",remark:"",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data,this.$http.get("/system/getPrintByMerchantCode",{merchantCode:this.laborOrder.merchantCode,orderType:"结算单"==this.$route.params.type?1:3}).then(function(t){e.remarks=t.data.remark});var t=this.$route.params.list;console.log("%c额就是那","color:#70ff57;font-size:20px;font-weight:bold",t,this.$route.params),t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum,this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var o=new Date,a=o.toLocaleString("chinese",{hour12:!1});this.printTime=a.replace(/\//g,"-"),console.log(this.laborOrder)}},ds=cs,us=(o("f8ff"),Object(l["a"])(ds,rs,ls,!1,null,"30cee764",null)),ps=us.exports,ms=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.laborOrder.merchantName)+e._s(e.type))]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.resPrice).toFixed(2))+"元")]),o("table",{staticClass:"t8",staticStyle:{width:"100%"}},e._l(e.t4,function(t,a){return o("tr",{key:a,staticClass:"tp",staticStyle:{float:"left",width:"auto",height:"40px"}},[o("td",{staticClass:"tm"},[e._v(e._s(t.name))]),o("td",{staticClass:"tm"},[e._v(e._s(Number(t.price).toFixed(2)))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.laborOrder.remarks))])]),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("温馨提示："),o("span",[e._v(e._s(e.remarks))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.laborOrder.merchantAddress))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.laborOrder.merchantPhone))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}],staticStyle:{width:"150px","margin-top":"100px","margin-bottom":"100px"},attrs:{type:"primary"}},[e._v("打印")])],1)},hs=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],fs={components:{},data:function(){return{remarks:"",type:"结算单",resPrice:0,company:"XXXXX",t4:[],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data,this.$http.get("/system/getPrintByMerchantCode",{merchantCode:this.laborOrder.merchantCode,orderType:"结算单"==this.$route.params.type?1:3}).then(function(t){e.remarks=t.data.remark});var t=this.$route.params.list;t.length>0&&t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum;var o=this.$route.params.payType.split(","),a=[];o.map(function(e){a.push({num:e})}),console.log("选择的type",a,o),""!=o?1==a.length?1==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"现金",price:this.$route.params.resPrice}]:3==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"微信/支付宝支付",price:this.$route.params.resPrice}]:2==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"银行卡支付",price:this.$route.params.resPrice}]:5==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"微信转账",price:this.$route.params.resPrice}]:6==o&&(this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"支付宝转账",price:this.$route.params.resPrice}]):(a.map(function(t){1==t.num?(t.name="现金",t.price=e.$route.params.cashPayMoney):3==t.num?(t.name="微信/支付宝支付",t.price=e.$route.params.wechatAliPay):2==t.num?(t.name="银行卡支付",t.price=e.$route.params.swipecardPayMoney):5==t.num?(t.name="微信转账",t.price=e.$route.params.wechatTransferPayMoney):6==t.num&&(t.name="支付宝转账",t.price=e.$route.params.cashPayMoney)}),a.unshift({name:"应付金额",price:this.$route.params.resPrice}),this.t4=a):this.t4=[{name:"应付金额",price:this.$route.params.resPrice}],this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var s=new Date,i=s.toLocaleString("chinese",{hour12:!1});this.printTime=i.replace(/\//g,"-")}},vs=fs,bs=(o("e2f8"),Object(l["a"])(vs,ms,hs,!1,null,"e0d29bae",null)),gs=bs.exports,ys=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.company)+"服务中心报价单")]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.orderNum))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.date))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.t1.userName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.t1.Phone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.t1.carNum))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.t1.vip)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.t1.brand))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.t1.vin))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.t1.approachTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.t1.kil))])])]),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]),o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.num))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.dis))]),o("td",[e._v(e._s(t.money))]),o("td",[e._v(e._s(t.remark))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all)+"元")])])])],2),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(e.prePrice)+"元")]),o("div",{staticClass:"box d-flex",staticStyle:{"flex-wrap":"wrap"}},e._l(e.t4,function(t,a){return o("div",{key:a,staticClass:"d-flex"},[o("div",{staticClass:"b1"},[e._v(e._s(t.name))]),o("div",{staticClass:"b1"},[e._v(e._s(t.price))])])}),0),o("div",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("*备注："),o("span",[e._v(e._s(e.remark))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.addr))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.tel))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}]},[e._v("打印")])])},Cs=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],ws={components:{},data:function(){return{company:"XXXXX",t4:[{name:"应付金额",price:"2450.00"},{name:"微信支付",price:"2450.00"}],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:"2100.00",t3:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],all:"2100.00",t2:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],t1:{userName:"",Phone:"",carNum:"",vip:"0",brand:"",vin:"",approachTime:"2019-10-08 10:00:00",kil:""},printTime:"2019-10-10 10:00:11",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){}},ks=ws,xs=(o("dd79"),Object(l["a"])(ks,ys,Cs,!1,null,"22a47fd7",null)),Ss=xs.exports,_s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[e._m(0),e._m(1),o("el-tabs",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"效果统计",name:"first"}},[o("resStatistical")],1),o("el-tab-pane",{attrs:{label:"发放优惠券",name:"second"}},[e._v("配置管理")]),o("el-tab-pane",{attrs:{label:"设置活动券",name:"third"}},[e._v("角色管理")]),o("el-tab-pane",{attrs:{label:"一体机优惠券管理",name:"fourth"}},[e._v("定时任务补偿")])],1)],1)},Ns=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("营销管理/优惠券设置")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%","margin-bottom":"40px"}},[o("hr")])}],Ls=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[o("div",{staticClass:"header"},[o("el-row",{staticStyle:{"text-align":"center"}},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("领取次数")]),o("div",[e._v(e._s(e.getNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("使用数")]),o("div",[e._v(e._s(e.useNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("拉新效果")]),o("div",[e._v(e._s(e.pullNew)+"人")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("收益效果")]),o("div",[e._v(e._s(e.getMoney)+"元")])])])],1)],1),o("div",{staticClass:"body"}),o("div",{staticClass:"footer"})])},Os=[],Is={components:{},data:function(){return{getMoney:"0",pullNew:"5",useNum:"0",getNum:"7"}},computed:{},methods:{},mounted:function(){},created:function(){}},Ts=Is,As=(o("8eb7"),Object(l["a"])(Ts,Ls,Os,!1,null,"2a78d224",null)),Ms=As.exports,$s={components:{resStatistical:Ms},data:function(){return{activeName:"first"}},computed:{},methods:{handleClick:function(e,t){console.log(e,t)}},mounted:function(){},created:function(){}},Ps=$s,Ds=Object(l["a"])(Ps,_s,Ns,!1,null,"2115c1c4",null),Gs=Ds.exports;a["default"].use(x["a"]);var Vs=new x["a"]({routes:[{path:"/noVip",name:"noVip",component:D},{path:"/",name:"orderList",component:Oe},{path:"/quickOrder",name:"quickOrder",component:dt,meta:{keepAlive:!0},children:[]},{path:"/quickOrderBill",name:"quickOrderBill",component:xt},{path:"/comprehensiveOrder",name:"comprehensiveOrder",component:pa},{path:"/close",name:"close",component:za,meta:{keepAlive:!0}},{path:"/billdetail",name:"billdetail",component:qa},{path:"/financialClose",name:"financialClose",component:ns},{path:"/A4",name:"A4",component:I},{path:"/closeOrder",name:"closeOrder",component:ps},{path:"/closeOrders",name:"closeOrders",component:gs},{path:"/offer",name:"offer",component:Ss},{path:"/index",name:"index",component:Gs},{path:"/resStatistical",name:"resStatistical",component:Ms}],mode:"hash",base:"/orderList/"}),Es=o("2f62");a["default"].use(Es["a"]);var Fs={pjtnews:0,count:1,userInfo:{},token:null,carList:[]},js={list:function(e,t){e.carList=t},add:function(e){e.count+=1},reduce:function(e){e.count-=1},increment:function(e){e.userInfo={name:"王珊",age:"21"}},setToken:function(e,t){e.token=t}},Rs={increment:function(e){e.commit("increment")},setToken:function(e){e.commit("setToken")}},zs=new Es["a"].Store({state:Fs,mutations:js,actions:Rs}),Bs=o("df45"),Us=o.n(Bs),Ws=o("5c96"),Zs=o.n(Ws);o("0fae");a["default"].prototype.$api=w,a["default"].prototype.$untils=y,a["default"].use(k["a"]),a["default"].prototype.$http=g,a["default"].config.productionTip=!1,a["default"].use(Us.a),a["default"].use(Zs.a),a["default"].prototype.bus=new a["default"],a["default"].prototype.carLists=new a["default"],a["default"].prototype.$imageUrl="https://qw-admin.yunchefu.cn/oss/image/toOss",new a["default"]({router:Vs,store:zs,render:function(e){return e(d)}}).$mount("#app")},5737:function(e,t,o){},"579d":function(e,t,o){},"58da":function(e,t,o){},6184:function(e,t,o){"use strict";var a=o("9626"),s=o.n(a);s.a},6194:function(e,t,o){},"61b2":function(e,t,o){},"62a4":function(e,t,o){},6411:function(e,t,o){"use strict";var a=o("e9c6"),s=o.n(a);s.a},"64a9":function(e,t,o){},"64cc":function(e,t,o){},6559:function(e,t,o){},"674e":function(e,t,o){"use strict";var a=o("ceac"),s=o.n(a);s.a},"6c08":function(e,t,o){},"6ea8":function(e,t,o){},"75a7":function(e,t,o){},"75af":function(e,t,o){"use strict";var a=o("e12c"),s=o.n(a);s.a},"7a10":function(e,t,o){},"7a95":function(e,t,o){},"7abc":function(e,t,o){"use strict";var a=o("6ea8"),s=o.n(a);s.a},"7b76":function(e,t,o){},"7d2c":function(e,t,o){},"846c":function(e,t,o){},8793:function(e,t,o){},"8a48":function(e,t,o){},"8b5a":function(e,t,o){},"8d08":function(e,t,o){},"8dbb":function(e,t,o){"use strict";var a=o("bbf9"),s=o.n(a);s.a},"8eb7":function(e,t,o){"use strict";var a=o("5737"),s=o.n(a);s.a},"901d":function(e,t,o){"use strict";var a=o("579d"),s=o.n(a);s.a},"91c5":function(e,t,o){"use strict";var a=o("dbca"),s=o.n(a);s.a},"95c3":function(e,t,o){},9626:function(e,t,o){},9684:function(e,t,o){"use strict";var a=o("112c"),s=o.n(a);s.a},"9c02":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABUCAYAAACr1ujmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWY4NzM3Ni1jMGU3LTA3NDctOTU2YS1jN2Y4NjNlMDY3YzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MENBOTc0Qzg1NkVGMTFFQUJEOEJGNjFGMTAyQjk1NzciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MENBOTc0Qzc1NkVGMTFFQUJEOEJGNjFGMTAyQjk1NzciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2E3YzQ0MWEtNWI1Yi04MTQyLWIyYWUtZmMxZmMwYjNiYzlkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGZiMGZlNTEtOTFkYy04OTQ1LWFjYWItYjM5NmQxMzA4NmQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Fkvq+AAABWNJREFUeNrsnc9vG0UUx9+ud+3178SNkzRqoSVWgVahkSoVCYGQeqpUJC4VN4TEhTsSJ66IG1eO3PgLgAtSI0qhokIrKFULEulPfojGsR07sR3bsc28wevY6029dTYS2f1+pKdZj2dnnP3uvJmdt7tRTNOkHoaw94W9IywnTCXgJyrCvhb2kbCbnKH1vogLW4mmZ89HU1kK6REcKp/R7bRTja3S5c31R2+Ij28J+8Lq3Z/E0nPnE0eOQXifoqghMlIzlJ7PsYf/XNgci58W9m48s4AjFADCsRTFpuaTrDmLv6QbCZ0UBUcmIGiRGCfnZM9nlwACNAT819ENzY9/XK1Wo2qtPpIfj0UpFpNnPT189Ac9+8xxuZ1fL4ytMztzxH8ewI/is/Br+fxI/mw2K4Vm0e/ef9AXf7BstVqjYmmDjh9bgPiHERbq1u07Q3mFQonOvPgCrVy90xfdgvOt3n+/+lAKzyeKn4X3rfgWS2dO97fNn24+sez1Gz9S7rkTFI/HhrzB6r0H9OalixD/MLF48sSQO7e7cTvJRFx6AObnX27R8ktLcvvxWt6/s34//lHlckWO6XYS8bir/XnMDwK+XL9vtlo0N5ulC6+/Jj9zykPAVrWK67wguH0eq9ll80Rv5eo1ajZb0vWfWz7rWD4zPSXT31fvyROHLwUXjs7389HzDxFH52Zlb08mEzLlOQCTTqccy5/KLdLtX3+TJ4w19l/55hrpuo6ef9hgF88TPu7tnLbEUDA9NSV79OB8gBeEvv3+BzkfeP5Uri88Xw6ysSf47voNevWVl313jBTTNC+FY+kv0/OLGAQDQrNWpvI/d7/CDRsBBuJDfADxAcQHwcDVpV5je5u2hU2CHg73Y+h7USmXqdvtQg0PiYtLV23MGoUr8TtCmJ2dnYl+RCg0/i4hrhvie0vHxfGE28eYDyA+gPgAs/0+hmFIOyimMxko4TGKi+cwNK8qOugfCuD2AcQHEB9AfADxAcQHEB94c53fbDap0WhM1ICuaWREo08ss7W5SYjpeUtUHHNN0/YvfrvdpuaE4isuTy6EdL0lEhn/biW4fYz5AOIDiA8w2x+aPEz6wKLqImKXSqehhMe4uXfSlfiqqko7sDNQ06AW3D6A+ADiA4gPID6A+ADiAw8usd0U4pcZtZrNiRoIiWv4cREmfikSIarnKRHDGLvQ40p8foq2Xq9P9iOE8OPE3xZ1I6Trca/W9bHiw+1jzAcQH0B8gNl+n3A4TKEJo3qqi9BiIpnEbN9rYV1ESl2Jz7NGN/HhSeGTC8DtA4gPIP4BUSoWqdvpyMWrYqFAlUpF5lsLWfwQiVx1FPD3bLwIxe8iLG9sDJXlz5xvPdvQEfVyeYYfdOHtWu8/fHC7vFLKZa16+B2E9rbkvqJO/s7eFudzG1wXM+nzFK7HfL/BB8+aXrKo/Flu91L+bL0tZHDlca+yVhmndHCfwXaH8qw6n6KtjsM+6PkusL8GxrrJVBlInV4Vo9jK9MvuVjxSnhz2cdMWDeQPpfa69vFKG4z5GPMBxAcQH0B8APEBxAcQH0B8APEBxAcQH0B8APH/v9jDoJ09QrEj+9EeYdvdikfKk8M+btqigfyh1F7XPkK6HM8vdTs7wTrjVXUo3Gq9ckbppfJ7K88WhnUs6xR6pd1wrTpYduA37Kct1WGfpzz564ppmgmxsT5zcjmiKBgFgkC18BfVyo8/YLW3hH1aLf6NoxIAGtUNFr4kNj+zbuP6sF5eOyv8wQUjmaGQHu27GuCLSQ512i0p/FbhT76h8LKwoiU+3yF4sV7JvyfsbbF9WlgCR8038KSOXfsVYR8LW+XMfwUYAFLyP/MLJrlOAAAAAElFTkSuQmCC"},"9d98":function(e,t,o){"use strict";var a=o("e63a"),s=o.n(a);s.a},"9f97":function(e,t,o){},a6d0:function(e,t,o){"use strict";var a=o("58da"),s=o.n(a);s.a},a902:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABVCAYAAABgijtDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWY4NzM3Ni1jMGU3LTA3NDctOTU2YS1jN2Y4NjNlMDY3YzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUFGQzVERDA1NkVGMTFFQTlCOUFEQjI4MzYwNkFDMzkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUFGQzVEQ0Y1NkVGMTFFQTlCOUFEQjI4MzYwNkFDMzkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2E3YzQ0MWEtNWI1Yi04MTQyLWIyYWUtZmMxZmMwYjNiYzlkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGZiMGZlNTEtOTFkYy04OTQ1LWFjYWItYjM5NmQxMzA4NmQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+i9BvFgAABlRJREFUeNrsXMtuI0UULbfb79hxMgNSNNkiPgGxZcOWH2DDDs0CiR9hwwoQPwArFiz4BWTWbAYhRiAEmmQcu/1ov7inpys0TexuV3e1x+5zpBs7id2J69S999S9VV0ZDAYqgrfF3he7Eqso4lTgiz0T+07sVv/QDR+bYp+LfdQ6f7PiVF1yf0rYrNVq6avZ6MVQvvtU7Oso+V8I6R+ePbrmQJ0wWr03zm9///kreToS+8aRL+/Wmh0SXwK4jbbqX72FkP6ZWBXkf1Bv9zkyJUGt1VXi7E/k6Tsg/0nVrXFUSgSnWsfDtUNlV0JUAspdhyNR4gjAISD5RBnVP4fALjabjfJ9Xy0XC7VcrdRaDD+DVV7lXlWtVkWEVVXNdVWtXg++J/lHTvpkMlHz2Sx4vu01wHK5xBflz+dKeV4wAVqtlqrVaiT/2LAS774bDtV6vTZ6/0IiBazdbquW2EHJn02nxh+k0WzuDGMYKHhHEcBA6lBrE1mIjwKRA2NXbzQOSL6EoxVCk8kfkNCVRP5UJlcRaEootU3+TCZyHsRrjEYjdSlpwMb/TbWfM2xEsTm0AJd6r7/IQyTLG8j/JP8IyN+m7LMgzzRC8on0gq/T6aiN4exzXTfx991ut5APW4TS3/Z3sWZHISco9hiK54OQb7PY4DiOtaXMoYFVTufsLJjg0YmHHO7LJMAKCiFdp4qKjEVQ7ZPXziLCEWN0MPKJ9BMZpnP0tiodKniwqFaIRyVEBx0hXEvOx5yfI+JKP0rwvukoGg3XFlYQJD9nTCeTwOvh/UGOzxCutUaohCnAhk4g+fkqu+DhTARs7/w8Wz4WnXBxcfFv2rCwhCT5Oed8ncPzTiWOhTZvKsE3HA6Na/vdXm/namEhqnd0d1cIOX3xJFvKWYdqdCnQq6inzPdJxMMQ+m3836nIz1K5SnqfrarYIVALm1hYy9/JhEb9wrS2gByvnaLd6VDwHQOQ6+GlQU9eJkFW8dgQ1d9sNkn+seT9TuipfoaGjH7vmcXqJ8m3Ef7DfG/a3tURw/Y2LpJvZcVXuRd8M4MJMPG84NHmFq7Ugq/ft3eWD4P06PHjk5sAqOn7NzfKG49VAztxUqp1bJmD2MM6n55/xLlfe+4w5Z4+7N71Qq8votPJxo5FYPct6iMQb7cSBdDoQbEGE0MvALHIxcQIOn0RkecUsHef5FsGilzwZoTzpI2qwUpB0kUeBSKS/7rkf1n6Ya2OXL6KnNjR4hD9+6rk+KJIJ/kFA5W/oo5h5Uo+1p3G27gSWpvId8sMlbB91982tnLdf4botcWz8bkf2oixDHXAJnwNtED8esFaHxEivNYmfF6X6+W1uSMV+chZWRo7u8JZUMMejQoh/+LyMnfyQdTL29ut/Qk0k+IeD1Ufzf9x8lHT39a/n4afI49GD5d6GYGjWbsaU+MHJjZODmny4sRHt29tQ15dUJKfAThLl3RIY6lP38ZUfTXc1RzfvKqre0nXzOMUD8k3BLwdnbc0GI/H/08X4aSJejkmUtpOoPfANUl+QZjtcbgUE8WLeDR0go4YUS2VdjLpa/oZvT+V4GtKaFobKsyk5Q1+H897tpCn2Nu3YYPJ0gyPq0dThX4OMvcN5fgfspx5SEe+RXIwGLZ2qtjCMjxssS8g/s77/f8sm/V1ZgbH1JEi9G5hhv2CYHpqVlf4ovUAeDwInJn2/jNsGCH5hiSaAt4f3+QBQWh8C5cMBTKWdwsmP/5ekL7O4L243kPHvej5lmDrvLwJVuHt3Rj2S4qVad8lbUHB9HYjUPK7zugjbKWpauWBYJOEc3rzfWOT/AVUqmGeSwqR9x0swpx8qn2Car8AnMpuY3p+iUHyGfZ3o9frGZ+kTVLXOJiA3S6FzHSHc31v8m0OGipTr9vGRoZ9guQTJJ8g+QTJJ0g+QfIJkk+QfOJoUKo7cJYFqJriMGcu5PMOnAz7BMknSD5B8okTV/u8Ayc9nyD5BMknSD5x3OSvWV8rGV5VVBcg//l66XNASoSQ799A/rfezR90/pLAnwzVYu79Kk9/BPk/iX05fvFcosGao3PKxE9HavjnM5y1f4oAoIs8T6fDv0dinzS7l65TrXGkTirFb4JQP/de/iXffiz2PX5eGQwG0dddi70ndsUhOyngBgi/iP0gdn+nx38EGAAppgLLJvSaCgAAAABJRU5ErkJggg=="},af8d:function(e,t,o){"use strict";var a=o("846c"),s=o.n(a);s.a},babc:function(e,t,o){"use strict";var a=o("7d2c"),s=o.n(a);s.a},bbf9:function(e,t,o){},bdc3:function(e,t,o){},be2d:function(e,t,o){"use strict";var a=o("7a10"),s=o.n(a);s.a},c013:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAgCAYAAABQISshAAAD3ElEQVRYR+2YS4gcVRSG/7+6R6ILFwZRiKIL4yNKdOG4UMFkNQkoouIDnwliZJy6dXuCQckm40qRoFV1e3SMQiIGFIOYXVQEI0hGDSRGmJioIPjYJIoKio/pql+qZzp2t11d82CYaUkt657Xd8895z5oq9oJaQMW/vs6Mt7KhXJD61ItlPF2u0r1VGxLIwvhb9FAKi55SeClRVAE9y0r4eVnHuPP3WQXBaTiJtcIpQ+KIJrGf0iV3OeCvg/zdHoFBAKO1Tz2vzDE3zrB9AxIFjzJV0OfHRvTkgAhkrWh6dvfaaZtVTcT2CTplmxcqfzYlkbbZZcESGQ8dquXoaqWl6XjAJZPwfCG2PJAs05PgGQBV2JtELVzOvhDkx5vaq6XngHJAKzT64DumYLRWGRKg42s9BTI5lFdmEjjEFbUUcDB2HCs3ggWY2dv30eKaqS5FqzTw4BemUoK/pa4NquXngOp14tLdgl8qA5DHJgkB5YECMEngNqnM93p09RbQ4/b/pXX2JIAmSnA/+GsVch6OiOFU9RBoHEfmcPpt9Dd6YwUTtGSzIhwnB6PpUn6GT32g1gF4eLZwmRL69SRoqV9tlg6CWAC0GEA5wO8HMBlAM6aT9faD/LJyOcn7Uas0x2AdgNYNlugPHlBldiUovZxE+sCMrUEH8/Tza2RTg8FWZG23xtsVUcgrZ4vTF+Z520f5ImGncqorpkUvhv1+VPjXxBNrqNX2tfJVx7IF5HxVjUUrEuehrgJxDkAThJ6OzSlR7Px4Re1Iq3p+/mAEAxCQ5fZCJw2EtoK4JJpm+NEsrUxgdbpDUB3t/vLAeG6yPDdTLjbobJx2LNVbYH07NxgtDsypQemfb0DYKCTnVS80gU8OvyczkzP0McQWlbBf0GEz6PAuzozVqlqr6RbuwS4JzLeXUGklfT05VxAqHRjGJR3WacBQBlIzscJ1nBjOMxfrEt2AHykWZC2mn7T3IFIvhb6fNDEOtujfu0eHL+NDC+qz2ZVRyFdMWsYj9dFQzwYOG0j1PXxjkhvC015r40VgGppCszWuGq1lqfMbD3a8K/VKPUdKQjsj8h49baYNYJZQwAo/1k+uH0Lf7cufQvA7QUTtzkyfL7dV6Lyia6XfuvSrIjrt7HOHyciw6vmAtCuY2P5oOoFn+uNyfWh3zfeabwAJHEA/TzDAkdiw1Ob3HyA7Kj6karbnaRej7mQRc6tS98EcGe7HMH3QsOOHabIZt54ECUjrRemaUnix8j3zu2arZk4tU73ArofwHoAe0S+H/vcMRPd2coMO12bKK0QXA/iK5AfRX7+jt6w/w8CCVT6ND3rtgAAAABJRU5ErkJggg=="},c259:function(e,t,o){"use strict";var a=o("6559"),s=o.n(a);s.a},c8c6:function(e,t,o){"use strict";var a=o("9f97"),s=o.n(a);s.a},c9c5:function(e,t,o){"use strict";var a=o("2798"),s=o.n(a);s.a},cbd3:function(e,t,o){"use strict";var a=o("e827"),s=o.n(a);s.a},cd43:function(e,t,o){"use strict";var a=o("6194"),s=o.n(a);s.a},ceac:function(e,t,o){},d1df:function(e,t,o){"use strict";var a=o("61b2"),s=o.n(a);s.a},d30f:function(e,t,o){},d43d:function(e,t,o){},d8aa:function(e,t,o){"use strict";var a=o("75a7"),s=o.n(a);s.a},dbca:function(e,t,o){},dd79:function(e,t,o){"use strict";var a=o("8d08"),s=o.n(a);s.a},e12c:function(e,t,o){},e2f8:function(e,t,o){"use strict";var a=o("8793"),s=o.n(a);s.a},e5fb:function(e,t,o){"use strict";var a=o("bdc3"),s=o.n(a);s.a},e63a:function(e,t,o){},e827:function(e,t,o){},e9c6:function(e,t,o){},f7ad:function(e,t,o){},f7d4:function(e,t,o){},f8ff:function(e,t,o){"use strict";var a=o("64cc"),s=o.n(a);s.a},f903:function(e,t,o){"use strict";var a=o("95c3"),s=o.n(a);s.a}});