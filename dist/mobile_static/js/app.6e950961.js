(function(e){function t(t){for(var a,r,n=t[0],l=t[1],c=t[2],u=0,p=[];u<n.length;u++)r=n[u],s[r]&&p.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},s={app:0},i=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;i.push([1,"chunk-vendors"]),o()})({0:function(e,t){},"034f":function(e,t,o){"use strict";var a=o("64a9"),s=o.n(a);s.a},"04bd":function(e,t,o){"use strict";var a=o("25c1"),s=o.n(a);s.a},"0611":function(e,t,o){"use strict";var a=o("8b5a"),s=o.n(a);s.a},1:function(e,t,o){e.exports=o("56d7")},"112c":function(e,t,o){},"121f":function(e,t,o){},"12d2":function(e,t,o){"use strict";var a=o("3690"),s=o.n(a);s.a},"17f6":function(e,t,o){},"1b16":function(e,t,o){"use strict";var a=o("1cfc"),s=o.n(a);s.a},"1cfc":function(e,t,o){},2:function(e,t){},"20c8":function(e,t,o){"use strict";var a=o("6984"),s=o.n(a);s.a},2132:function(e,t,o){"use strict";var a=o("6c1a"),s=o.n(a);s.a},"243c":function(e,t,o){"use strict";var a=o("2de8"),s=o.n(a);s.a},"25c1":function(e,t,o){},"2acf":function(e,t,o){"use strict";var a=o("b65c"),s=o.n(a);s.a},"2b04":function(e,t,o){},"2b8f":function(e,t,o){"use strict";var a=o("fe78"),s=o.n(a);s.a},"2d4b":function(e,t,o){"use strict";var a=o("f7d4"),s=o.n(a);s.a},"2de8":function(e,t,o){},3:function(e,t){},"30f2":function(e,t,o){"use strict";var a=o("f7ad"),s=o.n(a);s.a},3262:function(e,t,o){"use strict";var a=o("7a95"),s=o.n(a);s.a},3660:function(e,t,o){"use strict";var a=o("2b04"),s=o.n(a);s.a},3690:function(e,t,o){},"39e8":function(e,t,o){"use strict";var a=o("17f6"),s=o.n(a);s.a},"3a6d":function(e,t,o){},"4af5":function(e,t,o){"use strict";var a=o("7b76"),s=o.n(a);s.a},"4bb5":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)},i=[],r=(o("57e7"),o("28a5"),{name:"app",components:{},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("/token/getToken",{}).then(function(t){e.setCookie("token",t.data.token,7)}),console.log(this.getCookie("token"))},setCookie:function(e,t,o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var s="expires="+a.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];while(" "==s.charAt(0))s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}}}),n=r,l=(o("034f"),o("2877")),c=Object(l["a"])(n,s,i,!1,null,null,null),d=c.exports,u=o("d225"),p=o("b0b4"),m=o("bc3a"),h=o.n(m);function f(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];while(" "==s.charAt(0))s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}h.a.defaults.baseURL="http://47.103.159.175:8080",h.a.defaults.timeout=1e4;var v=f("token");h.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",h.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",h.a.interceptors.request.use(function(e){return v&&(e.headers.token=v),e},function(e){return Promise.error(e)});var g,b=function(){function e(){Object(u["a"])(this,e)}return Object(p["a"])(e,null,[{key:"get",value:function(e,t,o){return new Promise(function(a,s){h.a.get(e,{params:t},o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}},{key:"post",value:function(e,t,o){return new Promise(function(a,s){h.a.post(e,JSON.stringify(t),o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}},{key:"post2",value:function(e,t,o){return new Promise(function(a,s){h.a.post(e,JSON.stringify(t),o).then(function(e){a(e.data)}).catch(function(e){s(e.data)})})}}]),e}(),y=b,C={getTableData:function(e,t,o){var a="";y.get("/WorkOrder/list",{merchantCode:e,pageNo:t,pageSize:o}).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code?(a=e,console.log("111111",a)):alert(e.message)}),setTimeout(function(){return console.log("22222",a),a},2e3)}},w={list:function(e){return y.get("/WorkOrder/list",e)}},_=w,x=(o("499a"),o("b828")),k=o("8c4f"),S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-button",{on:{"~click":function(t){return e.onceClick(t)}}},[e._v("只能点击一次")]),o("h1",[e._v("demo")]),o("el-button",{on:{click:e.can}},[e._v("生成自适应海报")]),o("canvas",{attrs:{id:"myCanvas",width:"",height:""}}),o("el-button",{on:{click:e.fil}},[e._v("过滤null")]),o("el-button",{on:{click:e.asyncs}},[e._v("异步函数调用")]),o("el-cascader",{attrs:{options:e.options},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),o("el-button",{on:{click:e.del}},[e._v("合并去重")]),o("el-input",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("el-button",{attrs:{type:"pramise"},on:{click:e.confirm}},[e._v("模糊搜索")]),e._l(e.list,function(t,a){return o("div",{key:a},[e._v(e._s(t.name)+e._s(t.phone)+e._s(t.carNUm))])}),o("el-button",{on:{click:e.getSum}},[e._v("求和")]),o("provice",{model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}}),o("el-button",{on:{click:e.carNum}},[e._v("输入的车牌号")]),o("div",[e._v(e._s(e.s))]),o("el-button",{on:{click:e.timeChange}},[e._v("时间转化时间戳")]),o("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection"}}),e._l(e.tableList,function(e,t){return o("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){}}])})],2),o("hr"),o("hr"),o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"表单字体"}},[o("el-input",{model:{value:e.form.fontSize,callback:function(t){e.$set(e.form,"fontSize",t)},expression:"form.fontSize"}})],1),o("el-form-item",{attrs:{label:e.labelInfo}},[o("el-color-picker",{model:{value:e.form.fontColor,callback:function(t){e.$set(e.form,"fontColor",t)},expression:"form.fontColor"}})],1),o("el-form-item",[o("label",{attrs:{slot:"label"},slot:"label"},[o("span",{style:{color:e.form.fontColor,fontSize:e.form.fontSize+"px"}},[e._v("*车牌号")])]),o("el-input")],1)],1),o("el-button",{on:{click:e.changea}},[e._v("变化")]),o("div",{style:{color:e.form.fontColor,fontSize:e.form.fontSize+"px"}},[e._v("这是一段字体")]),o("el-button",{on:{click:e.closeBag}},[e._v("闭包")])],2)},N=[],L=(o("20d6"),o("5df3"),o("4f7f"),o("6b54"),o("87b3"),o("a481"),o("7f7f"),o("3b2b"),o("ac6a"),o("c5f6"),o("6d67"),o("386d"),o("96cf"),o("3b8d")),O=(o("d25f"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("el-input",{attrs:{placeholder:this.province?"请输入内容":"请先选择省简称",readonly:!this.province,maxlength:"8"},model:{value:e.plateOther,callback:function(t){e.plateOther=t},expression:"plateOther"}},[o("el-button",{attrs:{slot:"prepend"},on:{click:function(t){t.stopPropagation(),e.showKeyborad=!e.showKeyborad}},slot:"prepend"},[o("span",{staticClass:"title",class:{placeholder:!e.province}},[e._v(e._s(e.province||"省简称"))]),o("i",{staticClass:"el-icon-caret-bottom el-icon--right"}),o("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showKeyborad,expression:"showKeyborad"}],staticClass:"plate-number-wrapper",attrs:{type:"flex",justify:"space-around"}},e._l(e.provincialAbbrev,function(t,a){return o("div",{key:a,staticClass:"item",class:{active:e.province===t},on:{click:function(o){o.stopPropagation(),e.province=t,e.showKeyborad=!1}}},[e._v("\n          "+e._s(t)+"\n        ")])}),0)],1)],1)],1)}),$=[],I=o("01c8"),T={props:{value:{type:String,default:""}},data:function(){return{province:"",showKeyborad:!1,plateOther:"",provincialAbbrev:A}},computed:{plateNumber:{get:function(){return this.province+this.plateOther},set:function(e){if(e.length>1){var t=e.split(""),o=Object(I["a"])(t),a=o[0],s=o.slice(1);this.province=a,this.plateOther=s.join("")}else this.province=e}}},watch:{value:function(e){this.plateNumber!==e&&(this.plateNumber=e)},plateNumber:function(e){this.$emit("input",e)}},mounted:function(){var e=this;this.plateNumber=this.value,document.addEventListener("click",function(){e.showKeyborad=!1})},beforeDestroy:function(){document.removeEventListener("click",function(){})}},A=["皖","苏","浙","沪","闽","赣","鄂","湘","桂","琼","京","津","冀","晋","新","蒙","辽","吉","黑","川","渝","云","贵","藏","陕","甘","宁","青","鲁","豫","粤","港","澳","台","警","领","使","学","军","WJ"],P=T,M=(o("39e8"),Object(l["a"])(P,O,$,!1,null,"72396bc6",null)),V=M.exports,D={components:{provice:V},data:function(){return{img:"../assets/wx.png",code:"../assets/car.png",title1:"这是标题这是标题这是标题",title2:"这是副标题这是副标题这是副标题这是副标题",filter:{name:null,asd:[{label:"级别",prop:"date"}],aa:null,lp:"",po:{a:"aa"}},inputClass:"inputClass",labelInfo:"控制label变化",form:{fontSize:"14",fontColor:"#666"},tableList:[{label:"级别",prop:"date"},{label:"名称",prop:"name"},{label:"别名",prop:"alias"},{label:"操作员",prop:"operator"},{label:"状态",prop:"state"}],tableData:[{id:1,date:"个人",children:[{id:11,name:"第二根半价套餐",alias:"是兄弟就来割",operator:"铁手无情",state:"无痛"}]},{id:2,date:"科室",children:[]},{id:3,date:"全院",children:[{id:31,name:"第二根半价套餐",alias:"是兄弟就来割",operator:"铁手无情",state:"无痛"},{id:41,name:"第二根半价套餐",alias:"是兄弟就来割",operator:"铁手无情",state:"无痛"}]}],plateNumber:null,list:[],sums:[{id:"1",num:222},{id:"1",num:1},{id:"1",num:0}],s:null,search:"",searchList:[{name:"李磊",phone:"1008611",carNUm:"川A3C625"},{name:"韩梅梅",phone:"1001011",carNUm:"渝AAAAAA"},{name:"小明",phone:"15528034",carNUm:"川J12625"},{name:"小红",phone:"1008611",carNUm:"川A3C625"}],value:null,options:[{value:1,label:"1-1",children:[{value:2,label:"2-1",children:[{value:3,label:"3-1"}]}]}]}},computed:{},methods:{onceClick:function(){console.log("按钮只能点击一次")},can:function(){var e=document.getElementById("myCanvas"),t=e.getContext("2d"),o=new Image,a=this;o.src=a.img,o.onload=function(){t.drawImage(o,0,0),t.save()}},fil:function(){var e=this.dealObjectValue(this.filter);console.log(e)},dealObjectValue:function(e){var t={};if(null===e||void 0===e)return t;for(var o in e)null==e[o]&&void 0==e[o]?t[o]="":null!==e[o]&&void 0!==e[o]&&(t[o]=e[o]);return t},asyncs:function(){var e=this,t=function(){var t=Object(L["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$api.list({merchantCode:31000001,pageNo:1,pageSize:10}).then(function(e){console.log("请求结果1111111",e)});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),o=function(){console.log(9876)};t().then(function(){o()})},changea:function(){var e=document.getElementById("nav");e.style.color="red"},fontColorChange:function(){},fontSizeChange:function(){},timeChange:function(){console.log(this.getUnixTime("2020-1-20 10:00:00"))},handleSelectionChange:function(e){console.log("选中的",e)},carNum:function(){console.log("车牌",this.plateNumber)},getSum:function(){this.s=this.sum(this.sums,"id")},confirm:function(){console.log(this.searchList,this.search);var e=this.fuzzySearch(this.searchList,this.search);console.log("%c搜索出来的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.list=e},sum:function(e,t){var o=0;return e.map(function(e){o+=Number(e[t])}),o},fuzzySearch:function(e,t){var o=new RegExp(t),a=[];console.log("关键字",o,o.test(e[0].name));for(var s=0;s<e.length;s++)(o.test(e[s].name)||o.test(e[s].phone)||o.test(e[s].carNUm))&&a.push(e[s]);return a},getUnixTime:function(e){var t=e.replace(/-/g,"/"),o=new Date(t),a=o.getTime().toString();return a.substr(0,10)},handleChange:function(e){console.log(e,this.value)},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.searchList=e.data)})},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(o.serverList=e.data)})},del:function(){var e=[{name:"小明",id:1,ch:"we"},{name:"小红",id:2,ch:"sdfssdfg"}],t=[{name:"小军",id:3,ch:"sedf"},{name:"韩梅梅",id:4,ch:"iop"},{name:"小红",id:2,ch:"sdfssdfg"}],o=e.concat(t);console.log("aasd",this.uniqs(o)),console.log(this.deWeight(o));new Set(o),this.deWeight(o),e.filter(function(e){return-1!==t.findIndex(function(t){return e.id===t.id})})},arrayNew:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++)if(e[o].id==t[s].id){a=1;break}0==a&&t.push(e[o])}return t},twoArraysToOne:function(e,t){for(var o=[],a=[],s=0;s<e.length;s++){for(var i=0,r=0;r<e.length;r++)e[s]===e[r]&&i++;i%2===1&&o.push(e[s])}for(var n=0;n<t.length;n++){for(var l=0,c=0;c<t.length;c++)t[n]===t[c]&&l++;l%2===1&&a.push(t[n])}return o=this.uniqs(o),a=this.uniqs(a),this.mergeArrayMerges(o,a)},mergeArrayMerges:function(e,t){return e.map(function(e,o){if(""!==e){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}),e=e.concat(t),e},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1==t.indexOf(e[o].id)&&t.push(e[o]);return t},uniq:function(e){for(var t=[],o=[],a=e.length,s=0;s<a;s++){for(var i=s+1;i<a;i++)e[s]===e[i]&&(s++,i=s);t.push(e[s]),o.push(s)}return console.log(o),t},MergeArray:function(e,t){for(var o=new Array,a=0;a<e.length;a++)o.push(e[a]);for(a=0;a<t.length;a++){for(var s=!0,i=0;i<e.length;i++)if(t[a]==e[i]){s=!1;break}s&&o.push(t[a])}return o},say:function(e){alert(e)},closeBag:function(){}},mounted:function(){},created:function(){var e=this;this.$api.list({merchantCode:31000001,pageNo:1,pageSize:10}).then(function(e){console.log("请求结果1111111",e)}),this.$http.get("/merchantAssemble/getAssemble",{merchantCode:this.merchantCode}).then(function(t){console.log("获取拼团图片",t),"10000"===t.code&&(e.assembleImgList=t.data.assembleImgList,e.assembleImgLists=t.data.shareImgList),3==e.$route.query.clickStatus&&(e.sets=!0)})},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},z=D,E=(o("20c8"),Object(l["a"])(z,S,N,!1,null,"1faf18bb",null)),G=E.exports,F=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{visible:e.nvShow,width:"850px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.nvShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#999999"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务分类")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:8}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{prop:"name"}}),o("el-table-column",{attrs:{prop:"memberCardType"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.memberCardType?[0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.row.memberCardName))]):e._e(),3==t.row.memberCardType&&0!=t.row.memberCardType?o("span",[e._v("(余次"+e._s(t.row.surplusCount)+")")]):e._e(),3!=t.row.memberCardType&&0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.row.cardBalance))]):e._e()]:void 0}}],null,!0)}),o("el-table-column",{attrs:{prop:"price"}})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},j=[],B=(o("f3e2"),{components:{},data:function(){return{tableList:[{label:"级别",prop:"name"},{label:"名称",prop:"memberCardType"},{label:"别名",prop:"price"}],nvShow:!0,getRowKey:function(e){var t=0;return t=e.code+e.goodsVipId,t},getRowKey1:function(e){},checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[],searchList:[]}},computed:{},methods:{handleCheckAllChange:function(){},getTree:function(){var e=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:1}).then(function(t){console.log("请求弹窗树状结果",t),"10000"==t.code&&(e.nvSearchList=t.data,t.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),e.searchList=t.data,console.log("%c商品模板","color:#70ff57;font-size:20px;font-weight:bold",e.options))})},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},cellcb:function(e){if(e.list.length>0)return"myCell"},toggleRowExpansion:function(e,t){console.log("手风琴下拉列表",e,t),this.secondList=t.list},confirm:function(){var e=this.arr1.concat(this.arr2);console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.$emit("sendNv",e)},close:function(){this.$emit("closeNv",!1)},serverChecked:function(e){this.arr1=e,console.log("勾选选项",e,this.serverSelected)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",e,this.serverSelected,this.arr2)},handleClassify:function(e){console.log("点击二级分类",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.customerCode,categoryCode:e,level:"3"}).then(function(e){console.log("请求的书距",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,3==t.memberCardType?t.price=e.standardPrice:t.price=t.memberCardGoodsPrice,null==e.price&&(e.price=0),t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code}),e.children=e.list,e.children.map(function(e){1==e.memberCardType?e.name="通用储值卡":2==e.memberCardTypew?e.name="限定储值卡":3==e.memberCardType?e.name="次卡":4==e.memberCardType?e.name="默认卡":e.name="卡外"})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.getTree(),this.customerCode="3100000100069"}}),q=B,R=Object(l["a"])(q,F,j,!1,null,"2452493f",null),K=R.exports,W=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hint"},[o("el-dialog",{attrs:{center:"","close-on-click-modal":!1,title:"提示",center:"","before-close":e.close,visible:e.notice,width:"25%"},on:{"update:visible":function(t){e.notice=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("h3",[e._v("您选择了线下支付方式，请确认已收到客户钱款后再确认完成支付")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("结算时间：")]),o("div",{staticStyle:{width:"70%",height:"30px",background:"#f2f2f2","line-height":"30px","border-radius":"10px"}},[e._v(e._s(e.date))])])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-right":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#999","font-weight":"bold"},attrs:{type:"text"},on:{click:e.close}},[e._v("未收到钱款")])],1)]),o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-left":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#0000FF","font-weight":"bold"},attrs:{type:"text",disabled:e.onceClick},on:{click:e.confirm}},[e._v("已收款，确认")])],1)])],1)],1)])],1)},U=[],J={components:{},props:{notice:Boolean,onceClick:Boolean},data:function(){return{date:"2019-10-31 10:00:00",hintShow:!0}},computed:{},methods:{confirm:function(){this.$emit("rec")},close:function(){this.$emit("unrec")}},mounted:function(){},created:function(){var e=new Date,t=e.toLocaleString("chinese",{hour12:!1});this.date=t.replace(/\//g,"-")}},H=J,X=(o("4af5"),Object(l["a"])(H,W,U,!1,null,"7abbb91e",null)),Q=X.exports,Y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello",staticStyle:{width:"100%","margin-left":"-2px"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"exportTab"}},[o("excel",{attrs:{list:e.allList}})],1),o("div",{staticStyle:{width:"100%","margin-top":"50px"}},[o("div",{staticClass:"d-flex"},[o("div",{staticClass:"font-big",staticStyle:{"margin-top":"5px","margin-left":"10px"}},[e._v("输入车牌号开单:")]),o("carNum",{staticStyle:{"margin-left":"15px"},model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}}),o("div",{staticClass:"ml"},[o("el-button",{attrs:{type:"primary"},on:{click:e.goQuickOrder}},[e._v("快捷开单")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.goCompre}},[e._v("综合开单")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"}},[e._v("使用兑换码")]),o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出明细")])],1)],1),o("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"},on:{"tab-click":e.tabChange},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.tabTitle,function(e,t){return o("el-tab-pane",{key:t,attrs:{label:e,name:e}})}),1),o("div",{staticClass:"d-flex",staticStyle:{width:"100%","margin-top":"20px","margin-left":"10px"}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"开单时间"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.getTime,callback:function(t){e.getTime=t},expression:"getTime"}})],1),o("el-form-item",{attrs:{label:"金额"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入.."},model:{value:e.fMoney,callback:function(t){e.fMoney=t},expression:"fMoney"}}),e._v(" --- "),o("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入.."},model:{value:e.eMoney,callback:function(t){e.eMoney=t},expression:"eMoney"}})],1),o("el-form-item",{attrs:{label:"请选择工单类型"}},[o("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"工单类型"},on:{change:e.typeChange},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},e._l(e.types,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",[o("el-input",{staticClass:"ml",attrs:{placeholder:"请输入车牌号/姓名/手机号"},model:{value:e.other,callback:function(t){e.other=t},expression:"other"}})],1),o("el-form-item",[o("el-button",{staticClass:"ml",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),o("div",{staticStyle:{width:"100%",overflow:"auto"}},[o("el-table",{ref:"tableDatas",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[o("el-table-column",{attrs:{prop:"workorderType",label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.workorderType?"综合单":"快捷单"))])]}}])}),o("el-table-column",{attrs:{prop:"workOrderCode",label:"工单编号",width:"180"}}),o("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号",width:"130"}}),o("el-table-column",{attrs:{prop:"vehicleIdNum",label:"车架号",width:"180"}}),o("el-table-column",{attrs:{prop:"customerName",label:"客户姓名",width:"120"}}),o("el-table-column",{attrs:{prop:"customerPhone",label:"手机号码",width:"120"}}),o("el-table-column",{attrs:{prop:"name",label:"服务项",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical","word-wrap":"break-word","white-space":"normal"}},[o("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[e._l(t.row.serverList2,function(t,a){return o("div",{key:a},[e._v(e._s(t.goodsName))])}),e._l(t.row.serverList2,function(a,s){return o("div",{key:s,attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.goodsName)+e._s(t.row.serverList2.length>2?a.goodsName[1]+"...":"..."))])})],2)],1)]}}])}),o("el-table-column",{attrs:{prop:"name",label:"商品",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical","word-wrap":"break-word","white-space":"normal"}},[o("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[e._l(t.row.goodsList2,function(t,a){return o("div",{key:a},[e._v(e._s(t.goodsName))])}),e._l(t.row.goodsList2,function(a,s){return o("div",{key:s,attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.goodsName)+e._s(t.row.goodsList2.length>2?a.goodsName[1]+"...":"..."))])})],2)],1)]}}])}),o("el-table-column",{attrs:{prop:"totalMoney",label:"工单总额",width:""}}),o("el-table-column",{attrs:{prop:"preferentialMoney",label:"优惠金额",width:""}}),o("el-table-column",{attrs:{prop:"realityMoney",label:"应收金额/元",width:"180"}}),o("el-table-column",{attrs:{prop:"createName",label:"开单人员",width:"100"}}),o("el-table-column",{attrs:{prop:"workorderTime",label:"开单时间",width:"180"}}),o("el-table-column",{attrs:{prop:"payTime",label:"支付完成时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!=t.row.status?o("span",[e._v(e._s(t.row.payTime))]):e._e()]}}])}),o("el-table-column",{attrs:{prop:"name",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:1==t.row.status||2==t.row.status?{color:"#0000ff"}:0==t.row.status||3==t.row.status?{color:"#00cc00"}:4==t.row.status?{color:"#ff0000"}:{color:"#333333"}},[e._v(e._s(0==t.row.status?"草稿":1==t.row.status?"施工中":2==t.row.status?"待确认":3==t.row.status?"待支付":4==t.row.status?"挂账":5==t.row.status?"已完成":"已作废"))])]}}])}),o("el-table-column",{staticStyle:{"font-size":"14px"},attrs:{prop:"name",label:"操作",width:"244",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.finish(t.$index,t.row)}}},[e._v("完工  |")]):e._e(),1==t.row.status||2==t.row.status||3==t.row.status||4==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.close(t.$index,t.row)}}},[e._v("结算  "),3!=t.row.status?o("i",[e._v("|")]):e._e()]):e._e(),4==t.row.status||5==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.look(t.$index,t.row)}}},[e._v("查看  |")]):e._e(),1==t.row.status||0==t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑  |")]):e._e(),6!=t.row.status&&3!=t.row.status&&5!=t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,t.row)}}},[e._v("作废  |")]):e._e(),3!=t.row.status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.copy(t.$index,t.row)}}},[e._v("复制")]):e._e()]}}])})],1)],1),o("div",{staticStyle:{"margin-left":"380px",float:"left","margin-top":"40px","margin-bottom":"80px"}},[o("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),o("finish",{attrs:{customerPhone:e.datas.customerPhone,plateNumber:e.datas.plateNumber,merchantName:e.datas.merchantName,merchantPhone:e.datas.merchantPhone,isShowFinish:e.isShowFinish,orderCode:e.datas.orderCode},on:{closeCompAlert:e.closeCompAlert,compConfirm:e.compConfirm,noSend:e.noSend}}),o("buyer",{attrs:{carNumber:e.carNumber,buyerAlert:e.buyerAlert},on:{closeBuyerAlert:e.closeBuyerAlert,buyerConfirm:e.sendBuyerData}})],1)},Z=[],ee=o("21a6"),te=o.n(ee),oe=o("1146"),ae=o.n(oe),se=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%","show-close":!1},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},on:{change:e.inputTel},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger",disabled:e.dis},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},ie=[],re={components:{},props:{isShowFinish:{type:Boolean}},data:function(){return{status:null,completeConfirm:!0,tel:"",dis:!0}},computed:{},methods:{inputTel:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)?this.dis=!1:(this.$message.error("请输入正确的手机号"),this.tel="",this.dis=!0)},close:function(){this.$emit("closeCompAlert")},noSend:function(){this.$emit("noSend",this.status)},comConfirm:function(){this.$emit("compConfirm",this.status,this.tel)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ne=re,le=(o("e5fb"),Object(l["a"])(ne,se,ie,!1,null,"5db253a5",null)),ce=le.exports,de=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{title:"挂账确认",center:"",visible:e.buyerAlert,width:"30%","show-close":!1},on:{"update:visible":function(t){e.buyerAlert=t}}},[o("div",[e._v("操作挂账后，工单中的内容不可修改，确定要对["+e._s(e.carNumber)+"]操作挂账么？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.buyerConfirm}},[e._v("确 定")])],1)])],1)},ue=[],pe={components:{},props:{buyerAlert:{type:Boolean},carNumber:{type:String}},data:function(){return{}},computed:{},methods:{close:function(){this.$emit("closeBuyerAlert")},buyerConfirm:function(){console.log("确认挂账"),this.$emit("buyerConfirm")}},mounted:function(){},created:function(){}},me=pe,he=(o("cee1"),Object(l["a"])(me,de,ue,!1,null,"7088c64c",null)),fe=he.exports,ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("div",{},[o("el-table",{attrs:{data:e.list,id:"exportTab"}},[o("el-table-column",{attrs:{prop:"workorderType",label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.workorderType?"综合单":"快捷单"))])]}}])}),o("el-table-column",{attrs:{prop:"workOrderCode",label:"工单编号",width:"180"}}),o("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),o("el-table-column",{attrs:{prop:"vehicleIdNum",label:"车架号"}}),o("el-table-column",{attrs:{prop:"customerName",label:"客户姓名"}}),o("el-table-column",{attrs:{prop:"customerPhone",label:"手机号码"}}),o("el-table-column",{attrs:{prop:"name",label:"服务项",width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",e._l(t.row.serverList2,function(t,a){return o("div",{key:a},[o("div",[e._v(e._s(t.goodsName))])])}),0)]}}])}),o("el-table-column",{attrs:{prop:"name",label:"商品"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goodsList2,function(t,a){return o("div",{key:a},[o("div",[e._v(e._s(t.goodsName))])])})}}])}),o("el-table-column",{attrs:{prop:"totalMoney",label:"工单总额"}}),o("el-table-column",{attrs:{prop:"preferentialMoney",label:"优惠金额"}}),o("el-table-column",{attrs:{prop:"realityMoney",label:"应收金额/元"}}),o("el-table-column",{attrs:{prop:"repairName",label:"开单人员"}}),o("el-table-column",{attrs:{prop:"workorderTime",label:"开单时间"}}),o("el-table-column",{attrs:{prop:"payTime",label:"支付完成时间",width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:1==t.row.status||2==t.row.status?{color:"#0000ff"}:0==t.row.status||3==t.row.status?{color:"#00cc00"}:4==t.row.status?{color:"#ff0000"}:{color:"#333333"}},[e._v(e._s(0==t.row.status?"草稿":1==t.row.status?"施工中":2==t.row.status?"待确认":3==t.row.status?"待支付":4==t.row.status?"挂账":5==t.row.status?"已完成":"已作废"))])]}}])})],1)],1)])},ge=[],be={props:{list:Array},components:{},data:function(){return{}},computed:{},methods:{},mounted:function(){},created:function(){}},ye=be,Ce=Object(l["a"])(ye,ve,ge,!1,null,"45a8121b",null),we=Ce.exports,_e={components:{finish:ce,carNum:V,excel:we,buyer:fe},data:function(){return{editableTabsValue:"全部",allList:[],carNumber:"",buyerAlert:!1,isShowFinish:!1,orderCode:null,finishIdx:null,datas:{customerPhone:"",plateNumber:"",merchantName:"",merchantPhone:""},province:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],tabTitle:["全部","草稿","施工中","待确认","待支付","挂账","已完成","已作废"],cur:0,other:"",orderType:"",types:[{value:"",label:"全部"},{value:"2",label:"快捷单"},{value:"1",label:"综合单"}],eMoney:"",fMoney:"",getTime:"",plateNumber:"",status:"",currentPage:1,pageSize:10,total:null,tableData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-7776e6),e.$emit("pick",[o,t])}}]},value6:"",value7:""}},created:function(){this.merchantCode=this.$route.query.merchantCode,console.log("操作人id",this.$route.query.employeeId),void 0!=this.$route.query.employeeId&&localStorage.setItem("createId",this.$route.query.employeeId||""),this.getTableData(this.merchantCode,1,10),this.getAlllist()},methods:{getAlllist:function(){var e=this;this.$http.get("/WorkOrder/list",{merchantCode:this.merchantCode,pageNo:1,pageSize:999999,startTime:"",endTime:"",status:"",serchMoney1:"",serchMoney2:"",customerName:"",orderType:""}).then(function(t){"10000"==t.code&&(t.data.map(function(e){var t=[],o=[];e.laborOrderGoodsList.map(function(a){1==a.type?(t.push(a),e.serverList2=t):(o.push(a),e.goodsList2=o)})}),e.allList=t.data),e.$nextTick(function(){e.$refs.tableDatas.doLayout()})})},getTableData:function(e,t,o,a,s,i,r,n,l,c){var d=this;this.$http.get("/WorkOrder/list",{merchantCode:e,pageNo:t,pageSize:o,startTime:a,endTime:s,status:i,serchMoney1:r,serchMoney2:n,customerName:l,orderType:c}).then(function(e){console.log("请求结果工单列表",e),"10000"==e.code&&(e.data.map(function(e){var t=[],o=[];e.laborOrderGoodsList.map(function(a){1==a.type?(t.push(a),e.serverList2=t):(o.push(a),e.goodsList2=o)})}),d.tableData=e.data,d.total=e.total),d.$nextTick(function(){d.$refs.tableDatas.doLayout()}),console.log("最后的数组",d.tableData)})},tabChange:function(e){console.log("选中的选项",e);var t=e.index;this.cur=e,this.status=0==t?"":t-1,this.getTableData(this.merchantCode,1,10,"","",this.status)},search:function(){console.log("时间",this.getTime,"金额",this.fMoney+"--"+this.eMoney,"工单类型",this.orderType,"其他选项",this.other);var e="",t="";null!=this.getTime&&(e=this.getTime[0],t=this.getTime[1]),this.getTableData(this.merchantCode,1,10,e,t,this.status,this.fMoney,this.eMoney,this.other,this.orderType)},typeChange:function(){console.log("工单类型",this.orderType)},finish:function(e,t){var o=this;console.log(t),this.orderCode=t.workOrderCode,this.finishIdx=e,this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:t.plateNumber}).then(function(e){if(console.log("请求商家电话/名称结果",e),"10000"==e.code){o.isShowFinish=!0;var a=t.customerPhone,s=t.plateNumber,i=e.data.merchantPhone,r=e.data.merchantName,n=t.workOrderCode;o.datas={customerPhone:a,plateNumber:s,merchantName:r,merchantPhone:i,orderCode:n}}else alert(e.message)})},compConfirm:function(e,t){this.finishOrder(t,this.datas.plateNumber,this.datas.merchantName,this.datas.merchantPhone,this.datas.orderCode)},noSend:function(e){console.log("挂账",this.datas.orderCode,this.datas.customerPhone),this.finishOrder("",this.datas.plateNumber,this.datas.merchantName,this.datas.merchantPhone,this.datas.orderCode)},closeCompAlert:function(){this.isShowFinish=!1},finishOrder:function(e,t,o,a,s){var i=this;this.$http.get("/WorkOrder/sendMessage",{toPhone:e,action:"WORK_ORDER_FINISHED",plateNum:t,merchantName:o,merchantPhone:a,orderCode:s,merchantCode:this.merchantCode}).then(function(e){console.log("请求完单结果",e),"10000"==e.code?(i.tableData[i.finishIdx].status=2,i.isShowFinish=!1):alert(e.message)})},look:function(e,t){var o;o=5==t.status?"/billdetail":1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,type:"look"}}),location.reload()},close:function(e,t){console.log("结算",t),3==t.status?this.$router.push({path:"/financialClose",query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType}}):this.$router.push({path:"/close",query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType}}),location.reload()},buyer:function(e,t){this.buyerAlert=!0,console.log("挂账弹窗",t),this.carNumber=t.plateNumber,this.buyerWorkOrderCode=t.workOrderCode,this.rowIdx=e},sendBuyerData:function(){var e=this;this.$http.get("/WorkOrder/buyoncredit",{merchantCode:this.merchantCode,workOrderCode:this.buyerWorkOrderCode,isBuyoncredit:2}).then(function(t){console.log("请求工单挂账结果",t),"10000"==t.code?(e.tableData[e.rowIdx].status=4,e.buyerAlert=!1):alert(t.message)})},closeBuyerAlert:function(){this.buyerAlert=!1},set:function(e,t){var o;o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"set",status:t.status}}),location.reload()},del:function(e,t){var o=this;console.log("作废",e,t),this.$http.get("/WorkOrder/updateStatus",{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode}).then(function(t){console.log("请求作废结果",t),"10000"==t.code&&(o.tableData[e].status=6)})},copy:function(e,t){var o;console.log(t),o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"copy"}}),location.reload()},goCompre:function(){var e;e=""!=this.plateNumber?{carNum:this.plateNumber,merchantCode:this.merchantCode}:{merchantCode:this.merchantCode},this.$router.push({path:"/comprehensiveOrder",query:e})},goQuickOrder:function(){var e;e=""!=this.plateNumber?{carNum:this.plateNumber,has:"has",merchantCode:this.merchantCode}:{has:"noHas",merchantCode:this.merchantCode},this.$router.push({path:"/quickOrder",query:e}),location.reload()},handleClick:function(){alert("button click")},handleCurrentChange:function(e){var t="",o="";null!=this.getTime&&(t=this.getTime[0],o=this.getTime[1]),this.getTableData(this.merchantCode,e,10,t,o,this.status,this.fMoney,this.eMoney,this.other,this.orderType),console.log("当前页: ".concat(e))},exportExcel:function(){var e={raw:!0},t=ae.a.utils.table_to_book(document.querySelector("#exportTab"),e),o=ae.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{te.a.saveAs(new Blob([o],{type:"application/octet-stream"}),"工单列表.xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,o)}return o}}},xe=_e,ke=(o("88ae"),Object(l["a"])(xe,Y,Z,!1,null,"40a488fb",null)),Se=ke.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-spb",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{height:"60px","margin-left":"30px"}},[a("div",{staticClass:"font-big"},[e._v(e._s(e.carNum))])]),"copy"!=e.useType?a("div",{staticStyle:{"margin-left":"5px","margin-top":"8px"}},[a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){0==e.dis?e.setCar():e.dm()}}})]):e._e(),a("div",{staticStyle:{"margin-left":"120px"}},[a("el-switch",{attrs:{"inactive-color":"#999999","active-color":"#13ce66",disabled:e.dis},on:{change:function(t){return e.check()}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1),a("div",{staticClass:"font-big",staticStyle:{"margin-left":"10px"}},[e._v("\n\t\t\t\t使用他人会员卡\n\t\t\t\t"),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.state))])])]),a("div",{staticStyle:{color:"#666666"}},[a("div",{staticClass:"d-flex"},[a("div",[a("span",{staticStyle:{color:"red","margin-right":"10px"}},[e._v("*")]),a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加手机号",disabled:e.dis},on:{change:e.inputTel},model:{value:e.carAddTel,callback:function(t){e.carAddTel=t},expression:"carAddTel"}})],1),a("div",[a("span",{staticStyle:{color:"red","margin-right":"10px","margin-left":"20px"}},[e._v("*")]),a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加姓名",disabled:e.dis},model:{value:e.carAddName,callback:function(t){e.carAddName=t},expression:"carAddName"}})],1),a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"22px","margin-top":"14px"}},[e._v("\n\t\t\t\t\t挂账:\n\t\t\t\t\t"),a("span",{staticStyle:{color:"red","padding-top":"3px"}},[e._v("¥ "+e._s(e.buyer))])]),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"22px"}},[a("div",{staticStyle:{"padding-top":"14px"}},[e._v("本次公里数")]),a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"5px"}},[a("el-input",{staticClass:"kil",staticStyle:{width:"100px"},attrs:{disabled:e.dis},model:{value:e.carKil,callback:function(t){e.carKil=t},expression:"carKil"}}),a("div",{staticStyle:{"padding-top":"14px","margin-left":"5px"}},[e._v("KM")])],1)]):e._e()]),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[a("div",[a("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"200px"},attrs:{placeholder:"添加发动机号",disabled:e.dis},model:{value:e.carAddEngine,callback:function(t){e.carAddEngine=t},expression:"carAddEngine"}})],1),a("div",[a("el-input",{staticClass:"phone",staticStyle:{"margin-left":"22px",height:"23px",width:"200px"},attrs:{placeholder:"添加车架号",disabled:e.dis},model:{value:e.carVin,callback:function(t){e.carVin=t},expression:"carVin"}})],1),a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{"margin-left":"22px","padding-top":"14px"}},[e._v("车辆注册日期")]),a("div",{staticClass:"c-date",staticStyle:{width:"200px","margin-left":"5px"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",disabled:e.dis},model:{value:e.carDate,callback:function(t){e.carDate=t},expression:"carDate"}})],1)])]):e._e(),e.showInput?a("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[a("div",[a("el-input",{staticClass:"phone",staticStyle:{width:"120px"},attrs:{placeholder:"车身颜色",disabled:e.dis},model:{value:e.carColor,callback:function(t){e.carColor=t},expression:"carColor"}})],1),a("div",{staticClass:"cartype",staticStyle:{height:"23px","margin-left":"22px"}},[a("el-select",{staticStyle:{width:"202px",height:"23px"},attrs:{placeholder:"请选择",disabled:e.dis},on:{change:e.chCar},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}},e._l(e.brand,function(e){return a("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1),a("el-cascader",{staticStyle:{width:"302px","margin-left":"22px"},attrs:{disabled:e.dis,options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.seriesName,callback:function(t){e.seriesName=t},expression:"seriesName"}})],1)]):e._e()])]),a("div",{staticClass:"d-flex",staticStyle:{height:"60px","margin-left":"30px"}},[a("div",{staticStyle:{width:"300px"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容...",disabled:e.dis},on:{focus:e.searchShowClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("div",{staticStyle:{"margin-left":"22px"}},[a("el-button",{attrs:{type:"primary",disabled:e.dis},on:{click:e.searchShowClick}},[e._v("搜索")])],1),a("div",{staticStyle:{"margin-left":"20px","margin-top":"14px"}},[a("font",{attrs:{color:"#808080"}},[e._v("找不到项目？")]),a("el-button",{staticStyle:{color:"#409eff"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNs}},[e._v("新建服务")]),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"服务不计入库存,如:洗车、保养..."}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})]),a("el-button",{staticStyle:{"margin-left":"5px",color:"#409eff"},attrs:{disabled:e.dis,type:"text"},on:{click:e.openNp}},[e._v("新建商品")]),a("span",{staticStyle:{color:"#409eff"}},[e._v("(配件)")]),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"商品计入库存,如:玻璃水、机油滤芯..."}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("div",{staticStyle:{"margin-top":"20px"}},[e._m(0),a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"},on:{"tab-click":e.vipChange},model:{value:e.vipBoxCur,callback:function(t){e.vipBoxCur=t},expression:"vipBoxCur"}},e._l(e.sCheck,function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.memberCardName,name:e}})}),1)],1),a("div",{staticStyle:{width:"100%","margin-top":"20px"}},[a("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[a("el-checkbox-group",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"},on:{change:e.checkGroup},model:{value:e.checkServer,callback:function(t){e.checkServer=t},expression:"checkServer"}},e._l(e.fCheck,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(a){return e.checkChange(o,t)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[[a("div",[e._v(e._s(t.goodsName))]),a("div",{staticStyle:{"margin-left":"5px"}},[e._v("¥"+e._s(t.price))])]],2)}),1)],1),a("div",{staticStyle:{"text-align":"left",color:"#c5c5c8","margin-top":"20px","margin-left":"50px","border-left":"3px solid #6F93FE","padding-left":"3px"}},[e._v("会员卡内常用项目")]),a("el-checkbox-group",{on:{change:e.checkGroup2},model:{value:e.checkServer2,callback:function(t){e.checkServer2=t},expression:"checkServer2"}},[a("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[a("div",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.laborItemsVoList,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(a){return e.checkChange2(o,t)}}},[[a("div",[e._v(e._s(t.name))]),a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{"margin-left":"5px"}},[e._v("剩余"+e._s(t.surplusCount)+"次")])])]],2)}),1),a("div",{staticClass:"c-checkBoxs",staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.freeItemsVoList,function(t,o){return a("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(a){return e.checkChange2(o,t)}}},[[a("div",[e._v(e._s(t.name))]),a("div",{staticStyle:{"margin-left":"5px"}},[e._v("剩余"+e._s(t.surplusCount)+"次")]),a("div",{staticClass:"d-flex"})]],2)}),1)])]),a("div",{staticStyle:{"margin-left":"20px","margin-top":"70px","text-align":"center"}},[a("font",{attrs:{size:"1"}},[a("font",{attrs:{color:"#808080"}},[e._v("更多项目请在搜索栏中搜索~")])],1)],1)],1),a("div",{staticClass:"end d-spb",staticStyle:{"margin-left":"20px"}},[a("div",{style:{position:"relative"}},[a("div",{staticClass:"end-img d-flex"},[a("div",{staticClass:"carAlert",on:{click:function(t){return e.showCar()}}},[a("img",{attrs:{src:o("c013"),alt:""}})]),a("div",{staticClass:"icon",staticStyle:{"text-align":"center"}},[e._v(e._s(e.allCarNum))])]),e.isCarShow?a("div",{staticClass:"carTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#fff",fontSize:"14px",backgroundColor:"#409eff"},data:e.carList,"show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"goodsName",label:"已选项目",width:"180"}}),a("el-table-column",{attrs:{prop:"num",label:"清空",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[a("span",{on:{click:e.clearAll}},[a("i",{staticClass:"el-icon-delete"}),e._v("\n\t\t\t\t\t\t\t\t清空\n\t\t\t\t\t\t\t")])]}},{key:"default",fn:function(t){return[a("span",{staticClass:"carDel",staticStyle:{"margin-right":"5px",color:"#4c6acc","font-size":"5px"},on:{click:function(o){0==e.dis?e.handleDelete(t.$index,t.row):e.dm()}}},[e._v("删除")]),a("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[a("el-input-number",{attrs:{size:"small",min:1,max:999,disabled:e.dis||1==t.row.isGift},on:{change:function(o){return e.carGoodsCount(t.$index,t.row)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})],1)]}}],null,!1,2582450753)}),a("el-table-column",{attrs:{prop:"price",label:"",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[a("i",{staticClass:"el-icon-close",on:{click:e.closeCar}})]}},{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[e._v("¥"+e._s(t.row.price))])]}}],null,!1,2227630479)})],1)],1):e._e()]),a("div",{staticClass:"end-btn d-flex"},[a("div",{staticClass:"title"},[e._v("\n\t\t\t\t已选 \n\t\t\t\t"),a("span",{staticStyle:{"font-size":"28px",color:"#f00"}},[e._v(e._s(0==e.dis?e.carList.length:e.fCheck.length))]),e._v("\n\t\t\t\t 个项目\n\t\t\t")]),a("div",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toBill}},[e._v("下一步")])],1)])]),a("el-dialog",{attrs:{visible:e.searchShow,width:"800px","close-on-click-modal":!1,"lock-scroll":!0},on:{"update:visible":function(t){e.searchShow=t}}},[a("div",{staticStyle:{"padding-top":"15px"}},[a("el-row",[e._l(e.tabTitle,function(t,o){return a("el-col",{key:o,staticClass:"tabs",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[a("p",{class:{active:e.cur==o},staticStyle:{"text-align":"center","padding-bottom":"10px"},on:{click:function(t){return e.tabChangess(o)}}},[e._v(e._s(t))])])}),a("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold",color:"#999acd","font-size":"18px","text-align":"center","line-height":"64px"},attrs:{span:8}},[e._v("已选项目")])],2)],1),a("div",{staticClass:"col",staticStyle:{"margin-top":"38px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"400px","overflow-y":"auto"}},e._l(e.searchList,function(t,o){return a("el-menu",{key:o,staticClass:"el-menu-vertical-demo",on:{open:e.handleOpen,close:e.handleClose}},[a("el-submenu",{attrs:{index:t.code}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,o){return a("el-menu-item-group",{key:o},[a("el-menu-item",{attrs:{index:t.code},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"grid-content bg-purple-light bm"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("名称")]),a("el-col",{attrs:{span:8}},[e._v("价格")]),a("el-col",{staticStyle:{"text-align":"right","padding-right":"13px"},attrs:{span:8}},[e._v("选择")])],1),a("el-table",{ref:"multipleTable",staticStyle:{height:"400px","overflow-y":"auto"},attrs:{"show-header":!1,data:e.serverList,"row-key":e.getRowKeys},on:{"selection-change":e.serverChecked}},[a("el-table-column",{attrs:{prop:"goodsName"}}),a("el-table-column",{attrs:{prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.price)+"\n\t\t\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{type:"selection","reserve-selection":!0}})],1)],1)]),a("el-col",{attrs:{span:5}},e._l(e.serverSelected,function(t,o){return a("div",{key:o,staticClass:"grid-content bg-purple",staticStyle:{"text-align":"center"}},[a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:20}},[e._v(e._s(t.goodsName))]),a("el-col",{staticStyle:{"margin-top":"13px"},attrs:{span:4}},[a("i",{staticClass:"el-icon-close",on:{click:function(o){return e.delSelected(t.goodsCode)}}})])],1)}),0)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onfirm}},[e._v("确 定")])],1)]),a("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}}),a("newserve",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),a("setCar",{attrs:{setCarshow:e.setCarshow},on:{closeCarAlert:e.closeCarAlert,carConfirm:e.sendCarData}}),a("uservip",{attrs:{usevip:e.usevip,vehicleId:e.vehicleId},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.sendVipData}})],1)},Le=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"30px"}},[o("div",{staticClass:"font-big",staticStyle:{"text-align":"left"}},[e._v("快速选择开单项目")])])}],Oe=(o("0cd8"),o("2caf"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建服务","close-on-click-modal":!1,center:"",visible:e.nsIsShow,width:"40%"},on:{"update:visible":function(t){e.nsIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"服务名称"}},[o("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"服务分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择服务分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e.showHour?o("el-form-item",{attrs:{label:"工时/小时"}},[o("el-col",{attrs:{span:7}},[o("el-input",{model:{value:e.form.hour,callback:function(t){e.$set(e.form,"hour",t)},expression:"form.hour"}})],1),o("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[o("span",{staticStyle:{"margin-right":"10px"}},[e._v("工时单价")]),o("el-input",{staticStyle:{width:"60%"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1):e._e(),o("el-form-item",{attrs:{label:"一口价"}},[o("el-input",{model:{value:e.form.buy,callback:function(t){e.$set(e.form,"buy",t)},expression:"form.buy"}})],1),o("el-form-item",{attrs:{label:"服务模板"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务模板"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.nsList,function(e,t){return o("el-option",{key:t,attrs:{label:e.templateName,value:e.code}})}),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)}),$e=[],Ie={components:{},props:{nsIsShow:Boolean,nsList:Array,searchList:Array},data:function(){return{options:null,value:null,showHour:!1,radio:"1",chooseRadio:null,List:[],form:{name:"",region:"",hour:"",price:"",buy:"",model:""},newServe:!0,tel:""}},computed:{},methods:{look:function(){console.log("查看",this.$props.nsList)},handleChange:function(e){console.log("%c选择德服务分类","color:#70ff57;font-size:20px;font-weight:bold",e,this.form.region)},fList:function(e){console.log("选择的",e)},chRadio:function(e){console.log(e),this.showHour=2==e},close:function(){this.$emit("closeNs")},save:function(){var e=this;this.$emit("saveNs");var t,o,a,s,i,r,n=this.form;""!=n.region?(t=n.region[0].split(",")[0],o=n.region[1].split(",")[0],a=n.region[2].split(",")[0],s=n.region[0].split(",")[1],i=n.region[1].split(",")[1],r=n.region[2].split(",")[1]):alert("请选择服务分类"),console.log(t,s,o,i,a,r),this.getNewServe(n.name,t,s,o,i,a,r,n.buy,n.model),setTimeout(function(){e.form={name:"",region:"",hour:"",price:"",buy:"",model:""}},2e3)},confirm:function(){var e=this;this.$emit("sendNs");var t,o,a,s,i,r,n=this.form;""!=n.region?(t=n.region[0].split(",")[0],o=n.region[1].split(",")[0],a=n.region[2].split(",")[0],s=n.region[0].split(",")[1],i=n.region[1].split(",")[1],r=n.region[2].split(",")[1]):alert("请选择服务分类"),console.log("分类",t,s,o,i,a,r),this.getNewServe(n.name,t,s,o,i,a,r,n.buy,n.model),setTimeout(function(){e.form={name:"",region:"",hour:"",price:"",buy:"",model:""}},2e3)},getNewServe:function(e,t,o,a,s,i,r,n,l){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"2",type:"2",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:a,twoCategoryName:s,threeCategoryCode:i,threeCategoryName:r,standardPrice:n,createName:"fnb",createCode:"007",templateCode:l}).then(function(e){console.log("新建服务结果",e),"10000"==e.code||alert(e.message)})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Te=Ie,Ae=(o("2d4b"),Object(l["a"])(Te,Oe,$e,!1,null,"08c56b3a",null)),Pe=Ae.exports,Me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建商品","close-on-click-modal":!1,center:"",visible:e.npIsShow,width:"50%"},on:{"update:visible":function(t){e.npIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"商品(配件)名称"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"商品(配件)分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择商品分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-input",{attrs:{placeholder:'如"米其林"等'},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),o("el-form-item",{attrs:{label:"规格"}},[o("el-input",{attrs:{placeholder:'如"255/60R18"、"J000823"等'},model:{value:e.form.spe,callback:function(t){e.$set(e.form,"spe",t)},expression:"form.spe"}})],1),o("el-form-item",{attrs:{label:"计量单位"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择计量单位"},on:{focus:e.getUnit},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.unit,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("span",[e._v(e._s(t))])])}),1)],1),o("el-form-item",{attrs:{label:"商品(配件)售价"}},[o("el-input",{attrs:{placeholder:"¥0"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),o("el-form-item",{attrs:{label:"原厂编码"}},[o("el-input",{attrs:{placeholder:"请输入原厂编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),o("el-form-item",{attrs:{label:"库存阈值"}},[o("el-input",{attrs:{placeholder:"请输入安全库存预警值"},model:{value:e.form.repertory,callback:function(t){e.$set(e.form,"repertory",t)},expression:"form.repertory"}})],1),o("el-form-item",{attrs:{label:"配件编码"}},[o("el-input",{attrs:{placeholder:"请输入商品配件编码"},model:{value:e.form.coding,callback:function(t){e.$set(e.form,"coding",t)},expression:"form.coding"}})],1),o("el-form-item",{attrs:{label:"厂家类型"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择厂家类型"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.type,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"条形码"}},[o("el-input",{attrs:{placeholder:"请输入条形码"},model:{value:e.form.barCode,callback:function(t){e.$set(e.form,"barCode",t)},expression:"form.barCode"}})],1),o("el-form-item",{attrs:{label:"商品(配件)介绍"}},[o("el-input",{attrs:{placeholder:"请输入商品介绍、例如：库存/规格/品牌等",type:"textarea"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)},Ve=[],De={components:{},props:{npIsShow:{type:Boolean},searchList:Array},data:function(){return{showHour:!1,radio:"1",chooseRadio:null,type:[{label:"原厂件",value:"1"},{label:"品牌件",value:"2"},{label:"副厂件",value:"3"},{label:"拆解件",value:"4"},{label:"修复件",value:"5"},{label:"假货",value:"6"}],unit:[],form:{name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""},newProduct:!0,tel:""}},computed:{},methods:{getUnit:function(){var e=this;this.$http.get("/laborSynthesize/getUnit",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?e.unit=t.data:alert(t.message)})},handleChange:function(e){console.log(e)},close:function(){this.$emit("closeNp")},save:function(){var e=this;this.$emit("saveNp");var t,o,a,s,i,r,n=this.form;""!=n.region?(t=n.region[0].split(",")[0],o=n.region[1].split(",")[0],a=n.region[2].split(",")[0],s=n.region[0].split(",")[1],i=n.region[1].split(",")[1],r=n.region[2].split(",")[1]):alert("请选择商品分类"),this.addNewProduct(n.name,t,s,o,i,a,r,n.price,n.brand,n.spe,n.unit,n.code,n.model,n.barCode,n.text),setTimeout(function(){e.form={name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""}},2e3)},confirm:function(){var e=this;this.$emit("sendNp");var t,o,a,s,i,r,n=this.form;""!=n.region?(t=n.region[0].split(",")[0],o=n.region[1].split(",")[0],a=n.region[2].split(",")[0],s=n.region[0].split(",")[1],i=n.region[1].split(",")[1],r=n.region[2].split(",")[1]):alert("请选择商品分类"),console.log("分类",t,s,o,i,a,r),this.addNewProduct(n.name,t,s,o,i,a,r,n.price,n.brand,n.spe,n.unit,n.code,n.model,n.barCode,n.text),setTimeout(function(){e.form={name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""}},2e3)},addNewProduct:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"1",type:"1",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:a,twoCategoryName:s,threeCategoryCode:i,threeCategoryName:r,standardPrice:n,createName:"fnb",createCode:"007",brandName:l,specification:c,unit:d,oemCode:u,quality:p,snCode:m,description:h}).then(function(e){console.log("请求新建商品结果",e),"10000"==e.code||alert(e.message)})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ze=De,Ee=(o("674e"),Object(l["a"])(ze,Me,Ve,!1,null,"310a9646",null)),Ge=Ee.exports,Fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"setCar"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑车辆",center:"",visible:e.setCarshow,width:"30%","show-close":!1},on:{"update:visible":function(t){e.setCarshow=t}}},[o("div",{staticClass:"d-flex"},[o("carNum",{staticStyle:{width:"100%"},model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},je=[],Be={name:"setCar",components:{carNum:V},props:{setCarshow:{type:Boolean}},data:function(){return{carAbb:"",carAbbs:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],setCar:!0,carNum:"",plateNumber:""}},computed:{},methods:{close:function(){this.$emit("closeCarAlert",this.$props.setCarshow)},carConfirm:function(){this.$emit("carConfirm",this.$props.setCarshow,this.plateNumber)}},mounted:function(){},created:function(){}},qe=Be,Re=(o("30f2"),Object(l["a"])(qe,Fe,je,!1,null,"a396fae8",null)),Ke=Re.exports,We=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"useVip"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"使用他人会员卡",center:"",visible:e.usevip,width:"30%","show-close":!1},on:{"update:visible":function(t){e.usevip=t}}},[o("div",[o("el-input",{attrs:{placeholder:"请输入客户姓名、手机号进行搜索","suffix-icon":"el-icon-search",size:"mini"},on:{input:e.changeInput},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),o("el-table",{directives:[{name:"show",rawName:"v-show",value:e.showData,expression:"showData"}],staticStyle:{width:"100%",background:"#F2F2F2"},attrs:{data:e.tableData},on:{"row-click":e.rowClick}},[o("el-table-column",{attrs:{prop:"name",label:"客户姓名",align:"center"}}),o("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},Ue=[],Je={props:{usevip:{type:Boolean},vehicleId:String},components:{},data:function(){return{showData:!1,restaurants:[],state:"",tableData:[]}},computed:{},methods:{rowClick:function(e){console.log("%c点击的行","color:#70ff57;font-size:20px;font-weight:bold",e),this.state=e.name+"/"+e.phone,this.condition=e.customerCode,this.showData=!1},changeInput:function(){var e=this;this.$http.get("/LaborFastOrder/searchCustomer",{merchantCode:this.merchantCode,vehicleId:this.$props.vehicleId,keyWords:this.state}).then(function(t){console.log("%c请求模糊搜索结果","color:red;font-size:20px",t),"10000"==t.code?(e.showData=!0,e.tableData=t.data):alert(t.message)})},close:function(){this.$emit("closeVipAlert",this.$props.usevip)},carConfirm:function(){this.$emit("vipConfirm",this.condition,this.state)},querySearch:function(e,t){var o=this.restaurants,a=e?o.filter(this.createFilter(e)):o;t(a)},createFilter:function(e){return function(t){return 0===t.cName.toLowerCase().indexOf(e.toLowerCase())||0===t.phone.toLowerCase().indexOf(e.toLowerCase())||0===t.carNum.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log("点击",e),this.state=e.cName+"/"+e.phone+"/"+e.carNum,this.otherName=e.cName,this.otherPhone=e.phone,this.otherCar=e.carNum},handleIconClick:function(e){console.log("bi",e)},loadAll:function(){return[{cName:"张三",phone:"155280324555",carNum:"川Q1293"},{cName:"李四",phone:"12320324555",carNum:"川A12333"},{cName:"王麻子",phone:"15120324555",carNum:"川M18273"}]}},mounted:function(){this.restaurants=this.loadAll()},created:function(){this.merchantCode=this.$route.query.merchantCode}},He=Je,Xe=(o("2132"),Object(l["a"])(He,We,Ue,!1,null,"49c5faa0",null)),Qe=Xe.exports,Ye=(new a["default"],{components:{newproduct:Ge,newserve:Pe,setCar:Ke,uservip:Qe},data:function(){return{customerCodeOther:"",customerNameOther:"",customerPhoneOther:"",choosedAlert:[],remarsk:"",brand:[],series:[],brandName:"",seriesName:"",workorderTime:"",showSwitch:!0,state:null,isThereVip:null,npIsShow:!1,nsIsShow:!1,nsList:null,options:null,carNone:"",customerCode:null,cur:0,tabTitle:["服务","商品"],showInput:!1,serverSelected:[],serverList:[],searchShow:!1,searchList:[],isCarShow:!1,carList:[],carList1:[],carList2:[],allNum:0,checkServer2:[],sCheck:[],checkServer:[],fCheck:[],vipbox:[],vipBoxCur:"",usevip:null,otherName:"",otherPhone:"",otherCar:"",radio:null,search:"",orderTime:"今天",amgValue:"",amg:[],carType:"",carTypes:[],buyer:"0",carColor:"",carDate:"",carVin:"",carKil:"",carAddEngine:"",carAddName:null,carAddTel:null,setCarshow:!1,vehicleId:null,carNum:"暂无车牌",dis:!1,choosed:[]}},computed:{allCarNum:function(){var e=0;return this.carList.map(function(t){e+=t.goodsCount}),e}},created:function(){var e=this;if(this.getBrand(),this.merchantCode=this.$route.query.merchantCode,this.useType=this.$route.query.type,this.orderId=this.$route.query.orderid,this.workOrderCode=this.$route.query.workOrderCode,"has"==this.$route.query.has&&(this.carNum=this.$route.query.carNum,this.showInput=!0,this.inputVipList(this.carNum)),"look"==this.$route.query.type){var t="";this.getLookList(t),this.dis=!0,this.carNone="none",this.showInput=!0,setTimeout(function(){e.fCheck=e.choosed,e.carList=e.choosed,console.log("查看",e.fCheck,e.carList)},2800)}else if("copy"==this.$route.query.type||"set"==this.$route.query.type){var o="copy";this.getLookList(o),this.dis=!1,this.carNone="hidden",this.showInput=!0,this.getFcheck(),setTimeout(function(){var t=[],o=[],a=[],s=[];e.choosed.map(function(s){null==s.goodsVipId&&(e.fCheck.map(function(e){s.goodsName==e.goodsName&&(e.mapList=s.mapList,e.goodsCount=s.goodsCount,e.isGift=s.isGift,t.push(e))}),console.log("arr",t)),null!=s.goodsVipId&&(console.log("使用他人会员卡",e.sCheck),e.sCheck.map(function(e){null!=e.laborItemsVoList&&e.laborItemsVoList.length>0&&e.laborItemsVoList.map(function(e){s.goodsName+s.goodsVipId==e.goodsName+e.goodsVipId&&(e.mapList=s.mapList,e.isGift=s.isGift,e.goodsCount=s.goodsCount,o.push(e))}),null!=e.freeItemsVoList&&e.freeItemsVoList.length>0&&e.freeItemsVoList.map(function(e){console.log(e.goodsName+e.goodsVipId),s.goodsName+s.goodsVipId==e.goodsName+e.goodsVipId&&(e.goodsCount=s.goodsCount,e.isGift=s.isGift,a.push(e))})}))});for(var i=0;i<e.choosed.length;i++)if(null==e.choosed[i].goodsVipId){for(var r=e.choosed[i],n=r.goodsName,l=!1,c=0;c<t.length;c++){var d=t[c],u=d.goodsName;if(u==n){l=!0;break}}l||s.push(r)}e.choosedAlert=e.uniqs(s),e.fCheck=e.fCheck.concat(e.uniqs(s)),e.checkServer=t.concat(e.uniqs(s)),e.checkServer2=o.concat(a),e.carList=o.concat(t).concat(a).concat(e.uniqs(s))},2800)}else this.getFcheck(),this.getCarBrand()},methods:{addNew:function(e,t,o){var a=this,s="",i="";null!=this.carType&&(s=this.carType.split("/")[1]),null!=this.amgValue&&(i=this.amgValue.split("/")[1]),this.$http.post("/laborSynthesize/addCarAndCustomer",{plateNumber:e,phone:t,name:o,vehicleIdNum:this.carVin,engineNum:this.carAddEngine,registeredDate:this.carDate,brandName:s,modelName:i,seriesName:i,lastMileage:this.carKil,carColor:this.carColor,source:"S",merchantCode:this.merchantCode}).then(function(e){"10000"==e.code?(a.vehicleId=e.data.vehicleId,a.customerCode=e.data.customerCode):alert(e.message)})},getRowKeys:function(e){return e.goodsCode},dm:function(){console.log("dis",this.dis)},getLookList:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:2}).then(function(e){if("10000"==e.code){if(o.isMyCard=e.data.isMyCard,1==e.data.isMyCard){o.radio=!0;var t=e.data.customerNameOther+"/"+e.data.customerPhoneOther;o.state=t,o.customerCodeOther=e.data.customerCodeOther||"",o.customerNameOther=t.split("/")[0]||"",o.customerPhoneOther=t.split("/")[1]||""}else o.radio=!1;o.remarsk=e.data.remarks;var a=e.data.seriesName,s=e.data.modelName;o.brand.map(function(t){e.data.brandName==t.brandName&&(o.brandName=t.value,o.chCar(t.value))}),setTimeout(function(){var e=o;e.series.map(function(t){if(a==t.label){var o=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==s&&(e.seriesName=[o,t.value])})},1500)}})},1500),o.radio?o.getOther(e.data.plateNumber):o.inputVipList(e.data.plateNumber),setTimeout(function(){o.carNum=e.data.plateNumber,o.carAddTel=e.data.customerPhone,o.carAddName=e.data.customerName,o.carKil=e.data.mileage,o.carDate=e.data.applyDate,o.carAddEngine=e.data.engineNum,o.carVin=e.data.vehicleIdNum,o.carColor=e.data.carColor,o.carType=e.data.modelName,o.amgValue=e.data.seriesName,o.choosed=e.data.laborGoodsVoList,o.customerCode=e.data.customerCode,o.orderStatus=e.data.status,o.workorderTime=e.data.workorderTime},2e3)}else alert(e.message)});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getOther:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){if("10000"==e.code){t.buyer=e.data.buyoncreditMoney||0;var o=e.data.seriesName,a=e.data.modelName;if(t.brand.map(function(o){e.data.brandName==o.brandName&&(t.brandName=o.value,t.chCar(o.value))}),setTimeout(function(){var e=t;e.series.map(function(t){if(o==t.label){var s=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==a&&(e.seriesName=[s,t.value])})},1500)}})},1500),0==e.data.canUseNum?t.isThereVip=0:t.isThereVip=1,t.carAddTel=e.data.customerPhone,t.carAddName=e.data.customerName,t.carKil=e.data.lastMileage,t.carDate=e.data.registeredDate,t.carAddEngine=e.data.engineNum,t.carVin=e.data.vehicleIdNum,t.carColor=e.data.vehicleColor,t.goodsVipId=e.data.customerMemberCardId,t.merchantName=e.data.merchantName,t.merchantPhone=e.data.merchantPhone,t.vehicleId=e.data.vehicleId,t.customerCode=e.data.customerCode,t.showInput=!0,t.sCheck=[],e.data.vipGoodsList){var s=[],i=[],r=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),i.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),r.push(e))}),t.sCheck=t.deWeight(s).concat(t.deWeight(i).concat(t.deWeight(r))),t.getVipProduct(t.customerCodeOther)}}else alert(e.message)})},getFcheck:function(){var e=this;this.$http.get("/LaborGoods/findFastOrderGoods",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.goodsVipId=null,e.goodsCount=1}),e.fCheck=t.data)})},getVipProduct:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/LaborFastOrder/findOtherVipGoods",{merchantCode:this.merchantCode,customerCode:t}).then(function(e){if("10000"==e.code){if(e.data){var t=[],a=[],s=[];e.data.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=2,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),t.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),a.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e))}),o.sCheck=o.sCheck.concat(o.deWeight(t).concat(o.deWeight(a).concat(o.deWeight(s))))}o.radio=!0}else alert(e.message),o.radio=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),inputVipList:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){if("10000"==e.code){t.buyer=e.data.buyoncreditMoney||0;var o=e.data.seriesName,a=e.data.modelName;if(t.brand.map(function(o){e.data.brandName==o.brandName&&(t.brandName=o.value,t.chCar(o.value))}),setTimeout(function(){var e=t;e.series.map(function(t){if(o==t.label){var s=t.value;e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==a&&(e.seriesName=[s,t.value])})},1500)}})},1500),0==e.data.canUseNum?t.isThereVip=0:t.isThereVip=1,t.carAddTel=e.data.customerPhone,t.carAddName=e.data.customerName,t.carKil=e.data.lastMileage,t.carDate=e.data.registeredDate,t.carAddEngine=e.data.engineNum,t.carVin=e.data.vehicleIdNum,t.carColor=e.data.vehicleColor,t.goodsVipId=e.data.customerMemberCardId,t.merchantName=e.data.merchantName,t.merchantPhone=e.data.merchantPhone,t.vehicleId=e.data.vehicleId,t.customerCode=e.data.customerCode,t.showInput=!0,t.sCheck=[],e.data.vipGoodsList){var s=[],i=[],r=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),i.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),r.push(e))}),t.sCheck=t.deWeight(s).concat(t.deWeight(i).concat(t.deWeight(r)))}}else alert(e.message)})},vipChange:function(e){this.vipbox=e.name},chCar2:function(){var e=this;this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(t){"10000"==t.code?e.amg=t.data:alert(t.message)})},toBill:function(){var e=this;""==this.carAddTel||null==this.carAddTel?alert("请填入手机号"):""==this.carAddName||null==this.carAddName?alert("请填入姓名"):(null==this.vehicleId&&this.addNew(this.carNum,this.carAddTel,this.carAddName),setTimeout(function(){var t,o,a="",s="",i="";console.log("车型车系",e.brandName,e.seriesName),null!=e.brandName&&""!=e.brandName&&(a=e.brandName.split("/")[1]),null!=e.seriesName&&""!=e.seriesName&&(i=e.seriesName[1].split("/")[1],s=e.seriesName[0].split("/")[1]),console.log("车",a,s,i),1==e.radio?(t=1,o=1):(t=0,o=2);var r=e.useType,n=e.orderId;console.log("type",r,n);var l=e.workOrderCode;0==e.carList.length?e.$alert("请选择商品","提示",{confirmButtonText:"确定"}):(console.log(e.customerCodeOther,e.customerPhoneOther,e.customerNameOther),e.$store.commit("list",e.carList),e.$router.push({path:"/quickOrderBill",query:{customerCodeOther:e.customerCodeOther,customerPhoneOther:e.customerPhoneOther,customerNameOther:e.customerNameOther,remarsk:e.remarsk,isThereVip:e.isThereVip,merchantPhone:e.merchantPhone,merchantName:e.merchantName,orderid:n,workOrderCode:l,type:r,merchantCode:e.merchantCode,plateNumber:e.carNum,goodsVipId:e.goodsVipId,goodsCome:o,isMyCard:t,customerName:e.carAddName,customerPhone:e.carAddTel,mileage:e.carKil,engineNum:e.carAddEngine,vehicleIdNum:e.carVin,applyDate:e.carDate,carColor:e.carColor,brandName:a,modelName:i,seriesName:s,customerCode:e.customerCode,workorderTime:e.workorderTime,orderStatus:e.orderStatus}}))},2e3))},searchShowClick:function(){this.searchShow=!0,this.getTree("S01")},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S01",type:e}).then(function(e){console.log("%c请求新建服务分类的 一 二 三级列表结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.searchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}))})},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(o.serverList=e.data)})},tabChangess:function(e){console.log("选中的选项",e),this.cur=e;var t="S01";t=0==e?"S01":"S02",this.getTree(t)},delSelected:function(e){var t,o=this;this.serverList.map(function(o,a){e==o.goodsCode&&(t=a)}),this.$refs.multipleTable.toggleRowSelection(this.serverList[t],!1),this.fCheck.map(function(e,a){o.serverList[t]==e&&o.fCheck.splice(a,1)}),this.carList.map(function(e,a){console.log("删除购物车"),o.serverList[t]==e&&(console.log("删除购物车下标",a,t),o.carList.splice(a,1))})},serverChecked:function(e){console.log("勾选选项",e),this.serverSelected=e},handleClassify:function(e){var t=this;this.getThree(e.code,"3"),console.log("二级分类",e,this.choosedAlert),setTimeout(function(){t.serverList.map(function(e,o){t.choosedAlert.forEach(function(a){console.log(a.goodsCode==e.goodsCode),a.goodsCode==e.goodsCode&&t.$refs.multipleTable.toggleRowSelection(t.serverList[o],!0)})})},1500)},close:function(){this.searchShow=!1},onfirm:function(){var e=this;this.searchShow=!1,this.serverSelected.map(function(e){e.goodsCome=3,e.goodsCount=1,e.num=e.goodsCount}),this.serverSelected.map(function(t,o){e.fCheck.map(function(o,a){t.goodsName==o.goodsName&&e.fCheck.splice(a,1)})}),this.fCheck=this.fCheck.concat(this.serverSelected),this.serverSelected.map(function(t,o){e.checkServer.map(function(o,a){t.goodsName==o.goodsName&&e.checkServer.splice(a,1)})}),this.checkServer=this.checkServer.concat(this.serverSelected),this.carList=this.deWeight(this.checkServer)},handleOpen:function(e){console.log("打开二级列表",e)},handleClose:function(e){console.log("关闭二级列表",e)},getSummaries:function(e){var t=e.columns,o=e.data,a=[],s=[];return console.log("params",e),t.forEach(function(e,t){if(0!==t){if(s="price"==e.property?o.map(function(e){return Number(e.goodsCount*e.price)}):o.map(function(e){return Number(e["goodsCount"])}),"price"==e.property)s.every(function(e){return isNaN(e)})||(a[t]=s.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),a[t]+=" 元");else if("goodsCount"==e.property){var i=o.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})||(a[t]=i.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),a[t]+=" 件")}}else a[t]="总计"}),a},carGoodsCount:function(e,t){this.$set(this.carList,e,t),this.$store.commit("list",this.carList)},handleDelete:function(e,t){var o=this;this.carList.splice(e,1),this.checkServer.map(function(e,a){t==e&&(o.checkServer.splice(a,1),o.carList1.splice(a,1))}),this.checkServer2.map(function(e,a){t==e&&(o.checkServer2.splice(a,1),o.carList2.splice(a,1))}),this.$refs.multipleTable.selection.map(function(e,a){t==e&&(console.log("删除",t.goodsName,a),o.$refs.multipleTable.toggleRowSelection(e,!1))})},clearAll:function(e){this.carList=[],this.checkServer=[],this.checkServer2=[],this.carList1=[],this.carList2=[],this.$refs.multipleTable.clearSelection()},closeCar:function(){this.isCarShow=!1},showCar:function(){console.log("打开购物车弹窗"),this.isCarShow=!0},checkGroup:function(e){},checkGroup2:function(e){},showChecked:function(){console.log("展示的",this.checkServer)},checkChange:function(e,t){t.num=1,t.goodsCount=t.num;var o=this.uniqs(this.checkServer),a=[];o.map(function(e){a.push(e)}),console.log("选择的商品自带商品",this.carList1,this.carList2),this.carList=this.checkServer.concat(this.checkServer2)},checkChange2:function(e,t){t.num=1;var o=this.deWeight(this.checkServer2),a=[];o.map(function(e){a.push(e)}),console.log("选择的会员卡商品",a),this.carList=this.checkServer2.concat(this.checkServer)},closeVipAlert:function(e){this.usevip=!1,this.radio=!1},sendVipData:function(e,t){this.state=t,this.showInput=!0,this.usevip=!1,console.log("他人会员卡",e,t,t.split("/")[0]),this.customerCodeOther=e||"",this.customerNameOther=t.split("/")[0]||"",this.customerPhoneOther=t.split("/")[1]||"",this.getVipProduct(e)},check:function(){null!=this.vehicleId?this.radio?this.usevip=!0:(""!=this.customerCodeOther&&this.delObj(this.carNum),this.otherName="",this.otherPhone="",this.otherCar="",this.state=""):(this.$alert("使用他人会员卡请先输入正确车牌号","提示",{confirmButtonText:"确定"}),this.radio=!1)},delObj:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){if(console.log("请求输入车牌号结果",e.data.vehicleId,e),"10000"==e.code){if(t.customerCode=e.data.customerCode,t.sCheck=[],e.data.vipGoodsList){var o=[],a=[],s=[];e.data.vipGoodsList.map(function(e){3==e.memberCardType?(e.laborItemsVoList.map(function(t){t.goodsCount=1,t.num=t.goodsCount,t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),o.push(e)):1==e.memberCardType?(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),a.push(e)):2==e.memberCardType&&(e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsCount=1,t.num=t.goodsCount,t.goodsVipId=e.customerMemberCardId}),s.push(e))}),t.sCheck=t.deWeight(o).concat(t.deWeight(a).concat(t.deWeight(s)))}}else alert(e.message)})},closeCarAlert:function(e){this.setCarshow=!1},sendCarData:function(e,t){this.state="",this.radio=!1,this.setCarshow=!1,this.carNum=t,this.inputVipList(t),this.showInput=!0},setCar:function(){this.setCarshow=!0},getCarBrand:function(){var e=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.value=e.brandId,e.label=e.brandName}),e.carTypes=t.data)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求获取车辆品牌列表结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})},chCar:function(e){var t=this;console.log("选择品牌后的值",e),""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求获取车辆车系列表结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getSeriesList2:function(e){var t=this;this.$http.get("/laborSynthesize/getModelList",{familyId:e}).then(function(e){"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){"10000"==t.code&&(e.nsList=t.data)}),this.getOptions("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},openNp:function(){var e=this;this.npIsShow=!0,this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S02"}).then(function(t){"10000"==t.code?(t.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),e.options=t.data):alert(t.message)})},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},deWeight2:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o].goodsCode)&&t.push(e[o]);return t},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t},inputTel:function(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;t.test(e)||(this.$message.error("请输入正确的手机号"),this.carAddTel="")}}}),Ze=Ye,et=(o("64b5"),Object(l["a"])(Ze,Ne,Le,!1,null,"2207c9e4",null)),tt=et.exports,ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"quickOrderBill"},[o("div",{staticClass:"choose",staticStyle:{"padding-left":"30px"}},[e._v("\n\t\t已选\n\t\t"),o("span",{staticStyle:{color:"#0000FF"}},[e._v(e._s(e.List.length))]),e._v("\n\t\t个项目\n\t")]),o("div",{staticStyle:{"padding-left":"30px","margin-top":"20px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"20px",backgroundColor:"#d7d7d7"},data:e.List}},[o("el-table-column",{attrs:{align:"center",prop:"name",label:"名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"单价",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,disabled:0==e.dis?1==t.row.isGift:e.dis,size:"mini",label:"描述文字"},on:{change:function(o){return e.handleChange(t.$index,t.row)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotal",label:"小计",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotal))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"deduct",label:"提成",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.deduct))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"emp",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.List)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.List)}}},[e._v("删除")])],1),0==t.row.isGift?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1)],1),o("div",{staticClass:"d-flex remark"},[o("div",[e._v("本次备注:")]),o("div",{staticStyle:{width:"300px"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入备注信息(打印单显示,最多120字)",clearable:"",disabled:e.dis},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",color:"#000000","font-size":"18px"}},[e._v("\n\t\t\t总价:\n\t\t\t"),o("span",{staticStyle:{color:"#FF0000","font-size":"32px"}},[e._v("¥"+e._s(e.all2))])]),o("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.goquick}},[e._v("继续添加项目")]),o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),o("div",{staticClass:"d-flex"},["set"!=e.useType||"0"==e.orderStatus?o("el-button",{attrs:{type:"primary",size:"small",disabled:e.dis},on:{click:e.goList}},[e._v("开单")]):e._e()],1),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"10px"}},[3!=e.orderStatus&&2!=e.orderStatus?o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.setCompAlert}},[e._v("完工")]):e._e()],1)]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("buyer",{attrs:{carNumber:e.carNumber,buyerAlert:e.buyerAlert},on:{closeBuyerAlert:e.closeBuyerAlert,buyerConfirm:e.sendBuyerData}}),o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%"},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeCompAlert}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger"},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},at=[],st=o("bd86"),it=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},rt=[],nt={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){console.log("选择员工确认弹窗",this.checkList,this.checkList2),this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},lt=nt,ct=(o("901d"),Object(l["a"])(lt,it,rt,!1,null,"4596af06",null)),dt=ct.exports,ut=Object(st["a"])({components:{emp:dt,buyer:fe,comp:ce},data:function(){return{isFirstEnter:!1,carNumber:null,mapList:null,form:{},buyerAlert:!1,isShowFinish:!1,tel:null,chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,inputShow:!1,inputShow2:!1,allArr:[],all:0,remark:"",List:[],dis:!1}},computed:{all2:function(){return this.all.toFixed(2)}},watch:{},created:function(){var e=this;this.isFirstEnter=!0,this.createId=localStorage.getItem("createId"),console.log("创建",this.createId),this.isThereVip=this.$route.query.isThereVip,this.orderStatus=this.$route.query.orderStatus,0==this.orderStatus?this.statusList=1:this.statusList="",console.log("订单状态",this.orderStatus);var t=this.$route.query,o=this.form;console.log("车辆注册日期",t),this.remark=t.remarsk,this.useType=this.$route.query.type,this.carNumber=t.plateNumber,this.merchantCode=this.$route.query.merchantCode,this.merchantPhone=o.merchantPhone,this.merchantName=o.merchantName,this.customerCodeOther=t.customerCodeOther,this.customerPhoneOther=t.customerPhoneOther,this.customerNameOther=t.customerNameOther,console.log("使用他人会员卡",this.customerPhoneOther,this.customerNameOther,this.customerCodeOther),o.workOrderCode=t.workOrderCode,o.orderId=t.orderid,o.goodsCome=t.goodsCome,o.goodsVipId=t.goodsVipId,o.customerName=t.customerName,o.customerPhone=t.customerPhone,o.plateNumber=t.plateNumber,o.mileage=t.mileage,o.engineNum=t.engineNum,o.vehicleIdNum=t.vehicleIdNum,o.applyDate=t.applyDate,o.carColor=t.carColor,o.brandName=t.brandName,o.modelName=t.modelName,o.seriesName=t.seriesName,o.customerCode=t.customerCode,o.isMyCard=t.isMyCard,o.workorderTime=t.workorderTime,"set"==this.useType||"copy"==this.useType||"look"==this.useType?this.$store.state.carList.map(function(e){void 0==e.mapList&&(e.mapList=[]),1==e.isGift?e.subtotal=0:e.subtotal=e.goodsCount*e.price,e.deduct=0}):this.$store.state.carList.map(function(e){1==e.isGift?e.subtotal=0:e.subtotal=Number(e.goodsCount)*Number(e.price),e.sell=null,e.road=null,e.deduct=0}),"look"==this.$route.query.type&&(this.dis=!0),this.List=this.$store.state.carList,this.List.map(function(t){t.isGift=t.isGift||0,e.all+=t.subtotal}),this.$store.commit("list",this.List)},methods:{setBillOrder:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_){var x=this;this.$http.post("/LaborFastOrder/addLaborOrder",{merchantCode:this.merchantCode,workOrderCode:this.form.workOrderCode,brandName:this.form.brandName,orderId:e,goodsCome:t,goodsVipId:o,type:a,workorderType:s,customerName:i,customerPhone:r,plateNumber:n,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,employeeId:v,updateId:g,workOrderTime:b,isMyCard:y,remarks:C,totalMoney:w,laborOrderGoodsList:_}).then(function(e){console.log("请求结果",e),"10000"==e.code?x.$router.push({path:"/",query:{merchantCode:x.merchantCode}}):alert(e.message)})},billing:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_,x){var k=this;this.$http.post("/LaborFastOrder/addLaborOrder",{customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,isThereVip:this.isThereVip,merchantCode:this.merchantCode,status:this.statusList,brandName:this.form.brandName,workOrderCode:e,orderId:t,goodsCome:o,goodsVipId:a,type:s,workorderType:i,customerName:r,customerPhone:n,plateNumber:l,mileage:c,engineNum:d,vehicleIdNum:u,applyDate:p,carColor:m,modelName:h,seriesName:f,customerCode:v,employeeId:g,updateId:b,workOrderTime:y,isMyCard:C,remarks:w,totalMoney:_,laborOrderGoodsList:x}).then(function(e){console.log("新增工单请求结果",e),1e4==e.code?(k.$router.push({path:"/",query:{merchantCode:k.merchantCode}}),k.$destroy("quickOrder")):alert(e.message)})},finish:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_,x,k,S,N){var L,O,$,I=this;console.log("传递",this.useType,this.form.orderId),"set"==this.useType?(L=this.form.workOrderCode,O=this.form.orderId,$=2):(L=null,O=null,$=null),this.$http.post("/LaborFastOrder/sendSms",{customerCodeOther:this.customerCodeOther,customerPhoneOther:this.customerPhoneOther,customerNameOther:this.customerNameOther,isThereVip:this.isThereVip,merchantCode:this.merchantCode,brandName:this.form.brandName,status:$,orderId:O,workOrderCode:L,goodsCome:e,goodsVipId:t,type:o,workorderType:a,customerName:s,customerPhone:i,plateNumber:r,mileage:n,engineNum:l,vehicleIdNum:c,applyDate:d,carColor:u,modelName:p,seriesName:m,customerCode:h,employeeId:f,updateId:v,workOrderTime:g,isMyCard:b,remarks:y,totalMoney:C,laborOrderGoodsList:w,toPhone:this.tel,action:"WORK_ORDER_FINISHED",plateNum:this.carNumber,merchantName:this.form.merchantName,merchantPhone:this.form.merchantPhone}).then(function(e){console.log("请求完工结果",e),1e4==e.code?I.$router.push({path:"/",query:{merchantCode:I.merchantCode}}):alert(e.message)})},comConfirm:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List),this.isShowFinish=!1},noSend:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List),this.isShowFinish=!1},closeCompAlert:function(){this.isShowFinish=!1},setCompAlert:function(){this.isShowFinish=!0},buyerAjax:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_){var x,k,S,N=this;"set"==this.useType?(x=this.form.workOrderCode,k=this.form.orderId,S=4):(x=null,k=null),this.$http.post("/LaborFastOrder/buyoncredit",{status:S,isThereVip:this.isThereVip,isBuyoncredit:e,orderId:k,workOrderCode:x,merchantCode:this.merchantCode,goodsCome:t,goodsVipId:o,type:a,workorderType:s,customerName:i,customerPhone:r,plateNumber:n,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,createId:v,updateId:g,workOrderTime:b,isMyCard:y,remarks:C,totalMoney:w,laborOrderGoodsList:_}).then(function(e){console.log("请求挂账结果",e),"10000"==e.code?N.$router.push({path:"/",query:{merchantCode:N.merchantCode}}):alert(e.message)})},sendBuyerData:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal}),this.buyerAlert=!1,this.buyerAjax("2",e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},closeBuyerAlert:function(){this.buyerAlert=!1},setBuyerAlert:function(){this.buyerAlert=!0},goquick:function(){this.$store.commit("list",this.List),this.$router.go(-1)},save:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal});var e=this.form,t="",o="";"copy"==this.useType||void 0==this.useType?this.billing(o,t,e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List):"set"==this.useType&&this.setBillOrder(e.orderId,e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},goList:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal}),console.log("开单",this.List);var e=this.form,t="",o="";"set"==this.useType?(t=this.form.workOrderCode,o=this.form.orderId):(t="",o=""),this.billing(t,o,e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,this.createId,"007",e.workorderTime,e.isMyCard,this.remark,this.all2,this.List)},goClose:function(){this.$router.push({path:"/close",query:{id:"Agony"}})},changet:function(){var e=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(t,o){e+=t.subtotal*t.goodsCount}),this.all=parseFloat(e)},changet2:function(){this.inputShow2=!1},sendEmpData:function(e,t){this.empAlert=!1,console.log("销售施工",e,t);var o=[];""==e&&""==t||(o=e.concat(t)),this.List[this.chooseEmpidx].mapList=o,console.log("最后数组",o),this.$set(this.List,this.chooseEmpidx,this.List[this.chooseEmpidx])},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,console.log("显示弹窗",e,t),this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].code}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},set:function(e,t){var o=0;t.isGift=1,t.subtotal=0,t.goodsCount=1,console.log("最后欧的值",this.List),this.$set(this.List,e,t),this.List.forEach(function(e,t){o+=e.subtotal*e.goodsCount}),this.all=parseFloat(o),this.$store.commit("list",this.List)},deleteRow:function(e,t){console.log(e),this.List.splice(e,1);var o=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(e,t){o+=Number(e.subtotal)}),this.all=parseFloat(o),this.$store.commit("list",this.List)},handleChange:function(e,t){console.log(this.List);var o=0;console.log("变化的数据",this.List),this.List[e].subtotal=(Number(this.List[e].goodsCount)*Number(this.List[e].price)).toFixed(2),this.List.forEach(function(e,t){o+=Number(e.subtotal)}),console.log(this.List),this.all=parseFloat(o),this.$store.commit("list",this.List)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){}},"watch",{allPrice:function(){var e=this;this.List.map(function(t){e.all+=t.subtotal})}}),pt=ut,mt=(o("8466"),Object(l["a"])(pt,ot,at,!1,null,"1960a42e",null)),ht=mt.exports,ft=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"comprehensiveOrder"},[o("div",{staticClass:"header",staticStyle:{background:"#F2F2F2",padding:"10px 0px"}},[o("div",{staticClass:" center"},[o("div",{staticStyle:{"font-size":"32px",color:"#fff","font-weight":"bold","margin-right":"15px"}},[e._v("老用户搜索")]),o("div",{staticClass:"d-flex",staticStyle:{width:"400px"}},[o("el-input",{staticStyle:{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"},attrs:{disabled:"copy"==e.useType,placeholder:"根据客户姓名、电话、车牌号进行搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("el-button",{attrs:{type:"primary"},on:{click:e.searchOld}},[e._v("搜索")])],1),o("div",{staticStyle:{"margin-left":"15px","font-size":"24px",color:"#fff","font-weight":"bold"},on:{click:e.addUser}},[e._v("新增车辆/客户")])])]),o("div",{staticClass:"body"},[o("div",{staticClass:"b1"},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("车主信息")]),o("el-form",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"},attrs:{"label-position":"right","label-width":"120px",model:e.owner}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("label",{attrs:{slot:"label"},slot:"label"},[o("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("车牌号")]),o("el-input",{attrs:{disabled:e.dis||"copy"==e.useType},on:{change:e.importCarnum},model:{value:e.owner.plateNumber,callback:function(t){e.$set(e.owner,"plateNumber",t)},expression:"owner.plateNumber"}})],1),o("el-form-item",{attrs:{label:"客户手机号"}},[o("label",{attrs:{slot:"label"},slot:"label"},[o("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("客户手机号")]),o("el-input",{attrs:{disabled:e.dis},on:{change:e.inputTel},model:{value:e.owner.customerPhone,callback:function(t){e.$set(e.owner,"customerPhone",t)},expression:"owner.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.customerName,callback:function(t){e.$set(e.owner,"customerName",t)},expression:"owner.customerName"}})],1),o("el-form-item",{attrs:{label:"本次里程"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.lastMileage,callback:function(t){e.$set(e.owner,"lastMileage",e._n(t))},expression:"owner.lastMileage"}})],1),o("el-form-item",{attrs:{label:"下次保养里程"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请输入下次保养里程",disabled:e.dis},model:{value:e.owner.nextKeepFitKm,callback:function(t){e.$set(e.owner,"nextKeepFitKm",t)},expression:"owner.nextKeepFitKm"}},[o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(5e3),value:Number(e.owner.lastMileage)+Number(5e3)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(5e3)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(7500),value:Number(e.owner.lastMileage)+Number(7500)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(7500)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.lastMileage)+Number(1e4),value:Number(e.owner.lastMileage)+Number(1e4)}},[o("span",[e._v(e._s(Number(e.owner.lastMileage)+"+"+Number(1e4)+"km"))])])],1)],1),o("el-form-item",{attrs:{label:"下次保养日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"填写日期有助于提醒用户",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.nextKeepFitTime,callback:function(t){e.$set(e.owner,"nextKeepFitTime",t)},expression:"owner.nextKeepFitTime"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号",disabled:e.dis},model:{value:e.owner.vehicleIdNum,callback:function(t){e.$set(e.owner,"vehicleIdNum",t)},expression:"owner.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号",disabled:e.dis},model:{value:e.owner.engineNum,callback:function(t){e.$set(e.owner,"engineNum",t)},expression:"owner.engineNum"}})],1),o("el-form-item",{attrs:{label:"车辆注册日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请输入注册日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.applyDate,callback:function(t){e.$set(e.owner,"applyDate",t)},expression:"owner.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择",disabled:e.dis},on:{change:e.chCar},model:{value:e.owner.brandName,callback:function(t){e.$set(e.owner,"brandName",t)},expression:"owner.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车系车型"}},[o("el-cascader",{staticStyle:{width:"202px"},attrs:{disabled:e.dis,options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.owner.seriesName,callback:function(t){e.$set(e.owner,"seriesName",t)},expression:"owner.seriesName"}})],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色",disabled:e.dis},on:{input:e.ic},model:{value:e.owner.carColor,callback:function(t){e.$set(e.owner,"carColor",t)},expression:"owner.carColor"}})],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择保险到期日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.compulsoryInsureDeadline,callback:function(t){e.$set(e.owner,"compulsoryInsureDeadline",t)},expression:"owner.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择年检日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.annualInspectDate,callback:function(t){e.$set(e.owner,"annualInspectDate",t)},expression:"owner.annualInspectDate"}})],1),o("el-form-item",{attrs:{label:"预计交车时间"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"datetime",placeholder:"请选择交车时间",disabled:e.dis,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.owner.estimateSubmit,callback:function(t){e.$set(e.owner,"estimateSubmit",t)},expression:"owner.estimateSubmit"}})],1)],1),o("div",{staticClass:"farewell"},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("送修人信息")]),o("div",{staticClass:"d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"26px","margin-right":"12px"}},[e._v("送修人姓名")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人姓名",disabled:e.dis},model:{value:e.owner.repairName,callback:function(t){e.$set(e.owner,"repairName",t)},expression:"owner.repairName"}})],1)]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"30px","margin-right":"12px"}},[e._v("送修人手机号")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人手机号",disabled:e.dis},on:{change:e.inputTel2},model:{value:e.owner.repairPhone,callback:function(t){e.$set(e.owner,"repairPhone",t)},expression:"owner.repairPhone"}})],1)])])])],1),o("div",{staticClass:"b2",staticStyle:{"font-size":"14px",background:"#fff","border-radius":"15px","margin-top":"10px","padding-left":"36px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",{},[e._v("其他信息")]),o("div",{staticStyle:{"margin-left":"25px"}},[o("el-checkbox",{on:{change:e.userVipChange},model:{value:e.useVip,callback:function(t){e.useVip=t},expression:"useVip"}},[e._v("使用他人会员卡")])],1),1==e.useVip?o("div",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.state))]):e._e(),o("el-button",{class:1==e.useVip?"c1":"",staticStyle:{"margin-right":"30px","margin-left":"45px"},attrs:{type:"text"},on:{click:function(t){1==e.useVip&&e.openVipPop()}}},[e._v("可用会员卡"+e._s(e.vipNum)+"张")]),o("div",{staticStyle:{color:"#999"}},[e._v("来店消费统计：来店消费"),o("span",[e._v(e._s(e.expense))]),e._v("次,消费"+e._s(e.price)+"元  挂账："+e._s(e.buyer)+"元")])],1),o("div",{staticClass:"lastTimeRemark"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",[e._v("上次备注：")]),o("div",[e._v(e._s(e.lastTimeRemark))])])])]),o("div",{staticClass:"b3",staticStyle:{background:"#fff","border-radius":"15px","margin-top":"10px","padding-top":"10px","padding-bottom":"10px"}},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("维修/保养项目(工时)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"服务名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"serviceTime",label:"服务时长",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.serviceTime||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"服务次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:null!=t.row.surplusCount?t.row.surplusCount:20,size:"mini",label:"描述文字",disabled:0==e.dis?1==t.row.isGift:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索服务名称",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNs}},[e._v("没搜到?新建服务")])],1)],1),o("b4",{attrs:{dis:e.dis,manOur:e.manOur2,customerCode:e.customerCode},on:{children:e.children1}}),o("b5",{attrs:{dis:e.dis,manOur:e.manOur3},on:{children:e.children2}}),o("b6",{attrs:{dis:e.dis,manOur:e.manOur4,useType:e.useType},on:{children:e.children3}}),o("b7",{attrs:{dis:e.dis,subjoin:e.subjoin,useType:e.useType},on:{selectChange:e.selectChange,priceChange:e.priceChange,remarksChange:e.remarksChange}}),o("div",{staticClass:"b8"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","margin-left":"36px"}},[o("h4",{staticStyle:{"margin-right":"20px"}},[e._v("备注")]),o("el-input",{staticStyle:{width:"900px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印单显示,最多120字)",disabled:e.dis},model:{value:e.otherRemark,callback:function(t){e.otherRemark=t},expression:"otherRemark"}})],1)])],1),o("div",{staticClass:"footer"},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end","align-items":"center","margin-right":"30px"}},[o("div",{staticClass:"font"},[e._v("总价：")]),o("div",{staticStyle:{color:"#ff0000","font-size":"30px"}},[e._v("¥"+e._s(e.allNums))]),o("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),"set"!=e.useType||"0"==e.orderStatus?o("div",[o("el-button",{attrs:{type:"primary",disabled:e.dis},on:{click:e.confirm}},[e._v("开单")])],1):e._e()])]),o("useOtherVip",{attrs:{usevip:e.usevip,vehicleId:e.vehicleId},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.vipConfirm}}),o("vippop",{attrs:{vipPop:e.vipPop,vipList:e.vipList,customerCode:e.cust},on:{closeVipPop:e.closeVipPop,confirmVipPop:e.confirmVipPop}}),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("nv",{attrs:{nvIsShow:e.nvIsShow,searchList:e.nvSearchList,customerCode:e.customerCode,fatherData:e.fatherData},on:{closeNv:e.closeNv,sendNv:e.sendNv}}),o("newServe",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),o("addcar",{attrs:{addUserIsShow:e.addUserIsShow},on:{closeAc:e.closeAc,sendAc:e.sendAc}})],1)},vt=[],gt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{staticStyle:{"margin-top":"0"},attrs:{visible:e.nvIsShow,width:"850px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.nvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff",color:"#FFFFFF"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:8}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:8}},[e._v("服务分类")]),o("el-col",{staticClass:"checked",staticStyle:{color:"#FFFFFF","font-size":"18px"},attrs:{span:8}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName,"row-key":e.getRowKey1,height:"500"},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{type:"expand","reserve-selection":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(t){return o("el-checkbox-group",{key:t,on:{change:function(o){return e.handleCheckAllChange(t)}},model:{value:e.checkboxGroup1,callback:function(t){e.checkboxGroup1=t},expression:"checkboxGroup1"}},[o("el-checkbox",{staticStyle:{width:"100%"},attrs:{label:t}},[o("span",[e._v(e._s(1==t.memberCardType?"通用储值卡":2==t.memberCardType?"限定储值卡":3==t.memberCardType?"次卡":4==t.memberCardType?"默认卡":"卡外"))]),0!=t.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.memberCardName))]):e._e(),3==t.memberCardType&&0!=t.memberCardType?o("span",[e._v("(余次"+e._s(t.surplusCount)+")")]):e._e(),3!=t.memberCardType&&0!=t.memberCardType?o("span",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.cardBalance))]):e._e(),o("span",{staticStyle:{"margin-left":"50px"}},[e._v("¥"+e._s(t.price))]),null!=t.serviceDiscount&&3!=t.memberCardType?o("span",{staticStyle:{padding:"4px 15px","border-radius":"7px","text-align":"center",background:"#169BD5",color:"#fff","margin-left":"10px"}},[e._v(e._s(10*Number(t.serviceDiscount))+"折\n\t\t\t\t\t\t\t\t\t\t\t")]):e._e()])],1)})}}])}),o("el-table-column",{attrs:{width:"200",prop:"name"}}),o("el-table-column",{attrs:{width:"260",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.twoCategoryName+"/"+t.row.threeCategoryName))])]}}])}),o("el-table-column",{attrs:{prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.standardPrice)+"\n\t\t\t\t\t\t\t\t")]):e._e(),t.row.list.length>1?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t有会员卡\n\t\t\t\t\t\t\t\t")]):e._e()]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},bt=[],yt=(g={components:{},props:{nvIsShow:Boolean,searchList:Array,customerCode:String},data:function(){return{getRowKey:function(e){var t=0;return t=e.code+e.goodsVipId,t},getRowKey1:function(e){return e.code},checkboxGroup1:[],checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[],multipleSelection:[]}},computed:{},watch:{},mounted:function(){}},Object(st["a"])(g,"watch",{}),Object(st["a"])(g,"methods",{handleCheckAllChange:function(e){console.log("勾选的",e)},print:function(){console.log(this.checkboxGroup1),console.log("答应",this.checkboxGroup1)},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},cellcb:function(e){if(e.list.length>0)return"myCell"},toggleRowExpansion:function(e,t){console.log("手风琴下拉列表",e,t),this.secondList=t.list},confirm:function(){var e=this.checkboxGroup1;this.checkboxGroup1.map(function(e){e.serviceTime=e.serviceMinutes}),console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",this.checkboxGroup1),this.$emit("sendNv",e)},close:function(){this.$emit("closeNv",!1)},serverChecked:function(e){console.log("勾选选项",e,this.serverSelected)},serverChecked2:function(e){console.log("内部的勾选项",e,this.serverList),this.arr3=this.$refs.multipleTable.selection,console.log("选择",this.$refs.multipleTable.selection,this.arr2),this.arr2=this.arr2.concat(this.arr3),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",this.arr2)},handleClassify:function(e){console.log("点击二级分类",e),console.log("请求的cust",this.$props.customerCode),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.$props.customerCode,categoryCode:e,level:"3"}).then(function(e){console.log("请求的书距",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,t.specification=e.specification,t.brandName=e.brandName,t.serviceMinutes=e.serviceMinutes,t.memberCardType,t.price=e.standardPrice,null==e.price&&(e.price=0),t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code,specification:e.specification,brandName:e.brandName,serviceMinutes:e.serviceMinutes})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}}),Object(st["a"])(g,"mounted",function(){}),Object(st["a"])(g,"created",function(){var e=this;this.$bus.$on("delRow",function(t){var o=e;console.log("刷新",t),o.checkboxGroup1.map(function(e,a){e.memberCardType+e.goodsCode+e.goodsName==t.memberCardType+t.goodsCode+t.goodsName&&o.checkboxGroup1.splice(a,1)}),console.log("值",e.checkboxGroup1)}),this.merchantCode=this.$route.query.merchantCode}),g),Ct=yt,wt=(o("81a0"),Object(l["a"])(Ct,gt,bt,!1,null,"34b2dbd5",null)),_t=wt.exports,xt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp,"show-close":!1},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},kt=[],St={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Nt=St,Lt=(o("d1df"),Object(l["a"])(Nt,xt,kt,!1,null,"0f79e27a",null)),Ot=Lt.exports,$t=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b4"},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("维修/保养项目(配件)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:0==e.dis?1==t.row.isGift:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"销售人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品")])],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList,customerCode:this.$props.customerCode},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},It=[],Tt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:7}},[e._v("商品名称")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:3}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{color:"#fff","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-size":"18px",color:"#fff"},attrs:{span:4}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName,height:"400"},on:{"expand-change":e.toggleRowExpansion,"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection"}}),o("el-table-column",{attrs:{type:"expand"},on:{click:function(t){return e.showSecond(e.scope.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(t){return o("el-checkbox-group",{key:t,on:{change:function(o){return e.handleCheckAllChange(t)}},model:{value:e.checkboxGroup1,callback:function(t){e.checkboxGroup1=t},expression:"checkboxGroup1"}},[o("el-checkbox",{staticStyle:{width:"100%","margin-left":"40px"},attrs:{label:t}},[o("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[o("div",[e._v(e._s(1==t.memberCardType?"通用储值卡":2==t.memberCardType?"限定储值卡":3==t.memberCardType?"次卡":4==t.memberCardType?"默认卡":"卡外"))]),0!=t.memberCardType?o("div",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.memberCardName))]):e._e(),3==t.memberCardType&&0!=t.memberCardType?o("div",[e._v("(余次"+e._s(t.surplusCount)+")")]):e._e(),3!=t.memberCardType&&0!=t.memberCardType?o("div",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.cardBalance))]):e._e(),o("div",{staticStyle:{"margin-left":"50px"}},[e._v("¥"+e._s(t.price))]),null!=t.serviceDiscount&&3!=t.memberCardType?o("div",{staticStyle:{padding:"4px 15px","margin-left":"10px","border-radius":"7px","text-align":"center",background:"#169BD5",color:"#fff"}},[e._v(e._s(10*Number(t.serviceDiscount))+"折\n\t\t\t\t\t\t\t\t\t\t")]):e._e()])])],1)})}}])}),o("el-table-column",{attrs:{width:"150",prop:"name"}}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"}}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.standardPrice)+"\n\t\t\t\t\t\t\t\t")]):e._e(),t.row.list.length>1?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t有会员卡\n\t\t\t\t\t\t\t\t")]):e._e()]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},At=[],Pt={props:{pnvIsShow:Boolean,searchList:Array,customerCode:String},components:{},data:function(){return{checkboxGroup1:[],checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[]}},computed:{},methods:{handleCheckAllChange:function(e){console.log("勾选的",e)},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},toggleRowExpansion:function(e){this.secondList=e.list},confirm:function(){var e=this.checkboxGroup1;console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.$emit("sendPnv",e)},close:function(){this.$emit("closePnv",!1)},showSecond:function(e){},serverChecked:function(e){this.arr1=e,this.serverSelected=this.arr1.concat(this.arr2)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),this.serverSelected=this.arr1.concat(this.arr2),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",e,this.serverSelected,this.arr3)},handleClassify:function(e){console.log("点击",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:this.$props.customerCode,categoryCode:e,level:"3"}).then(function(e){console.log("%c请求三级列表","color:#70ff57;font-size:20px;font-weight:bold",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,t.specification=e.specification,t.brandName=e.brandName,t.memberCardType,t.price=e.standardPrice,t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code,specification:e.specification,brandName:e.brandName})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Mt=Pt,Vt=(o("2acf"),Object(l["a"])(Mt,Tt,At,!1,null,"17a96637",null)),Dt=Vt.exports,zt={components:{newproduct:Ge,pnv:Dt,emp:Ot},props:{dis:{type:Boolean},manOur:{type:Array},customerCode:{type:String}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null}},computed:{},methods:{getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S02",type:e}).then(function(e){console.log("%c请求新建服务分类的 一 二 三级列表结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},openNp:function(){this.npIsShow=!0,this.getOptions("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("2")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S02",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){e.map(function(e){null==e.price&&(e.price=0),e.subtotalMoney=e.price*e.goodsCount}),console.log("%c确认按钮","color:#70ff57;font-size:20px;font-weight:bold",e),this.manOur=this.uniqs(this.manOur.concat(e)),this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},set:function(e,t){this.manOur[e].subtotalMoney=0,this.manOur[e].goodsCount=1,this.$set(this.manOur[e],"isGift",1)},deleteRow:function(e,t){t.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var a=this;console.log("%c111","font-size:100px"),a.manOur[a.chooseEmpidx].mapList=o,console.log(this.manOur),this.$emit("children",this.manOur)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},manOurMoneyChange:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t),this.$emit("children",this.manOur)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Et=zt,Gt=(o("2b8f"),Object(l["a"])(Et,$t,It,!1,null,"aa8f43e0",null)),Ft=Gt.exports,jt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b5"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"材料名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"geted",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"inventory",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品(配件)")])],1),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},Bt=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("门店耗材"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("注:材料中的商品只记录库存变化,不计入结算余额")])])}],qt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#409eff"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:7}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:4}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.serverList,"row-key":e.getRowKeys,height:"400"},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{width:"200",prop:"goodsName"}}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.brandName||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.specification||"--"))])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t¥"+e._s(t.row.price)+"\n\t\t\t\t\t\t\t")]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left",height:"500px","overflow-y":"auto"}},e._l(e.searchList,function(t,a){return o("el-menu",{key:a,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,a){return o("el-menu-item-group",{key:a},[o("el-menu-item",{attrs:{index:t.mapList},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},Rt=[],Kt={components:{},props:{pnvIsShow:Boolean,searchList:Array},data:function(){return{getRowKeys:function(e){return e.goodsCode},searchShow:!0,serverSelected:[],serverList:[]}},computed:{},methods:{confirm:function(){this.$emit("sendPnv",this.serverSelected)},close:function(){this.$emit("closePnv")},serverChecked:function(e){console.log("勾选选项",e),this.serverSelected=e},handleClassify:function(e){console.log("二级分类",e),this.getThree(e.code,"3")},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(e.data.map(function(e){e.goodsCome=3,e.goodsCount=1}),o.serverList=e.data)})},handleOpen:function(e){},handleClose:function(e){}},mounted:function(){},created:function(){var e=this;this.merchantCode=this.$route.query.merchantCode,this.$bus.$on("dl",function(t){e.$refs.multipleTable.toggleRowSelection(t,!1)})}},Wt=Kt,Ut=(o("5d30"),Object(l["a"])(Wt,qt,Rt,!1,null,"b14ae6ca",null)),Jt=Ut.exports,Ht={components:{pnv:Jt,newproduct:Ge},props:{dis:{type:Boolean},manOur:{type:Array}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empAlert:null}},computed:{},methods:{getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,parentCode:"0",code:"S03",type:e}).then(function(e){console.log("%c请求新建服务分类的 一 二 三级列表结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--无会员卡弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("2")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S03",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){this.manOur=this.uniqs(this.manOur.concat(e)),this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},openNp:function(){this.npIsShow=!0,this.getOptions("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},set:function(e,t){t[e].isGift=1},deleteRow:function(e,t){this.$bus.$emit("dl",t[e]),this.manOur.splice(e,1)},manOurMoneyChange:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Xt=Ht,Qt=(o("ce69"),Object(l["a"])(Xt,jt,Bt,!1,null,"2bbedd1e",null)),Yt=Qt.exports,Zt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b6"},[o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("客户自带材料")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入商品名称",disabled:e.dis},on:{change:e.input},model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入品牌",disabled:e.dis},on:{change:e.input},model:{value:t.row.brandName,callback:function(o){e.$set(t.row,"brandName",o)},expression:"scope.row.brandName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入规格型号",disabled:e.dis},on:{change:e.input},model:{value:t.row.model,callback:function(o){e.$set(t.row,"model",o)},expression:"scope.row.model"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"商品数量",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},on:{change:e.input},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1)]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("el-button",{attrs:{type:"primary"}},[e._v("+新增")])],1):e._e()],1)},eo=[],to={components:{},props:{dis:{type:Boolean},manOur:{type:Array,default:[]},useType:String},data:function(){return{manOurSearch:""}},computed:{},methods:{add:function(){this.manOur.push({goodsName:"",brandName:"",model:"",goodsCount:"1",remarks:"",type:4})},input:function(){this.$emit("children",this.manOur)},deleteRow:function(e,t){this.manOur.splice(e,1),this.$emit("children",this.manOur)},changeManOurNum:function(e,t,o,a){this.$emit("children",this.manOur)}},mounted:function(){},created:function(){}},oo=to,ao=(o("3262"),Object(l["a"])(oo,Zt,eo,!1,null,"072427ec",null)),so=ao.exports,io=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b7"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"},border:""}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"附加费用名称"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","justify-content":"center"}},[o("div",{staticStyle:{"margin-right":"10px"}},[e._v("附加费用名称")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("新增")]),o("div",{staticStyle:{color:"#409Eff"}},[e._v("/")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("编辑")])],1)]}},{key:"default",fn:function(t){return[o("el-select",{attrs:{placeholder:"请选择",disabled:e.dis},on:{"visible-change":e.getlists,change:e.selectChange},model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}},e._l(e.lists,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"金额/元"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入金额",disabled:e.dis},on:{change:e.priceChange},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",e._n(o))},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"请输入备注",disabled:e.dis},on:{change:e.remarksChange},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,e.manOur)}}},[e._v("删除")])]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("el-button",{attrs:{type:"primary"}},[e._v("+新增")])],1):e._e(),o("addition",{attrs:{isShowAddition:e.isShowAddition,addlists:e.addlists},on:{close:e.addPrice}})],1)},ro=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"font-big",staticStyle:{"padding-left":"36px","line-height":"60px"}},[e._v("附加费用"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("附加费用 注:加工费、管理费、税费等其他费用")])])}],no=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{title:"附加费用","close-on-click-modal":!1,center:"",visible:e.isShowAddition,width:"40%"},on:{close:e.close,"update:visible":function(t){e.isShowAddition=t}}},[o("el-input",{attrs:{maxlength:"10",placeholder:"请输入附加费类别,不超过10字"},model:{value:e.add,callback:function(t){e.add=t},expression:"add"}},[o("el-button",{staticStyle:{background:"#409eff",color:"#fff","border-top-left-radius":"0","border-bottom-left-radius":"0",border:"1px solid #409eff"},attrs:{slot:"append",type:"primary"},on:{click:e.adds},slot:"append"},[e._v("添 加")])],1),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h3",[e._v("附加费列表")]),o("span",{staticStyle:{color:"#b2baca"}},[e._v("(最多创建10个,当前总计: "),o("span",{staticStyle:{color:"#fea022"}},[e._v(e._s(e.addlists.length)+"个")]),e._v(")")])]),o("el-table",{attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:900,background:"#f1f4f5"},data:e.addlists}},[o("el-table-column",{attrs:{type:"index",label:"序号"}}),o("el-table-column",{attrs:{prop:"name",width:"300",label:"附加费名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showSet?o("div",[e._v(e._s(t.row.name))]):e._e(),t.row.showSet?e._e():o("el-input",{model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.showSet?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑")]):e._e(),t.row.showSet?e._e():o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.save(t.$index,t.row)}}},[e._v("保存")]),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,e.addlists)}}},[e._v("删除")])]}}])})],1)],1)],1)},lo=[],co={components:{},props:{isShowAddition:Boolean,addlists:Array},data:function(){return{all:"3",add:""}},computed:{},methods:{set:function(e,t){console.log("编辑",t),t.showSet=!1,t.showSave=!0,this.$set(this.$props.addlists,e,t)},save:function(e,t){var o=this;t.showSet=!0,t.showSave=!1,this.$http.get("/laborSynthesize/editAdditional",{merchantCode:this.merchantCode,name:t.name,id:t.id}).then(function(a){console.log("%c请求结果","color:red;font-size:20px",a),"10000"==a.code?o.$set(o.$props.addlists,e,t):alert(a.message)})},del:function(e,t){this.$http.get("/laborSynthesize/deleteAdditional",{merchantCode:this.merchantCode,name:t[e].name,id:t[e].id}).then(function(o){console.log("%c请求删除结果","color:red;font-size:20px",o),"10000"==o.code?t.splice(e,1):alert(o.message)})},getlists:function(){var e=this;this.$http.get("/laborSynthesize/getAdditional",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?(e.lists=t.data,t.data.map(function(e){e.showSet=!0,e.showSave=!1}),e.addlists=t.data,console.log("打开的弹框",e.addlists)):alert(t.message)})},adds:function(){var e=this;""!=this.add?this.$http.get("/laborSynthesize/addAdditional",{name:this.add,merchantCode:this.merchantCode}).then(function(t){console.log("%c请求结果","color:red;font-size:20px",t),"10000"==t.code?(e.getlists(),e.add=""):alert(t.message)}):alert("请输入附加费类别")},close:function(){this.$emit("close",this.addlists)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},uo=co,po=(o("7675"),Object(l["a"])(uo,no,lo,!1,null,"430ab956",null)),mo=po.exports,ho={components:{addition:mo},props:{dis:{type:Boolean},subjoin:{type:Array},useType:String},data:function(){return{addlists:[],lists:null,isShowAddition:!1,options:[],manOur:[]}},computed:{sums:function(){var e=this,t=0;console.log("数组",e.manOur);for(var o=0;o<e.manOur.length;o++)t+=Number(e.manOur[o].price);return console.log("%c计算总和","color:#70ff57;font-size:20px;font-weight:bold",t),t}},watch:{subjoin:function(e){this.manOur=e}},methods:{del:function(e,t){t.splice(e,1)},addPrice:function(e){this.isShowAddition=!1,this.options=e},addlist:function(){this.isShowAddition=!0,this.getlists()},add:function(){this.manOur.push({name:"",price:"",remarks:""})},getlists:function(){var e=this;this.$http.get("/laborSynthesize/getAdditional",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?(e.lists=t.data,t.data.map(function(e){e.showSet=!0,e.showSave=!1}),e.addlists=t.data,console.log("打开的弹框",e.addlists)):alert(t.message)})},selectChange:function(){this.manOur;this.$emit("selectChange",this.manOur)},priceChange:function(){this.$emit("priceChange",this.manOur)},remarksChange:function(){this.$emit("remarksChange",this.manOur)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},fo=ho,vo=(o("1b16"),Object(l["a"])(fo,io,ro,!1,null,"2aa2742e",null)),go=vo.exports,bo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新增车辆/客户","close-on-click-modal":!1,center:"",visible:e.addUserIsShow,width:"50%","show-close":!1},on:{"update:visible":function(t){e.addUserIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("carNum",{model:{value:e.form.plateNumber,callback:function(t){e.$set(e.form,"plateNumber",t)},expression:"form.plateNumber"}})],1),o("el-form-item",{attrs:{label:"用户手机号"}},[o("el-input",{attrs:{placeholder:"请填写11位数字"},model:{value:e.form.customerPhone,callback:function(t){e.$set(e.form,"customerPhone",e._n(t))},expression:"form.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{placeholder:"请输入客户姓名,不超过10个字",maxlength:"10"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号"},model:{value:e.form.vehicleIdNum,callback:function(t){e.$set(e.form,"vehicleIdNum",t)},expression:"form.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号"},model:{value:e.form.engineNum,callback:function(t){e.$set(e.form,"engineNum",t)},expression:"form.engineNum"}})],1),o("el-form-item",{attrs:{label:"注册日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择注册日期","value-format":"yyyy-MM-dd"},model:{value:e.form.applyDate,callback:function(t){e.$set(e.form,"applyDate",t)},expression:"form.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择品牌"},on:{change:e.chCar,focus:e.getBrand},model:{value:e.form.brandName,callback:function(t){e.$set(e.form,"brandName",t)},expression:"form.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车型车系"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",options:e.series},on:{"active-item-change":e.getSeriesList},model:{value:e.form.seriesNames,callback:function(t){e.$set(e.form,"seriesNames",t)},expression:"form.seriesNames"}})],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色"},model:{value:e.form.carColor,callback:function(t){e.$set(e.form,"carColor",t)},expression:"form.carColor"}})],1),o("el-form-item",{attrs:{label:"本次公里数"}},[o("el-input",{attrs:{placeholder:"请输入本次公里数"},model:{value:e.form.lastMileage,callback:function(t){e.$set(e.form,"lastMileage",t)},expression:"form.lastMileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择保险到期日期","value-format":"yyyy-MM-dd"},model:{value:e.form.compulsoryInsureDeadline,callback:function(t){e.$set(e.form,"compulsoryInsureDeadline",t)},expression:"form.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择年检日期","value-format":"yyyy-MM-dd"},model:{value:e.form.annualInspectDate,callback:function(t){e.$set(e.form,"annualInspectDate",t)},expression:"form.annualInspectDate"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},yo=[],Co={components:{carNum:V},props:{addUserIsShow:Boolean},data:function(){return{brand:[],series:[],List:[],form:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",lastMileage:"",customerName:"",customerPhone:"",plateNumber:""},newProduct:!0,tel:""}},computed:{},methods:{handleChange:function(e){console.log(e)},close:function(){this.$emit("closeAc")},save:function(){this.$emit("noSend")},confirm:function(){this.form.brandId=this.form.brandName.split("/")[0]||"",this.form.brandName=this.form.brandName.split("/")[1]||"",this.form.seriesName=this.form.seriesNames[0].split("/")[1]||"",this.form.seriesId=this.form.seriesNames[0].split("/")[0]||"",this.form.modelId=this.form.seriesNames[1].split("/")[0]||"",this.form.modelName=this.form.seriesNames[1].split("/")[1]||"",console.log(this.form.seriesName,this.form.brandId,this.form.brandName,this.form.modelId,this.form.modelName,"12312",this.form.seriesNames),this.$emit("sendAc",this.form)},chCar:function(e){var t=this;""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求获取车辆车系列表结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;console.log("选择车型车系"),console.log("%c车型","color:red",e[0].split("/")[0]),this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){console.log("请求车辆车型结果",e),"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求车品牌结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})}},mounted:function(){},created:function(){}},wo=Co,_o=(o("a6d0"),Object(l["a"])(wo,bo,yo,!1,null,"46a52c5e",null)),xo=_o.exports,ko=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vip"},[o("el-dialog",{attrs:{title:"","close-on-click-modal":!1,visible:e.vipPop,width:"80%","show-close":!1},on:{"update:visible":function(t){e.vipPop=t},close:e.close}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("会员卡内项目")]),o("div",{staticClass:"d-flex",attrs:{id:"d1"}},[o("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.vipChange},model:{value:e.cur2,callback:function(t){e.cur2=t},expression:"cur2"}},e._l(e.vipList,function(e,t){return o("el-tab-pane",{key:t,attrs:{label:e.memberCardName,name:e}})}),1)],1),o("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px","text-align":"center","font-size":"14px",color:"#333",background:"#F2F2F2"}},[e._v("全部服务"+e._s(e.serve)+"折,全部商品"+e._s(e.product)+"折,此处看添加卡内特殊优惠项目和赠送项目;如需添加其他项目,可在点击右上角关闭按钮后的页面添加.")]),o("div",{staticStyle:{color:"#333","font-size":"18px","margin-top":"15px",height:"73px"}},[o("div",e._l(e.tabTitle,function(t,a){return o("el-col",{key:a,staticClass:"tabs",attrs:{span:6}},[o("p",{class:{active:e.cur==a},staticStyle:{"text-align":"center","padding-bottom":"10px"},on:{click:function(t){return e.tabChangess(a)}}},[e._v(e._s(t))])])}),1)]),o("el-row",[o("el-col",{attrs:{span:18}},[o("div",{staticStyle:{"margin-top":"20px"}},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#f2f2f2"},data:e.list,"row-key":e.getRowKeys},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{prop:"goodsName",label:"服务名称"}}),o("el-table-column",{attrs:{prop:"hour",label:"所需工时"}}),o("el-table-column",{attrs:{prop:"price",label:"工时单价(个/元)"}}),o("el-table-column",{attrs:{prop:"price",label:"单价"}}),o("el-table-column",{attrs:{type:"selection",prop:"money",label:"操作","reserve-selection":!0}})],1)],1)]),o("el-col",{attrs:{span:6}},[o("h4",[e._v("已选项目("+e._s(e.chooseList.length)+")")]),e._l(e.chooseList,function(t,a){return o("div",{key:a,staticClass:"d-spb",staticStyle:{"margin-left":"10px"}},[o("div",{staticClass:"d-flex"},[o("div",[e._v("["+e._s(t.choose)+"]")]),o("div",[e._v(e._s(t.goodsName))])]),o("div",[o("i",{staticClass:"el-icon-close",on:{click:function(o){return e.delSelected(t.goodsCode)}}})])])})],2)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},So=[],No={components:{},props:{vipPop:Boolean,vipList:Array,arr:Array,customerCode:String},data:function(){return{listType:"specialService",otherVipList:[],chooseList:[],cur:-1,cur2:-1,tabTitle:["特殊优惠项目--服务","特殊优惠项目--商品","赠送--服务","赠送--商品"],list:[],serverType:"",options:[],serve:10,product:"10",card:"会员卡",num:"300"}},computed:{},watch:{arr:function(e){this.list=e}},methods:{getRowKeys:function(e){return e.vips},close:function(){this.$emit("closeVipPop")},confirm:function(){this.chooseList.map(function(e){e.goodsCount=1,e.num=e.goodsCount}),console.log("选择的"),this.$emit("confirmVipPop",this.chooseList)},delSelected:function(e){var t;console.log("删除商品下表",e),this.list.map(function(o,a){e==o.goodsCode&&(t=a)}),this.$refs.multipleTable.toggleRowSelection(this.list[t],!1)},getList:function(e){var t=this;this.$http.get("/laborSynthesize/getOtherVipGoods",{merchantCode:this.merchantCode,vipId:e,customerCode:"3100000100106"}).then(function(e){console.log("%c请求会员卡内商品结果","color:red;font-size:20px",e),"10000"==e.code?t.otherVipList=e.data:alert(e.message)})},vipChange:function(e){console.log("选中行下把你",e),this.cur=-1,this.getList(e.name.customerMemberCardId),this.cur2=e.index},tabChangess:function(e){this.cur=e;var t=[],o=[],a=[],s=[],i=[],r=[],n=[],l=[];this.otherVipList.specialService.map(function(e){e.vips=e.goodsComeVipId+1}),t=this.otherVipList.specialService,this.otherVipList.specialGoods.map(function(e){e.vips=e.goodsComeVipId+2}),o=this.otherVipList.specialGoods,this.otherVipList.freeService.map(function(e){e.vips=e.goodsComeVipId+3}),a=this.otherVipList.freeService,this.otherVipList.freeGoods.map(function(e){e.vips=e.goodsComeVipId+4}),s=this.otherVipList.freeGoods,i=this.otherVipList.specialServiceClass,r=this.otherVipList.specialGoodsClass,n=this.otherVipList.freeServiceClass,l=this.otherVipList.freeGoodsClass,0==e?(t.map(function(e){e.choose="特殊优惠项目--服务"}),this.list=t,this.options=i,this.listType="specialService"):1==e?(o.map(function(e){e.choose="特殊优惠项目--商品"}),this.list=o,this.options=r,this.listType="specialGoods"):2==e?(a.map(function(e){e.choose="赠送--服务"}),this.list=a,this.options=n,this.listType="freeService"):3==e&&(t.map(function(e){e.choose="赠送--商品"}),this.list=s,this.options=l,this.listType="freeGoods")},selectChange:function(e){console.log("勾选的val",e),this.chooseList=e},optionsChange:function(e){console.log("’=选择的下拉框",e);var t=[],o=[],a=[],s=[];"specialService"==this.listType?(this.otherVipList.specialService.map(function(o){o.twoCategoryName==e&&t.push(o)}),this.list=t):"specialGoods"==this.listType?(this.otherVipList.specialGoods.map(function(t){t.twoCategoryName==e&&o.push(t)}),this.list=o):this.otherVipList.freeService?(this.otherVipList.freeService.map(function(t){t.twoCategoryName==e&&a.push(t)}),this.list=a):this.otherVipList.freeGoods&&(this.otherVipList.freeGoods.map(function(t){t.twoCategoryName==e&&s.push(t)}),this.list=s)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Lo=No,Oo=(o("04bd"),Object(l["a"])(Lo,ko,So,!1,null,"281eb81c",null)),$o=Oo.exports,Io={components:{vippop:$o,addcar:xo,useOtherVip:Qe,newServe:Pe,nv:_t,emp:Ot,b4:Ft,b5:Yt,b6:so,b7:go},data:function(){return{orderStatus:"",AvipList:[],BalertList:[],Clist:[],Dlist:[],delRows:[],fatherData:[],state:null,customerCode:null,cust:null,usevip:!1,vipList:[],nsIsShow:!1,nsList:null,options:null,brandId:null,familyId:null,pnvIsShow:!1,searchList:[],uvIsShow:!1,uvSearchList:[],nvIsShow:!1,nvSearchList:[],otherRemark:"",subjoin:[],manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,manOur:[],manOur2:[],manOur3:[],manOur4:[],lastTimeRemark:"",buyer:"0",price:"0",expense:"0",vipNum:0,vipCar:"皖BA827A",vipPhone:"18605533016",vipName:"张三",useVip:!1,series:[],brand:[],dis:!1,vehicleId:null,sumsm:null,owner:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",mileage:"",customerName:"",customerPhone:"",plateNumber:""},addUserIsShow:!1,vipPop:!1,search:"",useType:null}},computed:{allNums:function(){var e=this,t=0,o=0,a=0;return e.subjoin.length>0&&e.subjoin.map(function(e){t+=e.price}),e.manOur.length>0&&e.manOur.map(function(e){o+=Number(e.subtotalMoney)}),e.manOur2.length>0&&e.manOur2.map(function(e){a+=Number(e.subtotalMoney)}),(Number(t)+Number(o)+Number(a)).toFixed(2)}},created:function(){var e=this;this.createId=localStorage.getItem("createId"),this.merchantCode=this.$route.query.merchantCode,this.getBrand(),void 0!=this.$route.query.carNum&&this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.$route.query.carNum}).then(function(t){if(console.log("%c请求搜索结果",t,"font-size:18px"),"10000"==t.code){e.owner=t.data,e.owner.plateNumber=e.$route.query.carNum,e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode,e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value),console.log("数据回显第一层"))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value],console.log("选中的值999",t.owner.seriesName))})},1500)}}),console.log("最后的值",e.series)},1500),null!=t.data.vehicleColor&&(e.owner.carColor=t.data.vehicleColor),null!=t.data.registeredDate&&(e.owner.applyDate=t.data.registeredDate)}else alert(t.message)}),this.useType=this.$route.query.type,setTimeout(function(){"look"==e.$route.query.type?(e.getForm(),e.dis=!0):"copy"!=e.$route.query.type&&"set"!=e.$route.query.type||(e.workOrderCode=e.$route.query.workOrderCode,e.orderId=e.$route.query.orderid,e.getForm("copy"))},1e3)},methods:{ic:function(){this.$forceUpdate()},getOptions:function(e){var t=this;this.$http.get("/LaborGoods/threeCategoryList",{merchantCode:this.merchantCode,code:"S01",parentCode:"0",type:e}).then(function(e){console.log("%c请求新建服务分类的 一 二 三级列表结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data):alert(e.message)})},sum:function(){},setList:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_,x,k,S,N){var L=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{orderId:this.orderId,workOrderCode:this.workOrderCode,merchantCode:this.merchantCode,status:this.statusList,type:1,workorderType:"1",customerName:e,customerPhone:t,plateNumber:o,mileage:a,engineNum:s,vehicleIdNum:i,applyDate:r,carColor:n,modelName:l,seriesName:c,customerCode:d,employeeId:u,updateId:p,workOrderTime:m,isMyCard:h,remarks:f,totalMoney:N,estimateSubmit:v,brandName:g,nextKeepFitKm:b,nextKeepFitTime:y,repairName:C,repairPhone:w,annualInspectDate:_,compulsoryInsureDeadline:x,list:k,laborOrderGoodsList:S}).then(function(e){console.log("请求新增综合单结果",e),"10000"==e.code?L.$router.push({path:"/",query:{merchantCode:L.merchantCode}}):alert(e.message)})},addList:function(e,t,o,a,s,i,r,n,l,c,d,u,p,m,h,f,v,g,b,y,C,w,_,x,k,S,N,L){var O=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{merchantCode:this.merchantCode,beforeRemarks:this.lastTimeRemark,type:e,workorderType:"1",customerName:t,customerPhone:o,plateNumber:a,mileage:s,engineNum:i,vehicleIdNum:r,applyDate:n,carColor:l,modelName:c,seriesName:d,customerCode:u,employeeId:p,updateId:m,workOrderTime:h,isMyCard:f,remarks:v,totalMoney:L,estimateSubmit:g,brandName:b,nextKeepFitKm:y,nextKeepFitTime:C,repairName:w,repairPhone:_,annualInspectDate:x,compulsoryInsureDeadline:k,list:S,laborOrderGoodsList:N}).then(function(e){console.log("请求新增综合单结果",e),"10000"==e.code?O.$router.push({path:"/",query:{merchantCode:O.merchantCode}}):alert(e.message)})},getForm:function(e){var t=this;this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:this.$route.query.orderType,copy:e}).then(function(e){if(console.log("请求综合开单结果",e),"10000"==e.code){t.orderStatus=e.data.status,0==t.orderStatus?t.statusList=1:t.statusList="",e.data.lastMileage=e.data.mileage||0,t.owner=e.data,console.log("cha",t.brand);var o=e.data.modelName,a=e.data.seriesName;t.brand.map(function(o){e.data.brandName==o.brandName&&(t.owner.brandName=o.value,t.chCar(o.value),console.log("数据回显第一层"))}),setTimeout(function(){var e=t;e.series.map(function(t){if(a==t.label){var s=t.value;console.log("车系",s),e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==o&&(e.owner.seriesName=[s,t.value],console.log("选中的值999",e.owner.seriesName))})},1500)}})},2500),t.customerCode=e.data.customerCode,e.data.laborOrderGoodsList.map(function(e){1==e.type?t.manOur.push(e):2==e.type?(e.specification=e.serviceFrequency,t.manOur2.push(e)):3==e.type?(e.specification=e.serviceFrequency,t.manOur3.push(e)):t.manOur4.push(e)}),console.log("%c客户组自带","color:#70ff57;font-size:20px;font-weight:bold",t.manOur4,t.useType),t.subjoin=e.data.list,t.otherRemark=e.data.remarks,t.allNums=e.data.totalMoney}})},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",oneCategoryCode:"S01",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.nvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data,console.log("%c商品模板","color:#70ff57;font-size:20px;font-weight:bold",t.options))})},getOtherVipGoods:function(e){var t=this;this.$http.get("/laborSynthesize/getOtherVip",{merchantCode:this.merchantCode,customerCode:e,vehicleId:this.vehicleId}).then(function(e){console.log("%c请求可用会员卡项目弹窗信息结果","color:red;font-size:20px",e),"10000"==e.code?(t.vipList=e.data,t.vipNum=e.data.length,t.cust=t.customerCode):(t.vipList=[],t.vipNum=0)})},showNoVip:function(){console.log("%c打开维修/保养项目(配件)--弹窗","color:lightgreen;font-weight:bold;background:red"),this.nvIsShow=!0,this.getTree("1")},sendNv:function(e){console.log("显示传递的数据",e),e.map(function(e){e.subtotalMoney=e.goodsCount*e.price}),this.fatherData=e,this.Clist=e,this.manOur=this.uniqs(this.manOur.concat(this.Clist.concat(this.AvipList))),console.log("%c显示工111时","color:blue;background:red",this.manOur),this.nvIsShow=!1},closeNv:function(e){this.nvIsShow=!1},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){console.log("请求服务模板结果",t),"10000"==t.code&&(e.nsList=t.data)}),this.getOptions("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},remarksChange:function(e){this.subjoin=e},priceChange:function(e){this.subjoin=e},selectChange:function(e){this.subjoin=e},children1:function(e){e.map(function(e){e.serviceFrequency=e.specification}),this.manOur2=e},children2:function(e){e.map(function(e){e.serviceFrequency=e.specification}),this.manOur3=e},children3:function(e){this.manOur4=e},confirm:function(){var e,t=this.owner,o="",a="",s="";t.brandName&&(o=t.brandName.split("/")[1]),t.seriesName&&(a=t.seriesName[1].split("/")[1],s=t.seriesName[0].split("/")[1]),e=this.useVip?1:0;var i=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),console.log("客户自带",this.manOur4),i=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),"set"==this.useType?this.setList(t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums):this.addList("2",t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"007",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums)},save:function(){var e,t=this.owner,o="",a="",s="";t.brandName&&(o=t.brandName.split("/")[1]),t.seriesName&&(a=t.seriesName[1].split("/")[1],s=t.seriesName[0].split("/")[1]),e=this.useVip?1:0;var i=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),i=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),"set"==this.useType?this.setList(t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums):this.addList("1",t.customerName,t.customerPhone,t.plateNumber,t.lastMileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,a,s,this.customerCode,this.createId,"",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,o,t.nextKeepFitKm,t.nextKeepFitTime,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,i,this.allNums)},set:function(e,t){this.manOur[e].isGift=1,this.manOur[e].subtotalMoney=0,this.manOur[e].goodsCount=1},deleteRow:function(e,t){this.$bus.$emit("delRow",t[e]),console.log("bus1删除的数据",t[e]),this.manOur.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var a=this;console.log("%c111","font-size:100px"),a.manOur[a.chooseEmpidx].mapList=o,console.log(this.manOur)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,console.log("%c选择员工","color:#70ff57;font-size:20px;font-weight:bold",t),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],a=[];e.data.map(function(e){1==e.employeeType?t.push(e):a.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(a)}})},changeManOurNum:function(e,t,o,a){a[o].subtotalMoney=Number(e)*Number(t)},closeVipAlert:function(){this.usevip=!1,this.useVip=!1},vipConfirm:function(e,t){this.state=t,this.customerCode=e,this.usevip=!1,this.getOtherVipGoods(e)},userVipChange:function(e){null!=this.vehicleId?(this.useVip=e,this.usevip=e):(this.$alert("使用他人会员卡请先输入车牌号","提示",{confirmButtonText:"确定"}),this.useVip=!1,this.usevip=!1),0==e&&(this.vipNum=0,this.state="")},openVipPop:function(){this.vipPop=!0},closeVipPop:function(){this.vipPop=!1},confirmVipPop:function(e){this.vipPop=!1;var t=[],o=[];console.log("父组件",e),e.map.length>0&&(e.map(function(e){e.subtotalMoney=e.price,e.mapList=[],1==e.goodsType?t.push(e):o.push(e)}),this.AvipList=o,this.manOur2=this.deWeight(this.manOur2.concat(t)),this.manOur=this.Clist.concat(this.AvipList))},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},searchOld:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.search}).then(function(t){if(console.log("%c请求输入车牌结果","font-size:18px",t),"10000"==t.code){e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.owner=t.data,e.owner.plateNumber=t.data.plateNumber,e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value),console.log("数据回显第一层"))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;console.log("车系",s),t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value],console.log("选中的值999",t.owner.seriesName))})},500)}})},500),null!=t.data.vehicleColor&&(e.owner.carColor=t.data.vehicleColor),null!=t.data.registeredDate&&(e.owner.applyDate=t.data.registeredDate),e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode}else alert(t.message)})},addUser:function(){console.log("打开"),this.addUserIsShow=!0},closeAc:function(){console.log("关闭"),this.addUserIsShow=!1},sendAc:function(e){var t=this;console.log("val",e);var o=e;this.$http.post("/laborSynthesize/addCarAndCustomer",{plateNumber:o.plateNumber,phone:o.customerPhone,name:o.customerName,vehicleIdNum:o.vehicleIdNum,engineNum:o.engineNum,registeredDate:o.applyDate,brandName:o.brandName,merchantCode:this.merchantCode,brandId:o.brandId,modelName:o.modelName,modelId:o.modelId,seriesName:o.seriesName,seriesId:o.seriesId,lastMileage:o.lastMileage||0,carColor:o.carColor,compulsoryInsureDeadline:o.compulsoryInsureDeadline,annualInspectDate:o.annualInspectDate,source:"s"}).then(function(o){if("10000"==o.code){t.customerCode=o.data.customerCode,t.vehicleId=o.data.vehicleId,t.addUserIsShow=!1,t.owner=e;var a=e.seriesName,s=e.modelName;t.brand.map(function(o){e.brandName==o.brandName&&(t.owner.brandName=o.value,t.chCar(o.value),console.log("数据回显第一层"))}),setTimeout(function(){var e=t;e.series.map(function(t){if(a==t.label){var o=t.value;console.log("车系",o),e.getSeriesList2(t.value.split("/")[0]),setTimeout(function(){t.children.map(function(t){t.vehicleName==s&&(e.owner.seriesName=[o,t.value],console.log("选中的值999",e.owner.seriesName))})},1500)}})},1500)}else alert(o.message)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求获取车辆品牌列表结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})},chCar:function(e){var t=this;console.log("选择品牌后的值",e),""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求获取车辆车系列表结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName,e.children=[]}),t.series=e.data)})},getSeriesList:function(e){var t=this;console.log("选择车型车系"),console.log("%c车型","color:red",e[0].split("/")[0],e),this.$http.get("/laborSynthesize/getModelList",{familyId:e[0].split("/")[0]}).then(function(e){console.log("请求车辆车型结果",e),"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getSeriesList2:function(e){var t=this;console.log("调用接口",e),this.$http.get("/laborSynthesize/getModelList",{familyId:e}).then(function(e){console.log("请求车辆车型结果",e),"10000"==e.code?(e.data.map(function(e){e.label=e.vehicleName,e.value=e.vehicleId+"/"+e.vehicleName}),t.series.map(function(t){t.children=e.data})):alert(e.message)})},getCarName:function(){console.log("获取车名",this.owner.seriesName),console.log(this.owner.seriesName[1].split("/")[1])},importCarnum:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.owner.plateNumber}).then(function(t){if(console.log("%c请求输入车牌结果","font-size:18px",t),"10000"==t.code){e.lastTimeRemark=t.data.beforeRemarks;var o=t.data.seriesName,a=t.data.modelName;e.owner=t.data,e.owner.plateNumber=t.data.plateNumber,e.brand.map(function(o){t.data.brandName==o.brandName&&(e.owner.brandName=o.value,e.chCar(o.value),console.log("数据回显第一层"))}),setTimeout(function(){var t=e;t.series.map(function(e){if(o==e.label){var s=e.value;console.log("车系",s),t.getSeriesList2(e.value.split("/")[0]),setTimeout(function(){e.children.map(function(e){e.vehicleName==a&&(t.owner.seriesName=[s,e.value],console.log("选中的值999",t.owner.seriesName))})},500)}})},500),e.owner.carColor=t.data.vehicleColor||"",console.log("车颜色",t.data.vehicleColor),e.owner.applyDate=t.data.registeredDate||"",e.vehicleId=t.data.vehicleId,e.customerCode=t.data.customerCode}else alert(t.message)})},inputTel:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)?console.log("输入的手机号",e):(this.$message.error("请输入正确的手机号"),this.owner.customerPhone="")},inputTel2:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;t.test(e)?console.log("输入的手机号",e):(this.$message.error("请输入正确的手机号"),this.owner.repairPhone="")},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t}},mounted:function(){}},To=Io,Ao=(o("243c"),Object(l["a"])(To,ft,vt,!1,null,"49b2eeb3",null)),Po=Ao.exports,Mo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"close"},[o("div",{staticClass:"pl"},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"font-big",staticStyle:{"font-size":"24px"}},[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.customerName))]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("span",[e._v(e._s(e.laborOrder.customerPhone))])]),o("el-col",{staticClass:"mr",staticStyle:{width:"130px"},attrs:{span:2}},[o("div",[e._v(e._s(e.laborOrder.updateTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"30%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.mileage,callback:function(t){e.$set(e.laborOrder,"mileage",t)},expression:"laborOrder.mileage"}},[o("template",{slot:"append"},[e._v("\n\t\t\t\t\t\t\tKM\n\t\t\t\t\t\t")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("项目明细")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center","line-height":"60px"},attrs:{span:10}},[o("div",{staticClass:"font-big"},[e._v("工单编号:")]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("div",{staticClass:"font-big"},[e._v(e._s(e.laborOrder.workorderCode))])]),o("el-table",{staticStyle:{width:"60%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.list},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"126px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.laborGoodsEmployeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.laborGoodsEmployeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"40px"}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("业务结算")]),o("table",{staticClass:"table"},[o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px",width:"100px"},attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},[o("div",{staticClass:"d-flex"},[o("p",{staticClass:"underline"},[e._v(e._s(e.vipNum)+"张")]),o("p",[e._v("可用会员卡")])]),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"40px","flex-wrap":"wrap"}},e._l(e.vipCards,function(t,a){return o("el-checkbox-group",{key:a,attrs:{label:t},on:{change:function(o){return e.changeBox(t,a)}},model:{value:e.vipList,callback:function(t){e.vipList=t},expression:"vipList"}},[o("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(o){return e.ch(o,t)}}},[e._v(e._s(t.memberCardName))])],1)}),1)])])]),o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("el-checkbox",{on:{change:e.mes},model:{value:e.isMes,callback:function(t){e.isMes=t},expression:"isMes"}},[e._v("扣卡后短信通知持卡人")])],1)]),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.timersShow}},[e._v(e._s(this.timeCardList.length)+"张")]),o("div",[e._v("可用次卡商品")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showtimeCardList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.goodsName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"1000px",border:"0",padding:"20px","padding-left":"40px","flex-wrap":"wrap"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.couponIsAlert}},[e._v(e._s(e.coupon)+"张")]),o("div",[e._v("可用优惠券")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showCouponList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("储值卡")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.balance)+"元")]),o("div",{staticStyle:{color:"#0000ff"}},[e._v("本次使用金额:"+e._s(e.thisBalance))])])]),o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"}},[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",width:"150px"}},[o("div",{staticClass:"underline",staticStyle:{color:"#C0C4CC"}},[e._v(e._s(e.alertCodeList.length)+"张")]),o("div",[e._v("可用兑换码")])]),e._l(e.codeList,function(t,a){return o("div",{key:a,staticClass:"d-flex",staticStyle:{"margin-right":"10px","align-items":"center"}},[o("div",[e._v(e._s(t.name))])])}),o("el-button",{attrs:{disabled:"true",type:"text"},on:{click:e.addCode}},[e._v("添加新兑换码")])],2)])])]),o("div",{staticClass:"footer"},[o("div",{staticStyle:{"margin-right":"56px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.vipCount))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.codeDis)))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.favMoney)))])])])]),o("div",{staticStyle:{width:"103%",background:"#ccc",height:"70px","margin-left":"-40px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("工单总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.orderPrice))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",[o("el-input",{on:{input:e.fav},model:{value:e.favMoney,callback:function(t){e.favMoney=t},expression:"favMoney"}})],1),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("应收金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(Number(e.shouldPay).toFixed(2)))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("el-button",{staticStyle:{"margin-right":"35px"},attrs:{type:"text"},on:{click:e.back}},[e._v("返回")]),o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{disabled:e.onceClick,size:"small",type:"primary"},on:{click:e.close}},[e._v("业务结算")])],1)])]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("timesCard",{attrs:{timersCardShow:e.timersCardShow,vipCards:e.onceGoodsListAll,timeCardList:e.showtimeCardList},on:{confirmTimers:e.confirmTimers,closeTimers:e.closeTimers}}),o("codes",{attrs:{codeShow:e.codeShow,alertCodeList:e.alertCodeList},on:{confirmCode:e.confirmCode,closeCode:e.closeCode}}),o("coupon",{attrs:{couponIsShow:e.couponIsShow,couponList:e.couponList},on:{confirmCoupon:e.confirmCoupon,closeCoupon:e.closeCoupon}}),o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"添加兑换码",visible:e.addCodes},on:{"update:visible":function(t){e.addCodes=t}}},[o("div",{staticStyle:{display:"flex","justify-content":"center","margin-bottom":"30px"}},[o("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("优惠券")]),o("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("次卡商品")])],1),o("el-input",{attrs:{placeholder:"请输入兑换码"},model:{value:e.importCode,callback:function(t){e.importCode=t},expression:"importCode"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeAddCode}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.sendAddCode}},[e._v("确 定")])],1)],1)],1)},Vo=[],Do=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,a){return o("el-col",{key:a,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},zo=[],Eo={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2),this.checkList=[],this.checkList2=[]},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow),this.checkList=[],this.checkList2=[]},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Go=Eo,Fo=(o("9684"),Object(l["a"])(Go,Do,zo,!1,null,"2908ba16",null)),jo=Fo.exports,Bo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选中的次卡商品",center:"",visible:e.timersCardShow,width:"40%","show-close":!1},on:{"update:visible":function(t){e.timersCardShow=t}}},[o("el-row",[o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.timeCardList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("已选数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.timeCardList},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"goodsName"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount"}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},qo=[],Ro={components:{},props:{timeCardList:Array,timersCardShow:Boolean,vipCards:Array},data:function(){return{chooseList:[],list:[],val2:[],search:"",disShow:!0}},watch:{timersCardShow:function(e,t){}},computed:{},methods:{inputNumber:function(e,t){this.$set(this.chooseList,t,e)},getBalance:function(e){var t=this;this.$http.post("/LaborBlance/getBalance",{merchantCode:this.merchantCode,workorderCode:this.orderCode,vipCards:this.$props.vipCards,onceCards:e}).then(function(e){console.log("%c请求最高可用抵扣金额结果","color:red;font-size:20px",e),"10000"==e.code?t.$emit("confirmTimers",t.chooseList,e.data.cardBalance,e.data.maxDiscount):alert(e.message)})},confirm:function(){this.$emit("confirmTimers",this.chooseList)},close:function(){this.$emit("closeTimers")},chooseDis:function(e){this.chooseList=e}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode}},Ko=Ro,Wo=(o("babc"),Object(l["a"])(Ko,Bo,qo,!1,null,"53aae4ed",null)),Uo=Wo.exports,Jo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择优惠券",center:"",visible:e.couponIsShow,width:"70%"},on:{"update:visible":function(t){e.couponIsShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{align:"center",prpo:"goodsCount",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:t.row.surplusCount,label:"",size:"small"},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},Ho=[],Xo={components:{},props:{couponIsShow:Boolean,couponList:Array},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},computed:{},watch:{couponList:function(e){e.map(function(e){e.goodsCount=1}),this.list=e}},methods:{confirm:function(){this.$emit("confirmCoupon",this.chooseList)},close:function(){this.$emit("closeCoupon")},chooseDis:function(e){console.log("选择的下标",e),this.chooseList=e}},mounted:function(){},created:function(){}},Qo=Xo,Yo=(o("0611"),Object(l["a"])(Qo,Jo,Ho,!1,null,"fe9a49bc",null)),Zo=Yo.exports,ea=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"已选兑换码",center:"",visible:e.codeShow,width:"70%","show-close":!1},on:{"update:visible":function(t){e.codeShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis,select:e.tableSelect}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:""}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},ta=[],oa={components:{},props:{alertCodeList:Array,codeShow:Boolean},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},watch:{alertCodeList:function(e){e.map(function(e){e.goodsCount=1}),this.first(e),this.list=e}},computed:{},methods:{tableSelect:function(e,t){var o=e.length&&-1!==e.indexOf(t);0==o&&this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:t.exchangeCode,type:t.type}]).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code||alert(e.message)})},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},confirm:function(){this.$emit("confirmCode",this.chooseList)},close:function(){this.$emit("closeCode")},chooseDis:function(e){this.chooseList=e}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},aa=oa,sa=(o("12d2"),Object(l["a"])(aa,ea,ta,!1,null,"2ca61317",null)),ia=sa.exports,ra={components:{timesCard:Uo,emp:jo,coupon:Zo,codes:ia},data:function(){return{onceClick:!1,onceGoodsListAll:[],orderPrice:0,dataShouldPay:"",vipCount:"",thisBalance:0,totalMoney3:0,totalMoney2:0,disPrice:0,isHas:[],cardDed:0,array:[],dis:!1,arrId:[],codeShow:!1,alertCodeList:[],addCodes:!1,importCode:null,codeList:[],radio:"2",couponIsShow:!1,couponList:[],showCouponList:[],timersCardShow:!1,showtimeCardList:[],empList1:[],empList2:[],chooseEmpidx:null,empAlert:!1,payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:0,vipDis:"0",discount:0,discountMax:null,timeCardList:[],cardBalance:!1,showCard:!1,isMes:!1,vipList:[],code:"0",balance:0,coupon:"0",timeCard:"0",vipCards:[],vipNum:0,orderNum:"",list:[],onceCardDiscount:0,laborOrder:{plateNumber:"",customerName:"",customerPhone:"",updateTime:"",mileage:"",workorderCode:"",totalMoney:"0"}}},computed:{shouldPay:function(){return Number(this.dataShouldPay-this.favMoney).toFixed(2)}},methods:{close:function(e,t,o,a,s,i,r,n,l,c,d,u){var p=this;console.log("抵扣金额",Number(this.discount)),this.onceClick=!0,this.$http.post("/LaborBlance/balance/order",{employeeId:localStorage.getItem("createId")||"",laborOrder:this.laborOrder,goodsList:this.list,vipNumber:this.vipNum,cardBalance:Number(this.balance),vipCards:this.vipList,onceGoodsList:this.showtimeCardList,coupons:this.showCouponList,deduction:this.vipCount,reduce:Number(this.thisBalance),shouldPay:Number(this.shouldPay),orderPrice:this.laborOrder.totalMoney,redeemCode:this.codeList,benefit:this.favMoney,redeemVerification:this.codeDis,notifyCardOwner:this.isMes}).then(function(e){console.log("%c请求工单结算结果","color:red;font-size:20px",e),"success"==e.code?(p.$router.push({path:"/financialClose",query:{workOrderCode:e.data.laborOrder.workorderCode,merchantCode:p.merchantCode}}),p.onceClick=!1):alert(e.message)})},getVipList:function(e){var t=this;this.dis=!0,setTimeout(function(){t.dis=!1},1500),this.$http.get("/LaborBlance/findOnceCards",{merchantCode:this.merchantCode,orderCode:this.orderCode,vipCardId:e}).then(function(e){console.log("%c请求查询次卡商品集合结果","color:red;font-size:20px",e),"10000"==e.code?t.timeCardList=e.data:alert(e.message)})},back:function(){this.$router.push({path:"/",query:{merchantCode:this.merchantCode}})},codeListIsShow:function(){this.codeShow=!0},confirmCode:function(e){var t=this;console.log("确认兑换码弹窗",e),this.codeList=e,e.map(function(e){2==e.type&&(t.codeDis+=Number(e.price))}),this.codeShow=!1},closeCode:function(){this.codeShow=!1},couponIsAlert:function(){this.couponIsShow=!0},closeCoupon:function(){this.couponIsShow=!1},confirmCoupon:function(e){this.showCouponList=e,this.couponIsShow=!1},confirmTimers:function(e){this.timersCardShow=!1;var t=0;console.log("值",e),e.map(function(e){t+=Number(e.price)*Number(e.goodsCount)}),this.onceCardDiscount=t},closeTimers:function(){this.timersCardShow=!1},timersShow:function(){console.log(this.timeCardList,this.showtimeCardList),this.$bus.$emit("showList",this.timeCardList||[],this.showtimeCardList||[]),this.timersCardShow=!0},fav:function(e){e>this.dataShouldPay&&(this.$message.error("输入的优惠金额金额必须小于"+this.dataShouldPay),this.favMoney=0)},inputPrice:function(e){console.log("输入的抵扣金额",e,this.discountMax),e>this.discountMax?(this.$message.error("最高可用折扣金额为"+this.discountMax),this.discount=0):e<0?(this.$message.error("请正确输入折扣金额"+this.discountMax),this.discount=0):(console.log("输入抵扣",this.discount,this.onceCardDiscount),this.discount=e)},print:function(e){console.log(e),this.$router.push({name:"closeOrder",params:{data:this.laborOrder,vipNum:this.vipNum,list:this.list,resPrice:this.laborOrder.totalMoney-this.favMoney-this.codeDis-this.vipCount,type:e}})},addCode:function(){this.addCodes=!0},closeAddCode:function(){this.addCodes=!1},sendAddCode:function(){var e=this;this.$http.get("/LaborRedeemCode/discriminateCode",{merchantCode:this.merchantCode,exchangeCode:this.importCode,type:this.radio}).then(function(t){console.log("%c请求兑换码识别结果","color:red;font-size:20px",t),"true"==t.data.status?(t.data.exchangeCode=e.importCode,e.alertCodeList.push(t.data),e.addCodes=!1,e.importCode=""):alert("该兑换码已被使用或者暂无该兑换码")})},un:function(){this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:"XP3L62FXVH32HT0X",type:1}]).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code||alert(e.message)})},mes:function(e){console.log(this.isMes,e)},changeBox:function(e,t){this.getEditfindOrderInfo([],this.vipList)},ch:function(e,t){e&&console.log("选择的次卡",t)},cellClick:function(e){},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType}),console.log("选择的销售施工",this.list[this.chooseEmpidx])},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var a=[],s=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?a.push(e):s.push(e)}),o.empList1=o.deWeight(a),o.empList2=o.deWeight(s)):alert(e.message)})},getList:function(){var e=this;this.$http.get("/LaborBlance/findOrderInfo",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if(console.log("%c请求工单结算结果","color:red;font-size:20px",t),"10000"==t.code){t.data.laborOrder.totalMoney=t.data.orderPrice,e.laborOrder=t.data.laborOrder,t.data.goodsList.map(function(e){null==e.price&&(e.price=0),null==e.subtotalMoney&&(e.subtotalMoney=0)}),e.list=t.data.goodsList,e.vipNum=t.data.vipNumber,e.vipCards=t.data.vipCards,t.data.vipCards.map(function(t){t.isSelected&&e.vipList.push(t)});var o=[];e.vipList.map(function(e){o.push(e.customerMemberCardId)}),e.showtimeCardList=t.data.onceGoodsConsumeList,e.arrId=o,e.timeCard=t.data.onceGoodsConsumeList.length,e.timeCardList=t.data.onceGoodsConsumeList,e.onceGoodsList=t.data.onceGoodsConsumeList,e.couponList=t.data.coupons,e.balance=t.data.cardBalance,e.discountMax=t.data.maxDisCount,null!=t.data.redeemCode?(e.code=t.data.redeemCode.length,e.codeList=t.data.redeemCode):e.code=0,e.vipCount=t.data.deduction,e.onceCardDiscount=t.data.onceCardDiscount,e.cardDed=t.data.onceCardDiscount,e.dataShouldPay=t.data.beforeAIShouldPay,e.thisBalance=t.data.specialDeduction,e.orderPrice=t.data.orderPrice,e.onceGoodsListAll=t.data.onceGoodsListAll}else alert(t.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniq:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var a=0,s=0;s<t.length;s++){var i=e[o],r=t[s];if(JSON.stringify(r)===JSON.stringify(i)){a=1;break}}0==a&&t.push(e[o])}return t},getEditfindOrderInfo:function(e,t){var o=this;this.$http.post("LaborBlance/editFindOrderInfo",{laborOrder:this.laborOrder,goodsList:this.list,redeemCode:e,benefit:Number(this.favMoney),notifyCardOwner:this.isMes,vipCards:t}).then(function(e){o.vipCount=e.data.deduction,o.shouldPay=e.data.shouldPay,o.dataShouldPay=e.data.shouldPay,o.favMoney=0,o.balance=e.data.cardBalance,o.thisBalance=e.data.specialDeduction,o.showtimeCardList=e.data.onceGoodsConsumeList,o.onceGoodsListAll=e.data.onceGoodsListAll})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.getList()}},na=ra,la=(o("9c4c"),Object(l["a"])(na,Mo,Vo,!1,null,"9fbd9a26",null)),ca=la.exports,da=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"billdetail"},[o("div",{staticStyle:{display:"flex","align-items":"baseline","padding-left":"50px"}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"font-big"},[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.payName))]),e._v("  "),o("span",[e._v(e._s(e.laborOrder.payTel))])]),o("el-col",{attrs:{span:3}},[o("div",[e._v(e._s(e.laborOrder.payTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"40%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.thisMileage,callback:function(t){e.$set(e.laborOrder,"thisMileage",t)},expression:"laborOrder.thisMileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-row",{staticStyle:{"align-items":"center",display:"flex"}},[o("el-col",{attrs:{span:14}},[o("div",{staticClass:"font-big"},[e._v("已选项目"+e._s(e.list.length)+"个")])]),o("el-col",{staticStyle:{"align-items":"center"},attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"14px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("el-table",{staticStyle:{width:"70%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.list},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"132px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.employeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.employeeList,function(t,a){return o("div",{key:a},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])}),o("el-table-column",{attrs:{prpo:"num",align:"center",label:"提成业绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"20px"}},[o("div",{staticClass:"font-big",staticStyle:{"line-height":"60px"}},[e._v("支付信息")]),o("table",{staticClass:"table"},[o("tr",[o("td",[e._v("应收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.receivablePayMoney||0))]),o("td",[e._v("会员卡扣除")]),o("td",[e._v(e._s(e.laborOrder.vipOffsetMoney||0)+"元")]),o("td",[e._v("优惠券折扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.couponMoney||0))]),o("td",[e._v("人工优惠")]),o("td",[e._v("¥"+e._s(e.laborOrder.preferentialMoney||0))]),o("td",[e._v("现金")]),o("td",[e._v("¥"+e._s(e.laborOrder.cashPayMoney||0))])]),o("tr",[o("td",[e._v("微信转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatTransferPayMoney||0))]),o("td",[e._v("支付宝转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.aliTransferPayMoney||0))]),o("td",[e._v("刷银行卡")]),o("td",[e._v("¥"+e._s(e.laborOrder.swipecardPayMoney||0))]),o("td",[e._v("微信支付/支付宝支付")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatAliPay||0))])]),o("tr",[o("td",[e._v("兑换码抵扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.redeemCodeMoney||0))]),o("td",[e._v("实收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.realityMoney||0))]),o("td",[e._v("完成时间")]),o("td",[e._v(e._s(e.laborOrder.payTime))]),o("td",[e._v("操作人")]),o("td",[e._v(e._s(e.laborOrder.updateName))]),o("td",[e._v("支付方式")]),o("td",[e._v(e._s(1==e.laborOrder.payType?"现金":2==e.laborOrder.payType?"刷卡":3==e.laborOrder.payType?"微信":4==e.laborOrder.payType?"支付宝":"组合支付"))])])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"15px","align-items":"center"}},[o("div",[e._v("本次备注：")]),o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印显示,最多120字)"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer"},[o("div",[e._v("共"+e._s(e.server.length)+"项服务【含赠送"+e._s(e.fuWuGiftTimes)+"项】,")]),o("div",[e._v(e._s(e.product.length)+"件商品【含赠送"+e._s(e.goodsGiftTimes)+"件】")]),o("div",[e._v("总价: "),o("span",{staticStyle:{"font-size":"24px",color:"#ff0000","font-weight":"bold"}},[e._v("¥"+e._s(e.total))])]),o("el-button",{staticStyle:{width:"100px",height:"30px","margin-left":"30px"},attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保 存")])],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}})],1)},ua=[],pa={components:{emp:Ot},data:function(){var e;return{fuWuGiftTimes:0,goodsGiftTimes:0,server:[],product:[],chooseEmpidx:null,empAlert:!1,empList1:[],empList2:[],total:0,give2:"0",give:"0",remark:"",laborOrder:(e={redeemCodeMoney:"",vipOffsetMoney:"",preferentialMoney:"",cashPayMoney:"",wechatTransferPayMoney:"",aliTransferPayMoney:"",swipecardPayMoney:"",wechatPayMoney:"",aliPayMoney:""},Object(st["a"])(e,"redeemCodeMoney",""),Object(st["a"])(e,"createTime",""),Object(st["a"])(e,"creatorId",""),Object(st["a"])(e,"realityMoney",""),Object(st["a"])(e,"name","前台"),Object(st["a"])(e,"payType","已完成"),Object(st["a"])(e,"dis","0"),e),list:[],kil:"12314",date:"2019-10-10 14:27:36",phone:"13555555555",name:"王二",carNum:"皖B09090"}},computed:{},methods:{getList:function(){var e=this;this.$http.get("/LaborBlance/findInfoByOrderCode",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){console.log("%c请求结算查看结果","color:red;font-size:20px",t),"10000"==t.code?(t.data.settleaccounts.receivablePayMoney=Number(t.data.settleaccounts.receivablePayMoney).toFixed(2),e.fuWuGiftTimes=t.data.fuWuGiftTimes,e.goodsGiftTimes=t.data.goodsGiftTimes,e.laborOrder=t.data.settleaccounts,e.list=t.data.goodsList,e.remark=t.data.settleaccounts.additionalRemarks,e.list.map(function(t){1==t.type?e.server.push(t):2==t.type&&e.product.push(t),e.total+=Number(t.subtotalMoney)})):alert(t.message)})},save:function(){var e=this;this.$http.post("/LaborBlance/save",{workorderCode:this.orderCode,merchantCode:this.merchantCode,goodsList:this.list,mileage:this.laborOrder.thisMileage,additionalRemarks:this.remark}).then(function(t){console.log("%c请求保存结果","color:red;font-size:20px",t),"10000"==t.code?e.$router.push({path:"/",query:{merchantCode:e.merchantCode}}):alert(t.message)})},cellClick:function(e){console.log(e)},look:function(){var e="";e=1==this.workorderType?"/comprehensiveOrder":"/quickOrder",console.log("工单编号",this.orderCode,this.workorderType),this.$router.push({path:e,query:Object(st["a"])({merchantCode:this.merchantCode,workOrderCode:this.orderCode,orderType:this.workorderType,type:"look"},"orderType",this.workorderType)}),location.reload()},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType})},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var a=[],s=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?a.push(e):s.push(e)}),o.empList1=o.deWeight(a),o.empList2=o.deWeight(s)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.workorderType=this.$route.query.orderType,this.getList()}},ma=pa,ha=(o("f4a1"),Object(l["a"])(ma,da,ua,!1,null,"84cb6dfc",null)),fa=ha.exports,va=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"financialClose"},[o("div",{staticClass:"body"},[o("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"50px"}},[o("el-col",{attrs:{span:2}},[o("div",{staticClass:"font-big"},[e._v("财务结算")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center"},attrs:{span:8}},[o("div",[e._v("工单编号:")]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("div",{staticStyle:{"padding-top":"5px"}},[e._v(e._s(e.form.laborOrder.workorderCode))])]),o("el-col",{attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"14px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("div",[o("table",{staticClass:"table"},[o("tr",[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},e._l(e.form.vipCards,function(t,a){return o("div",{key:a,staticClass:"d-flex",staticStyle:{padding:"25px 0px"}},[o("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(t))])])}),0)])]),o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",[e._v(e._s(e.notifyCardOwner?"通知持卡人":"不通知他人"))])])]),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.onceGoodsList,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.coupons,function(t,a){return o("div",{key:a,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("卡余额")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.form.cardBalance)+"元")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("已抵扣:¥"+e._s(e.form.specialDeduction||0))])])])]),o("tr",{staticStyle:{height:"60px"}},[o("td",{staticStyle:{"text-align":"left","padding-left":"30px"}},[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},e._l(e.form.redeemCode,function(t,a){return o("div",{key:a},[e._v(e._s(t.name))])}),0)])])]),o("div",{staticStyle:{"margin-right":"56px","margin-top":"50px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.deduction))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.redeemVerification))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.benefit))])])])]),o("div",{staticStyle:{background:"#ccc",height:"70px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("订单总金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.form.orderPrice))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",{staticClass:"red"},[e._v("¥"+e._s(e.form.benefit))]),o("div",{staticStyle:{"margin-left":"60px","margin-right":"10px"}},[e._v("应收总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(e.form.shouldPay))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("div",{staticStyle:{"margin-right":"15px"}},[e._v("支付方式：")]),o("div",[o("el-radio-group",{on:{change:e.radioChanges},model:{value:e.checkedRadio,callback:function(t){e.checkedRadio=t},expression:"checkedRadio"}},[o("el-radio",{attrs:{label:"1"}},[e._v("现金")]),o("el-radio",{attrs:{label:"3"}},[e._v("微信支付/支付宝支付")]),o("el-radio",{attrs:{label:"2"}},[e._v("刷卡")]),o("el-radio",{attrs:{label:"6"}},[e._v("支付宝转账")]),o("el-radio",{attrs:{label:"5"}},[e._v("微信转账")]),o("el-popover",{attrs:{placement:"bottom",width:"800",trigger:"manual"},model:{value:e.vis,callback:function(t){e.vis=t},expression:"vis"}},[o("div",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("现金：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.cash,callback:function(t){e.cash=t},expression:"cash"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:9}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("微信/支付宝支付：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.wx,callback:function(t){e.wx=t},expression:"wx"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("刷卡：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("微信转账：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.wxpay,callback:function(t){e.wxpay=t},expression:"wxpay"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("支付宝转账：")]),o("el-input",{staticStyle:{width:"30%"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",size:"mini"},model:{value:e.alipay,callback:function(t){e.alipay=t},expression:"alipay"}},[o("template",{slot:"prepend"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t\t\t")])],2)],1)]),o("el-col",{attrs:{span:5}},[o("div",{staticStyle:{"margin-top":"10px"}},[e._v("将微信二维码发送至")])]),o("el-col",{attrs:{span:12}},[o("el-radio-group",{staticStyle:{"margin-top":"10px"},on:{change:e.mesChange},model:{value:e.mesCode,callback:function(t){e.mesCode=t},expression:"mesCode"}},[o("el-radio",{attrs:{label:"1"}},[e._v("电脑")]),o("el-radio",{attrs:{label:"2"}},[e._v("一体机")])],1)],1)],1),o("el-radio",{attrs:{slot:"reference",label:"7"},slot:"reference"},[e._v("两种以上支付方式")])],1)],1)],1)]),o("div",{class:e.vis?"mt":"normal",staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px"}},[o("el-button",{staticStyle:{"margin-right":"35px"},attrs:{type:"text"},on:{click:e.back}},[e._v("返回")]),o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"small",type:"primary"},on:{click:e.close}},[e._v("财务结算")])],1)]),o("hint",{attrs:{notice:e.notice,onceClick:e.onceClick},on:{rec:e.rec,unrec:e.unrec}}),o("codeimg",{attrs:{codeIsShow:e.codeIsShow,codeImg:e.codeImg,price:e.codePrice},on:{closeCode:e.closeCode}})],1)},ga=[],ba=(o("4917"),o("34ef"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"code"},[o("el-dialog",{attrs:{center:"","close-on-click-modal":!1,"before-close":e.close,title:"提示",center:"",visible:e.codeIsShow,width:"30%"},on:{"update:visible":function(t){e.codeIsShow=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("h1",[e._v("¥"+e._s(e.price))]),o("div",[o("img",{staticStyle:{width:"200px",hieght:"200px"},attrs:{src:e.codeImg,alt:""}})])])])],1)}),ya=[],Ca={components:{},props:{codeIsShow:Boolean,codeImg:String,price:Number},data:function(){return{}},computed:{},watch:{},methods:{close:function(){this.$emit("closeCode")}},mounted:function(){},created:function(){}},wa=Ca,_a=(o("f903"),Object(l["a"])(wa,ba,ya,!1,null,"66b5d789",null)),xa=_a.exports,ka=(o("27ae").Base64,{components:{hint:Q,codeimg:xa},data:function(){return{gp:"",onceClick:!1,codePrice:0,payType:null,codeIsShow:!1,codeImg:null,base64null:null,base64:null,notice:!1,buyoncredit:0,mesCode:"1",alipay:"",wxpay:"",bank:"",ali:"",wx:"",cash:"",vis:!1,radios:null,checkedRadio:"",payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:"0",vipDis:"0",discount:"1",couponList:[],timeCardList:[],cardBalance:!1,showCard:!1,radio:!1,isMes:null,checkList:[],code:"0",balance:178,coupon:"1",timeCard:"1",vipNum:3,orderNum:"120314891023",notifyCardOwner:!1,form:{laborOrder:{workorderCode:""}}}},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,console.log(this.orderCode),this.getInfo()},methods:{getInfo:function(){var e=this;this.$http.get("/LaborBlance/getBalanceFinance",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if("10000"==t.code){var o=e.form,a=t.data;o.laborOrder=a.laborOrder,o.orderNo=a.orderNo,o.vipCards=a.vipCards,e.notifyCardOwner=a.notifyCardOwner,o.onceGoodsList=a.onceGoodsList,o.coupons=a.coupons,o.cardBalance=a.cardBalance,o.specialDeduction=a.specialDeduction,a.redeemCode.length>0&&(a.redeemCode.map(function(t){t.exchangeCode=t.code,t.merchantCode=e.merchantCode}),o.redeemCode=a.redeemCode),o.deduction=a.deduction,o.redeemVerification=a.redeemVerification||0,o.benefit=a.benefit,o.orderPrice=a.orderPrice,o.shouldPay=a.shouldPay,o.settleaccountsId=a.settleaccountsId,o.goodsList=a.goodsList}else alert(t.message)})},getClose:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,o){var a,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o="0"!=o,s=this.form,e.next=4,this.$http.post("/LaborBlance/balance/finance",(a={employeeId:localStorage.getItem("createId")||"",laborOrder:s.laborOrder,vipNumber:s.vipNumber,cardBalance:s.cardBalance,vipCards:s.vipCards,onceGoodsList:s.onceGoodsList,coupons:s.coupons},Object(st["a"])(a,"vipNumber",s.vipNumber),Object(st["a"])(a,"deduction",s.deduction),Object(st["a"])(a,"shouldPay",s.shouldPay),Object(st["a"])(a,"orderPrice",s.orderPrice),Object(st["a"])(a,"redeemCode",s.redeemCode),Object(st["a"])(a,"benefit",s.benefit),Object(st["a"])(a,"qrcodeTo",this.mesCode),Object(st["a"])(a,"payType",t),Object(st["a"])(a,"wechatAliPay",Number(this.wx)),Object(st["a"])(a,"cashPayMoney",Number(this.cash)),Object(st["a"])(a,"swipecardPayMoney",Number(this.bank)),Object(st["a"])(a,"wechatTransferPayMoney",Number(this.wxpay)),Object(st["a"])(a,"aliTransferPayMoney",Number(this.alipay)),Object(st["a"])(a,"vipOffsetMoney",s.deduction),Object(st["a"])(a,"settleaccountsId",s.settleaccountsId),Object(st["a"])(a,"buyoncredit",!1),Object(st["a"])(a,"orderNo",s.orderNo),a)).then(function(e){if("10000"==e.code){1==i.gp?i.$router.push({path:"/",query:{merchantCode:i.merchantCode,orderNo:i.form.orderNo}}):i.notice=!1,i.onceClick=!1}else alert(e.message)});case 4:case"end":return e.stop()}},e,this)}));function t(t,o){return e.apply(this,arguments)}return t}(),getCode:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post2("https://autodt-gateway.yunchefu.cn/message/wechat/miniAppQrCode",{appId:"wx7451a1aa96196cd1",path:"/pagesOrder/detail/index?orderNo="+this.form.orderNo+"&merchantCode="+this.merchantCode},{headers:{},responseType:"arraybuffer"}).then(function(e){t.codeIsShow=!0,t.codeImg="data:image/png;base64,"+btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),2==t.mesCode&&t.send(t.codeImg)});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),base64ImgtoFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",o=e.split(","),a=o[0].match(/:(.*?);/)[1],s=a.split("/")[1],i=atob(o[1]),r=i.length,n=new Uint8Array(r);while(r--)n[r]=i.charCodeAt(r);return new File([n],"".concat(t,".").concat(s),{type:a})},send:function(e){console.log("照片",e),this.$http.post("/merchantImg/sendPayQrCode",{merchantCode:this.merchantCode,name:this.codePrice,base64Photo:e}).then(function(e){console.log("%c请求发送到大屏幕","color:#70ff57;font-size:20px;font-weight:bold",e),"10000"==e.code||alert(e.message)})},close:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){var t,o,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.form,!1,t=!1,!1,o=this,this.gp=1,"3"!=this.checkedRadio&&"4"!=this.checkedRadio){e.next=24;break}return this.gp=0,this.payType=this.checkedRadio,e.next=11,this.getClose(this.payType,"1");case 11:this.getCode(),this.codePrice=this.form.shouldPay,!1,t=!1,!0,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.buyoncredit="1",e.next=52;break;case 24:if("7"!=this.checkedRadio){e.next=51;break}if(a=Number(this.cash)+Number(this.wx)+Number(this.bank)+Number(this.wxpay)+Number(this.alipay),this.codePrice=this.wx,s=[],""!=this.cash&&"0"!=this.cash&&s.push("1"),""!=this.wx&&"0"!=this.wx&&s.push("3"),""!=this.bank&&"0"!=this.bank&&s.push("2"),""!=this.wxpay&&"0"!=this.wxpay&&s.push("6"),""!=this.alipay&&"0"!=this.alipay&&s.push("5"),Number(a).toFixed(2)!=this.form.shouldPay){e.next=46;break}if(o.gp=0,i=s.indexOf("3")>-1,!(i&&s.length>=2)){e.next=43;break}return o.payType=s.join(","),e.next=40,o.getCode();case 40:t=!0,e.next=44;break;case 43:0==i&&s.length>=2?(this.gp=1,t=!0,this.payType=s.join(",")):s.length<2&&(t=!1,!1,this.$alert("请选择至少两种支付方式","提示",{confirmButtonText:"确定",callback:function(e){}}));case 44:e.next=48;break;case 46:console.log("this.form.shouldPay",this.form.shouldPay,Number(a).toFixed(2)),this.$alert("请正确输入金额","提示",{confirmButtonText:"确定",callback:function(e){}});case 48:!0,e.next=52;break;case 51:"1"==this.checkedRadio||"2"==this.checkedRadio||"5"==this.checkedRadio||"6"==this.checkedRadio?(!1,t=!0,!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.buyoncredit="0",this.payType=this.checkedRadio):(this.$alert("请选择支付方式","错误提示",{confirmButtonText:"确定",callback:function(e){}}),!1,!1,t=!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0,this.payType=this.checkedRadio);case 52:this.notice=t;case 53:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),rec:function(e){this.onceClick=!0,console.log("支付方式",this.payType),this.getClose(this.payType,"1"),this.notice=!1,this.buyoncredit=0},unrec:function(){this.notice=!1,this.buyoncredit=1},closeCode:function(){"3"==this.checkedRadio||0==this.gp?this.$router.push({path:"/",query:{merchantCode:this.merchantCode}}):this.codeIsShow=!1},mesChange:function(e){console.log(e)},radioChanges:function(e){console.log("选择的",e),"7"==e?this.vis=!this.vis:(this.vis=!1,this.cash=0,this.wx=0,this.bank=0,this.wxpay=0,this.alipay=0)},print:function(e){var t="",o=Number(this.cash)+Number(this.wx)+Number(this.bank)+Number(this.wxpay)+Number(this.alipay);if("7"==this.checkedRadio){var a=[];if(""!=this.cash&&a.push("1"),""!=this.wx&&a.push("3"),""!=this.bank&&a.push("2"),""!=this.wxpay&&a.push("6"),""!=this.alipay&&a.push("5"),Number(o).toFixed(2)==this.form.shouldPay){var s=a.indexOf("3")>-1;s&&a.length>=2?t=a.join(","):0==s&&a.length>=2?(t=a.join(","),b3=!0):a.length<2&&(b2=!1,b3=!1,this.$alert("请选择至少两种支付方式","提示",{confirmButtonText:"确定",callback:function(e){}}))}}else t=this.checkedRadio;console.log(e,t,this.checkedRadio),this.$router.push({name:"closeOrders",params:{data:this.form.laborOrder,vipNum:this.form.vipNumber,list:this.form.goodsList,resPrice:this.form.shouldPay,type:e,payType:t,wechatAliPay:this.wx,cashPayMoney:this.cash,swipecardPayMoney:this.bank,wechatTransferPayMoney:this.wxpay,aliTransferPayMoney:this.alipay}})},addCode:function(){},mes:function(e){console.log(this.isMes,e)},radioChange:function(){console.log(this.radio)},changeBox:function(e){this.cardBalance=!0},changeBox2:function(e){console.log("val2",e),this.showCard=1==e},look:function(){var e;console.log("订单详情",this.form.laborOrder.workorderCode),e=1==this.form.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:e,query:{merchantCode:this.merchantCode,workOrderCode:this.form.laborOrder.workorderCode,orderType:this.form.laborOrder.workorderType,type:"look"}}),location.reload()},back:function(){this.$router.go(-1)}},mounted:function(){}}),Sa=ka,Na=(o("f165"),Object(l["a"])(Sa,va,ga,!1,null,"7168d208",null)),La=Na.exports,Oa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.laborOrder.merchantName)+e._s(e.type))]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.all1)+Number(e.all2))+"元")]),o("table",{staticClass:"t2",staticStyle:{width:"40%"}},e._l(e.t4,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(Number(e.resPrice).toFixed(2)||0))]),o("td",[e._v(e._s(t.name2))]),o("td",[e._v(e._s(Number(e.resPrice).toFixed(2)||0))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.laborOrder.remarks))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.laborOrder.merchantAddress))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.laborOrder.merchantPhone))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}],staticStyle:{width:"150px","margin-top":"100px","margin-bottom":"100px"},attrs:{type:"primary"}},[e._v("打印")])],1)},$a=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],Ia={components:{},data:function(){return{type:"结算单",resPrice:0,company:"XXXXX",t4:[{name:"应付金额",price:"2450.00",name2:"剩余应付金额",price2:"2450.00"}],tel:"",addr:"",remark:"",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data;var t=this.$route.params.list;console.log("%c额就是那","color:#70ff57;font-size:20px;font-weight:bold",t),t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum,this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var o=new Date,a=o.toLocaleString("chinese",{hour12:!1});this.printTime=a.replace(/\//g,"-"),console.log(this.laborOrder)}},Ta=Ia,Aa=(o("a3de"),Object(l["a"])(Ta,Oa,$a,!1,null,"2794a852",null)),Pa=Aa.exports,Ma=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.laborOrder.merchantName)+e._s(e.type))]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.resPrice).toFixed(2))+"元")]),o("table",{staticClass:"t8",staticStyle:{width:"100%"}},e._l(e.t4,function(t,a){return o("tr",{key:a,staticClass:"tp",staticStyle:{float:"left",width:"auto",height:"40px"}},[o("td",{staticClass:"tm"},[e._v(e._s(t.name))]),o("td",{staticClass:"tm"},[e._v(e._s(Number(t.price).toFixed(2)))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.laborOrder.remarks))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.laborOrder.merchantAddress))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.laborOrder.merchantPhone))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}],staticStyle:{width:"150px","margin-top":"100px","margin-bottom":"100px"},attrs:{type:"primary"}},[e._v("打印")])],1)},Va=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],Da={components:{},data:function(){return{type:"结算单",resPrice:0,company:"XXXXX",t4:[],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data,console.log(this.$route.params);var t=this.$route.params.list;t.length>0&&t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum;var o=this.$route.params.payType.split(","),a=[];o.map(function(e){a.push({num:e})}),console.log("选择的type",a,o),""!=o?1==a.length?1==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"现金",price:this.$route.params.resPrice}]:3==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"微信/支付宝支付",price:this.$route.params.resPrice}]:2==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"银行卡支付",price:this.$route.params.resPrice}]:5==o?this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"微信转账",price:this.$route.params.resPrice}]:6==o&&(this.t4=[{name:"应付金额",price:this.$route.params.resPrice},{name:"支付宝转账",price:this.$route.params.resPrice}]):(a.map(function(t){1==t.num?(t.name="现金",t.price=e.$route.params.cashPayMoney):3==t.num?(t.name="微信/支付宝支付",t.price=e.$route.params.wechatAliPay):2==t.num?(t.name="银行卡支付",t.price=e.$route.params.swipecardPayMoney):5==t.num?(t.name="微信转账",t.price=e.$route.params.wechatTransferPayMoney):6==t.num&&(t.name="支付宝转账",t.price=e.$route.params.cashPayMoney)}),a.unshift({name:"应付金额",price:this.$route.params.resPrice}),this.t4=a):this.t4=[{name:"应付金额",price:this.$route.params.resPrice}],this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var s=new Date,i=s.toLocaleString("chinese",{hour12:!1});this.printTime=i.replace(/\//g,"-")}},za=Da,Ea=(o("3660"),Object(l["a"])(za,Ma,Va,!1,null,"8b664d0a",null)),Ga=Ea.exports,Fa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.company)+"服务中心报价单")]),o("div",[o("el-row",{staticStyle:{"font-size":"20px","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.orderNum))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.date))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.t1.userName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.t1.Phone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.t1.carNum))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.t1.vip)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.t1.brand))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.t1.vin))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.t1.approachTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.t1.kil))])])]),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]),o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,a){return o("tr",{key:a},[o("td",[e._v(e._s(a+1))]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.num))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.dis))]),o("td",[e._v(e._s(t.money))]),o("td",[e._v(e._s(t.remark))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all)+"元")])])])],2),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(e.prePrice)+"元")]),o("div",{staticClass:"box d-flex",staticStyle:{"flex-wrap":"wrap"}},e._l(e.t4,function(t,a){return o("div",{key:a,staticClass:"d-flex"},[o("div",{staticClass:"b1"},[e._v(e._s(t.name))]),o("div",{staticClass:"b1"},[e._v(e._s(t.price))])])}),0),o("div",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("*备注："),o("span",[e._v(e._s(e.remark))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.addr))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.tel))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)]),o("button",{directives:[{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}]},[e._v("打印")])])},ja=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],Ba={components:{},data:function(){return{company:"XXXXX",t4:[{name:"应付金额",price:"2450.00"},{name:"微信支付",price:"2450.00"}],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:"2100.00",t3:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],all:"2100.00",t2:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],t1:{userName:"",Phone:"",carNum:"",vip:"0",brand:"",vin:"",approachTime:"2019-10-08 10:00:00",kil:""},printTime:"2019-10-10 10:00:11",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){}},qa=Ba,Ra=(o("dd79"),Object(l["a"])(qa,Fa,ja,!1,null,"22a47fd7",null)),Ka=Ra.exports,Wa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[e._m(0),e._m(1),o("el-tabs",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"效果统计",name:"first"}},[o("resStatistical")],1),o("el-tab-pane",{attrs:{label:"发放优惠券",name:"second"}},[e._v("配置管理")]),o("el-tab-pane",{attrs:{label:"设置活动券",name:"third"}},[e._v("角色管理")]),o("el-tab-pane",{attrs:{label:"一体机优惠券管理",name:"fourth"}},[e._v("定时任务补偿")])],1)],1)},Ua=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("营销管理/优惠券设置")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%","margin-bottom":"40px"}},[o("hr")])}],Ja=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[o("div",{staticClass:"header"},[o("el-row",{staticStyle:{"text-align":"center"}},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("领取次数")]),o("div",[e._v(e._s(e.getNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("使用数")]),o("div",[e._v(e._s(e.useNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("拉新效果")]),o("div",[e._v(e._s(e.pullNew)+"人")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("收益效果")]),o("div",[e._v(e._s(e.getMoney)+"元")])])])],1)],1),o("div",{staticClass:"body"}),o("div",{staticClass:"footer"})])},Ha=[],Xa={components:{},data:function(){return{getMoney:"0",pullNew:"5",useNum:"0",getNum:"7"}},computed:{},methods:{},mounted:function(){},created:function(){}},Qa=Xa,Ya=(o("8eb7"),Object(l["a"])(Qa,Ja,Ha,!1,null,"2a78d224",null)),Za=Ya.exports,es={components:{resStatistical:Za},data:function(){return{activeName:"first"}},computed:{},methods:{handleClick:function(e,t){console.log(e,t)}},mounted:function(){},created:function(){}},ts=es,os=Object(l["a"])(ts,Wa,Ua,!1,null,"2115c1c4",null),as=os.exports;a["default"].use(k["a"]);var ss=new k["a"]({routes:[{path:"/noVip",name:"noVip",component:Q},{path:"/demo",name:"demo",component:G},{path:"/",name:"orderList",component:Se},{path:"/quickOrder",name:"quickOrder",component:tt,meta:{keepAlive:!0},children:[]},{path:"/quickOrderBill",name:"quickOrderBill",component:ht},{path:"/comprehensiveOrder",name:"comprehensiveOrder",component:Po},{path:"/close",name:"close",component:ca,meta:{keepAlive:!0}},{path:"/billdetail",name:"billdetail",component:fa},{path:"/financialClose",name:"financialClose",component:La},{path:"/A4",name:"A4",component:K},{path:"/closeOrder",name:"closeOrder",component:Pa},{path:"/closeOrders",name:"closeOrders",component:Ga},{path:"/offer",name:"offer",component:Ka},{path:"/index",name:"index",component:as},{path:"/resStatistical",name:"resStatistical",component:Za}],mode:"hash",base:"/orderList/"}),is=o("2f62");a["default"].use(is["a"]);var rs={pjtnews:0,count:1,userInfo:{},token:null,carList:[]},ns={list:function(e,t){e.carList=t},add:function(e){e.count+=1},reduce:function(e){e.count-=1},increment:function(e){e.userInfo={name:"王珊",age:"21"}},setToken:function(e,t){e.token=t}},ls={increment:function(e){e.commit("increment")},setToken:function(e){e.commit("setToken")}},cs=new is["a"].Store({state:rs,mutations:ns,actions:ls}),ds=o("df45"),us=o.n(ds),ps=o("5c96"),ms=o.n(ps);o("0fae");a["default"].prototype.$api=_,a["default"].prototype.$untils=C,a["default"].use(x["a"]),a["default"].prototype.$http=y,a["default"].config.productionTip=!1,a["default"].use(us.a),a["default"].use(ms.a),a["default"].prototype.bus=new a["default"],a["default"].prototype.carLists=new a["default"],window.carList="123",new a["default"]({router:ss,store:cs,render:function(e){return e(d)}}).$mount("#app")},5737:function(e,t,o){},"579d":function(e,t,o){},"58da":function(e,t,o){},"5d30":function(e,t,o){"use strict";var a=o("9677"),s=o.n(a);s.a},"61b2":function(e,t,o){},"61cf":function(e,t,o){},"64a9":function(e,t,o){},"64b5":function(e,t,o){"use strict";var a=o("d0c4"),s=o.n(a);s.a},"674e":function(e,t,o){"use strict";var a=o("ceac"),s=o.n(a);s.a},6984:function(e,t,o){},"6af3":function(e,t,o){},"6c1a":function(e,t,o){},7675:function(e,t,o){"use strict";var a=o("121f"),s=o.n(a);s.a},"7a95":function(e,t,o){},"7b76":function(e,t,o){},"7d2c":function(e,t,o){},"81a0":function(e,t,o){"use strict";var a=o("3a6d"),s=o.n(a);s.a},8466:function(e,t,o){"use strict";var a=o("bc97"),s=o.n(a);s.a},"88ae":function(e,t,o){"use strict";var a=o("6af3"),s=o.n(a);s.a},"8b1b":function(e,t,o){},"8b5a":function(e,t,o){},"8d08":function(e,t,o){},"8eb7":function(e,t,o){"use strict";var a=o("5737"),s=o.n(a);s.a},"901d":function(e,t,o){"use strict";var a=o("579d"),s=o.n(a);s.a},"95c3":function(e,t,o){},9677:function(e,t,o){},9684:function(e,t,o){"use strict";var a=o("112c"),s=o.n(a);s.a},"9ad7":function(e,t,o){},"9c4c":function(e,t,o){"use strict";var a=o("8b1b"),s=o.n(a);s.a},a3de:function(e,t,o){"use strict";var a=o("61cf"),s=o.n(a);s.a},a6d0:function(e,t,o){"use strict";var a=o("58da"),s=o.n(a);s.a},b65c:function(e,t,o){},babc:function(e,t,o){"use strict";var a=o("7d2c"),s=o.n(a);s.a},bc97:function(e,t,o){},bdc3:function(e,t,o){},c013:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAgCAYAAABQISshAAAD3ElEQVRYR+2YS4gcVRSG/7+6R6ILFwZRiKIL4yNKdOG4UMFkNQkoouIDnwliZJy6dXuCQckm40qRoFV1e3SMQiIGFIOYXVQEI0hGDSRGmJioIPjYJIoKio/pql+qZzp2t11d82CYaUkt657Xd8895z5oq9oJaQMW/vs6Mt7KhXJD61ItlPF2u0r1VGxLIwvhb9FAKi55SeClRVAE9y0r4eVnHuPP3WQXBaTiJtcIpQ+KIJrGf0iV3OeCvg/zdHoFBAKO1Tz2vzDE3zrB9AxIFjzJV0OfHRvTkgAhkrWh6dvfaaZtVTcT2CTplmxcqfzYlkbbZZcESGQ8dquXoaqWl6XjAJZPwfCG2PJAs05PgGQBV2JtELVzOvhDkx5vaq6XngHJAKzT64DumYLRWGRKg42s9BTI5lFdmEjjEFbUUcDB2HCs3ggWY2dv30eKaqS5FqzTw4BemUoK/pa4NquXngOp14tLdgl8qA5DHJgkB5YECMEngNqnM93p09RbQ4/b/pXX2JIAmSnA/+GsVch6OiOFU9RBoHEfmcPpt9Dd6YwUTtGSzIhwnB6PpUn6GT32g1gF4eLZwmRL69SRoqV9tlg6CWAC0GEA5wO8HMBlAM6aT9faD/LJyOcn7Uas0x2AdgNYNlugPHlBldiUovZxE+sCMrUEH8/Tza2RTg8FWZG23xtsVUcgrZ4vTF+Z520f5ImGncqorpkUvhv1+VPjXxBNrqNX2tfJVx7IF5HxVjUUrEuehrgJxDkAThJ6OzSlR7Px4Re1Iq3p+/mAEAxCQ5fZCJw2EtoK4JJpm+NEsrUxgdbpDUB3t/vLAeG6yPDdTLjbobJx2LNVbYH07NxgtDsypQemfb0DYKCTnVS80gU8OvyczkzP0McQWlbBf0GEz6PAuzozVqlqr6RbuwS4JzLeXUGklfT05VxAqHRjGJR3WacBQBlIzscJ1nBjOMxfrEt2AHykWZC2mn7T3IFIvhb6fNDEOtujfu0eHL+NDC+qz2ZVRyFdMWsYj9dFQzwYOG0j1PXxjkhvC015r40VgGppCszWuGq1lqfMbD3a8K/VKPUdKQjsj8h49baYNYJZQwAo/1k+uH0Lf7cufQvA7QUTtzkyfL7dV6Lyia6XfuvSrIjrt7HOHyciw6vmAtCuY2P5oOoFn+uNyfWh3zfeabwAJHEA/TzDAkdiw1Ob3HyA7Kj6karbnaRej7mQRc6tS98EcGe7HMH3QsOOHabIZt54ECUjrRemaUnix8j3zu2arZk4tU73ArofwHoAe0S+H/vcMRPd2coMO12bKK0QXA/iK5AfRX7+jt6w/w8CCVT6ND3rtgAAAABJRU5ErkJggg=="},ce69:function(e,t,o){"use strict";var a=o("9ad7"),s=o.n(a);s.a},ceac:function(e,t,o){},cee1:function(e,t,o){"use strict";var a=o("e2e0"),s=o.n(a);s.a},d0c4:function(e,t,o){},d1df:function(e,t,o){"use strict";var a=o("61b2"),s=o.n(a);s.a},dd79:function(e,t,o){"use strict";var a=o("8d08"),s=o.n(a);s.a},e2e0:function(e,t,o){},e4a1:function(e,t,o){},e5fb:function(e,t,o){"use strict";var a=o("bdc3"),s=o.n(a);s.a},f165:function(e,t,o){"use strict";var a=o("4bb5"),s=o.n(a);s.a},f4a1:function(e,t,o){"use strict";var a=o("e4a1"),s=o.n(a);s.a},f7ad:function(e,t,o){},f7d4:function(e,t,o){},f903:function(e,t,o){"use strict";var a=o("95c3"),s=o.n(a);s.a},fe78:function(e,t,o){}});