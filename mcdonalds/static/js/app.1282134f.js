(function(e){function t(t){for(var s,n,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)n=r[u],a[n]&&p.push(a[n][0]),a[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],s=!0,r=1;r<o.length;r++){var l=o[r];0!==a[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=o[0]))}return e}var s={},a={app:0},i=[];function n(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=s,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0215":function(e,t,o){},"034f":function(e,t,o){"use strict";var s=o("64a9"),a=o.n(s);a.a},"0580":function(e,t,o){},"059b":function(e,t,o){},"0611":function(e,t,o){"use strict";var s=o("8b5a"),a=o.n(s);a.a},"07b9":function(e,t,o){"use strict";var s=o("75fd"),a=o.n(s);a.a},"0807":function(e,t,o){},1113:function(e,t,o){"use strict";var s=o("0215"),a=o.n(s);a.a},"12d2":function(e,t,o){"use strict";var s=o("3690"),a=o.n(s);a.a},1360:function(e,t,o){"use strict";var s=o("81cf"),a=o.n(s);a.a},"15a4":function(e,t,o){"use strict";var s=o("9bbb"),a=o.n(s);a.a},"186a":function(e,t,o){},1948:function(e,t,o){"use strict";var s=o("8c27"),a=o.n(s);a.a},"1abc":function(e,t,o){"use strict";var s=o("68bc"),a=o.n(s);a.a},"1c83":function(e,t,o){"use strict";var s=o("e4c9"),a=o.n(s);a.a},"1e14":function(e,t,o){"use strict";var s=o("7aa9"),a=o.n(s);a.a},2237:function(e,t,o){"use strict";var s=o("d45a"),a=o.n(s);a.a},"23d2":function(e,t,o){"use strict";var s=o("994e"),a=o.n(s);a.a},"2bc3":function(e,t,o){"use strict";var s=o("059b"),a=o.n(s);a.a},"30f4":function(e,t,o){"use strict";var s=o("c5a5"),a=o.n(s);a.a},3141:function(e,t,o){},"33cb":function(e,t,o){},3690:function(e,t,o){},"36a8":function(e,t,o){"use strict";var s=o("c063"),a=o.n(s);a.a},"501d":function(e,t,o){"use strict";var s=o("c14b"),a=o.n(s);a.a},"533d":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var s=o("2b0e"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)},i=[],n=(o("57e7"),o("28a5"),{name:"app",components:{},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("/token/getToken",{}).then(function(t){e.setCookie("token",t.data.token,7)}),console.log(this.getCookie("token"))},setCookie:function(e,t,o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3);var a="expires="+s.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),s=0;s<o.length;s++){var a=o[s];while(" "==a.charAt(0))a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}}}),r=n,l=(o("034f"),o("2877")),c=Object(l["a"])(r,a,i,!1,null,null,null),d=c.exports,u=o("d225"),p=o("b0b4"),m=o("bc3a"),h=o.n(m);function f(e){for(var t=e+"=",o=document.cookie.split(";"),s=0;s<o.length;s++){var a=o[s];while(" "==a.charAt(0))a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}h.a.defaults.baseURL="http://47.103.159.175:8080",h.a.defaults.timeout=1e4;var v=f("token");h.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",h.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",h.a.interceptors.request.use(function(e){return v&&(e.headers.token=v),e},function(e){return Promise.error(e)});var g=function(){function e(){Object(u["a"])(this,e)}return Object(p["a"])(e,null,[{key:"get",value:function(e,t,o){return new Promise(function(s,a){h.a.get(e,{params:t},o).then(function(e){s(e.data)}).catch(function(e){a(e.data)})})}},{key:"post",value:function(e,t,o){return new Promise(function(s,a){h.a.post(e,JSON.stringify(t),o).then(function(e){s(e.data)}).catch(function(e){a(e.data)})})}}]),e}(),b=g,y=o("8c4f"),_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("h1",[e._v("demo")]),o("el-cascader",{attrs:{options:e.options},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),o("el-button",{on:{click:e.del}},[e._v("合并去重")]),o("el-input",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("el-button",{attrs:{type:"pramise"},on:{click:e.confirm}},[e._v("模糊搜索")]),e._l(e.list,function(t,s){return o("div",{key:s},[e._v(e._s(t.name)+e._s(t.phone)+e._s(t.carNUm))])})],2)},C=[],x=(o("6d67"),o("20d6"),o("d25f"),o("ac6a"),o("5df3"),o("4f7f"),o("7f7f"),o("3b2b"),o("386d"),{components:{},data:function(){return{list:[],search:"",searchList:[{name:"李磊",phone:"1008611",carNUm:"川A3C625"},{name:"韩梅梅",phone:"1001011",carNUm:"渝AAAAAA"},{name:"小明",phone:"15528034",carNUm:"川J12625"},{name:"小红",phone:"1008611",carNUm:"川A3C625"}],value:null,options:[{value:1,label:"1-1",children:[{value:2,label:"2-1",children:[{value:3,label:"3-1"}]}]}]}},computed:{},methods:{confirm:function(){console.log(this.searchList,this.search);var e=this.fuzzySearch(this.searchList,this.search);console.log("%c搜索出来的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.list=e},fuzzySearch:function(e,t){var o=new RegExp(t),s=[];console.log("关键字",o,o.test(e[0].name));for(var a=0;a<e.length;a++)(o.test(e[a].name)||o.test(e[a].phone)||o.test(e[a].carNUm))&&s.push(e[a]);return s},handleChange:function(e){console.log(e,this.value)},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.searchList=e.data)})},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(o.serverList=e.data)})},del:function(){var e=[{name:"小明",id:1,ch:"we"},{name:"小红",id:2,ch:"sdfssdfg"}],t=[{name:"小军",id:3,ch:"sedf"},{name:"韩梅梅",id:4,ch:"iop"},{name:"小红",id:2,ch:"sdfssdfg"}],o=e.concat(t);console.log("aasd",this.uniqs(o)),console.log(this.deWeight(o));new Set(o),this.deWeight(o),e.filter(function(e){return-1!==t.findIndex(function(t){return e.id===t.id})})},arrayNew:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var s=0,a=0;a<t.length;a++)if(e[o].id==t[a].id){s=1;break}0==s&&t.push(e[o])}return t},twoArraysToOne:function(e,t){for(var o=[],s=[],a=0;a<e.length;a++){for(var i=0,n=0;n<e.length;n++)e[a]===e[n]&&i++;i%2===1&&o.push(e[a])}for(var r=0;r<t.length;r++){for(var l=0,c=0;c<t.length;c++)t[r]===t[c]&&l++;l%2===1&&s.push(t[r])}return o=this.uniqs(o),s=this.uniqs(s),this.mergeArrayMerges(o,s)},mergeArrayMerges:function(e,t){return e.map(function(e,o){if(""!==e){var s=t.indexOf(e);s>-1&&t.splice(s,1)}}),e=e.concat(t),e},uniqs:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var s=0,a=0;a<t.length;a++){var i=e[o],n=t[a];if(JSON.stringify(n)===JSON.stringify(i)){s=1;break}}0==s&&t.push(e[o])}return t},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1==t.indexOf(e[o].id)&&t.push(e[o]);return t},uniq:function(e){for(var t=[],o=[],s=e.length,a=0;a<s;a++){for(var i=a+1;i<s;i++)e[a]===e[i]&&(a++,i=a);t.push(e[a]),o.push(a)}return console.log(o),t},MergeArray:function(e,t){for(var o=new Array,s=0;s<e.length;s++)o.push(e[s]);for(s=0;s<t.length;s++){for(var a=!0,i=0;i<e.length;i++)if(t[s]==e[i]){a=!1;break}a&&o.push(t[s])}return o}},mounted:function(){},created:function(){var e=this;this.$http.get("/merchantAssemble/getAssemble",{merchantCode:this.merchantCode}).then(function(t){console.log("获取拼团图片",t),"10000"===t.code&&(e.assembleImgList=t.data.assembleImgList,e.assembleImgLists=t.data.shareImgList),3==e.$route.query.clickStatus&&(e.sets=!0)})},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),w=x,S=(o("9326"),Object(l["a"])(w,_,C,!1,null,"e1de01fe",null)),k=S.exports,N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("div",{attrs:{id:"printTest"}},[o("h2",[e._v(e._s(e.company)+"服务中心报价单")]),o("div",[o("el-row",{staticStyle:{"font-size":"0.833312rem","text-align":"left"}},[o("el-col",{attrs:{span:8}},[o("div",[e._v("工单编号："),o("span",[e._v(e._s(e.orderNum))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("开单时间："),o("span",[e._v(e._s(e.date))])])]),o("el-col",{attrs:{span:8}},[o("div",[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])])],1),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.t1.userName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.t1.Phone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.t1.carNum))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.t1.vip)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.t1.brand))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.t1.vin))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.t1.approachTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.t1.kil))])])]),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]),o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(s+1))]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.num))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.dis))]),o("td",[e._v(e._s(t.money))]),o("td",[e._v(e._s(t.remark))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all)+"元")])])])],2),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(e.prePrice)+"元")]),o("div",{staticClass:"box d-flex",staticStyle:{"flex-wrap":"wrap"}},e._l(e.t4,function(t,s){return o("div",{key:s,staticClass:"d-flex"},[o("div",{staticClass:"b1"},[e._v(e._s(t.name))]),o("div",{staticClass:"b1"},[e._v(e._s(t.price))])])}),0),o("div",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("*备注："),o("span",[e._v(e._s(e.remark))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.addr))])]),o("el-row",{staticStyle:{color:"#666666"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"left"}},[e._v("联系电话："),o("span",[e._v(e._s(e.tel))])])]),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end"}},[o("div",[e._v("客户签字：")]),o("div",{staticStyle:{"border-bottom":"0.0625rem solid #797979",width:"7.5rem"}})])])],1)],1)])])},L=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],O={components:{},data:function(){return{company:"XXXXX",t4:[{name:"应付金额",price:"2450.00"},{name:"微信支付",price:"2450.00"}],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:"2100.00",t3:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],all:"2100.00",t2:[{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"},{name:"全车做漆",num:"1",price:"2200.00",dis:"100.00",money:"2100.00",remark:"--"}],t1:{userName:"",Phone:"",carNum:"",vip:"0",brand:"",vin:"",approachTime:"2019-10-08 10:00:00",kil:""},printTime:"2019-10-10 10:00:11",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{},mounted:function(){},created:function(){}},$=O,I=(o("2bc3"),Object(l["a"])($,N,L,!1,null,"85ee7d14",null)),T=I.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hint"},[o("el-dialog",{attrs:{center:"","close-on-click-modal":!1,title:"提示",center:"",visible:e.notice,width:"25%"},on:{"update:visible":function(t){e.notice=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("h3",[e._v("您选择了线下支付方式，请确认已收到客户钱款后再确认完成支付")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("结算时间：")]),o("div",{staticStyle:{width:"70%",height:"30px",background:"#f2f2f2","line-height":"30px","border-radius":"10px"}},[e._v(e._s(e.date))])])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-right":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#999","font-weight":"bold"},attrs:{type:"text"},on:{click:e.close}},[e._v("未收到钱款")])],1)]),o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"border-left":"0.5px solid #bcbcbc"}},[o("el-button",{staticStyle:{color:"#0000FF","font-weight":"bold"},attrs:{type:"text"},on:{click:e.confirm}},[e._v("已收款，确认")])],1)])],1)],1)])],1)},P=[],M={components:{},props:{notice:Boolean},data:function(){return{date:"2019-10-31 10:00:00",hintShow:!0}},computed:{},methods:{confirm:function(){this.$emit("rec")},close:function(){this.$emit("unrec")}},mounted:function(){},created:function(){}},E=M,z=(o("1abc"),Object(l["a"])(E,A,P,!1,null,"0b117795",null)),D=z.exports,V=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello",staticStyle:{width:"100%","margin-left":"-2px"}},[e._m(0),e._m(1),o("div",{staticStyle:{width:"100%","margin-top":"50px"}},[o("div",{staticClass:"d-flex"},[o("div",{staticStyle:{"margin-top":"5px","margin-left":"10px"}},[o("font",{attrs:{size:"4"}},[e._v("输入车牌号开单:")])],1),o("div",{staticStyle:{"margin-left":"10px"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.car,callback:function(t){e.car=t},expression:"car"}},e._l(e.province,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),o("div",{staticStyle:{"margin-left":"10px"}},[o("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.carNum,callback:function(t){e.carNum=t},expression:"carNum"}})],1),o("div",{staticStyle:{"margin-left":"10px"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.goQuickOrder}},[e._v("快捷开单")]),o("el-button",{attrs:{type:"primary"},on:{click:e.goCompre}},[e._v("综合开单")]),o("el-button",{attrs:{type:"primary"}},[e._v("使用兑换码")]),o("el-button",{attrs:{type:"primary"}},[e._v("导出明细")])],1)]),o("ul",{staticStyle:{"margin-left":"-32px","text-align":"center"}},e._l(e.tabTitle,function(t,s){return o("li",{key:s,class:{active:e.cur==s},on:{click:function(t){return e.tabChange(s)}}},[e._v(e._s(t))])}),0),o("div",{staticClass:"d-flex",staticStyle:{width:"100%",height:"100px","margin-top":"60px","margin-left":"10px"}},[o("h4",{},[e._v("开单时间:")]),o("div",{staticClass:"block",staticStyle:{"margin-left":"10px","margin-top":"10px"}},[o("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.getTime,callback:function(t){e.getTime=t},expression:"getTime"}})],1),o("h4",{staticStyle:{"margin-left":"10px"}},[e._v("金额:")]),o("div",{staticStyle:{width:"80px","margin-top":"10px","margin-left":"10px"}},[o("el-input",{attrs:{placeholder:"请输入.."},model:{value:e.fMoney,callback:function(t){e.fMoney=t},expression:"fMoney"}})],1),o("div",{staticStyle:{"margin-top":"20px","margin-left":"10px"}},[e._v("---")]),o("div",{staticStyle:{width:"80px","margin-top":"10px","margin-left":"10px"}},[o("el-input",{attrs:{placeholder:"请输入.."},model:{value:e.eMoney,callback:function(t){e.eMoney=t},expression:"eMoney"}})],1),e._m(2),o("div",{staticStyle:{"margin-top":"10px","margin-left":"10px"}},[o("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"工单类型"},on:{change:e.typeChange},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},e._l(e.types,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[o("el-input",{attrs:{placeholder:"请输入车牌号/姓名/手机号"},model:{value:e.other,callback:function(t){e.other=t},expression:"other"}})],1),o("div",{staticStyle:{"margin-top":"10px","margin-left":"10px"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)]),o("div",{staticStyle:{width:"100%",overflow:"auto"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{prop:"workorderType",label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.workorderType?"综合单":"快捷单"))])]}}])}),o("el-table-column",{attrs:{prop:"workOrderCode",label:"工单编号",width:"180"}}),o("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),o("el-table-column",{attrs:{prop:"vehicleIdNum",label:"车架号"}}),o("el-table-column",{attrs:{prop:"customerName",label:"客户姓名"}}),o("el-table-column",{attrs:{prop:"customerPhone",label:"手机号码"}}),o("el-table-column",{attrs:{prop:"name",label:"服务项"}}),o("el-table-column",{attrs:{prop:"name",label:"商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical","word-wrap":"break-word","white-space":"normal"}},[o("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[e._l(t.row.laborOrderGoodsList,function(t,s){return o("div",{key:s},[e._v(e._s(t.goodsName))])}),e._l(t.row.laborOrderGoodsList,function(s,a){return o("div",{key:a,attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(s.goodsName)+e._s(t.row.laborOrderGoodsList.length>2?s.goodsName[1]+"...":"..."))])})],2)],1)]}}])}),o("el-table-column",{attrs:{prop:"name",label:"实收金额/元"}}),o("el-table-column",{attrs:{prop:"workorderTime",label:"开单时间"}}),o("el-table-column",{attrs:{prop:"address",label:"支付完成时间",width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:1==t.row.status||2==t.row.status?{color:"#0000ff"}:0==t.row.status||3==t.row.status?{color:"#00cc00"}:4==t.row.status?{color:"#ff0000"}:{color:"#333333"}},[e._v(e._s(0==t.row.status?"草稿":1==t.row.status?"施工中":2==t.row.status?"待确认":3==t.row.status?"待支付":4==t.row.status?"挂账":5==t.row.status?"已完成":"已作废"))])]}}])}),o("el-table-column",{attrs:{prop:"name",label:"操作",width:"244"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.finish(t.$index,t.row)}}},[e._v("完工")]):e._e(),1==t.row.status||2==t.row.status||3==t.row.status||4==t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.close(t.$index,t.row)}}},[e._v("结算")]):e._e(),4==t.row.status||5==t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.look(t.$index,t.row)}}},[e._v("查看")]):e._e(),1==t.row.status||3==t.row.status||2==t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.buyer(t.$index,t.row)}}},[e._v("挂账")]):e._e(),1==t.row.status||3==t.row.status||0==t.row.status||2==t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑")]):e._e(),6!=t.row.status?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.del(t.$index,t.row)}}},[e._v("作废")]):e._e(),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return e.copy(t.$index,t.row)}}},[e._v("复制")])]}}])})],1)],1),o("div",{staticStyle:{"margin-left":"380px",float:"left","margin-top":"20px"}},[o("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),o("finish",{attrs:{customerPhone:e.datas.customerPhone,plateNumber:e.datas.plateNumber,merchantName:e.datas.merchantName,merchantPhone:e.datas.merchantPhone,isShowFinish:e.isShowFinish},on:{closeCompAlert:e.closeCompAlert,compConfirm:e.compConfirm,noSend:e.noSend}})],1)},F=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%"}},[o("hr")])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"10px"}},[o("h4",{},[e._v("请选择工单类型:")])])}],G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%"},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger"},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},j=[],B={components:{},props:{isShowFinish:{type:Boolean},merchantPhone:String,merchantName:String,customerPhone:String,plateNumber:String},data:function(){return{status:null,completeConfirm:!0,tel:""}},computed:{},methods:{close:function(){this.$emit("closeCompAlert")},finish:function(e,t,o,s){var a=this;this.$http.get("/WorkOrder/sendMessage",{toPhone:e,action:"WORK_ORDER_FINISHED",plateNum:t,merchantName:o,merchantPhone:s}).then(function(e){console.log("请求完单结果",e),"10000"==e.code?a.status=5:alert(e.message)})},noSend:function(){this.$emit("noSend",this.status),console.log("传递的数据",this.$props),this.finish(this.tel,this.$props.plateNumber,this.$props.merchantName,this.$props.merchantPhone)},comConfirm:function(){this.$emit("compConfirm",this.status),this.finish(this.tel,this.$props.plateNumber,this.$props.merchantName,this.$props.merchantPhone)}},mounted:function(){},created:function(){}},q=B,R=(o("1948"),Object(l["a"])(q,G,j,!1,null,"6fb4b520",null)),K=R.exports,W={components:{finish:K},data:function(){return{isShowFinish:!1,finishIdx:null,datas:{customerPhone:"",plateNumber:"",merchantName:"",merchantPhone:""},province:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],tabTitle:["全部","草稿","施工中","待确认","待支付","挂账","已完成","已作废"],cur:0,other:"",orderType:"",types:[{value:"2",label:"快捷单"},{value:"1",label:"综合单"}],eMoney:"",fMoney:"",getTime:"",carNum:"",car:"",status:"",currentPage:1,pageSize:10,total:null,tableData:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(o.getTime()-7776e6),e.$emit("pick",[o,t])}}]},value6:"",value7:""}},created:function(){this.merchantCode=this.$route.query.merchantCode,this.getTableData(this.merchantCode,1,10)},methods:{getTableData:function(e,t,o,s,a,i,n,r,l,c){var d=this;this.$http.get("/WorkOrder/list",{merchantCode:e,pageNo:t,pageSize:o,startTime:s,endTime:a,status:i,serchMoney1:n,serchMoney2:r,customerName:l,orderType:c}).then(function(e){console.log("请求结果工单列表",e),"10000"==e.code&&(d.tableData=e.data,d.total=e.total)})},tabChange:function(e){console.log("选中的选项",e),this.cur=e,this.status=0==e?"":e-1,this.getTableData(this.merchantCode,1,10,"","",this.status)},search:function(){console.log("时间",this.getTime,"金额",this.fMoney+"--"+this.eMoney,"工单类型",this.orderType,"其他选项",this.other),this.getTableData(this.merchantCode,1,10,this.getTime[0],this.getTime[1],this.status,this.fMoney,this.eMoney,this.other,this.orderType)},typeChange:function(){console.log("工单类型",this.orderType)},finish:function(e,t){var o=this;console.log(t),this.finishIdx=e,this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:t.plateNumber}).then(function(e){if(console.log("请求商家电话/名称结果",e),"10000"==e.code){o.isShowFinish=!0;var s=t.customerPhone,a=t.plateNumber,i=e.data.merchantPhone,n=e.data.merchantName;o.datas={customerPhone:s,plateNumber:a,merchantName:n,merchantPhone:i}}else alert(e.message)})},compConfirm:function(e){this.isShowFinish=!1,this.status=e,this.tableData[this.finishIdx].status=5},noSend:function(e){this.status=e,this.isShowFinish=!1,this.tableData[this.finishIdx].status=5},closeCompAlert:function(){this.isShowFinish=!1},look:function(e,t){var o;o=5==t.status?"/billdetail":1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,type:"look"}}),location.reload()},close:function(e,t){this.$router.push({path:"/close",query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType}})},buyer:function(e,t){console.log("挂账",e,t),this.$http.get("/WorkOrder/buyoncredit",{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,isBuyoncredit:2}).then(function(e){console.log("请求工单挂账结果",e),"10000"==e.code?t.status=4:alert(e.message)})},set:function(e,t){var o;o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"set"}}),location.reload()},del:function(e,t){var o=this;console.log("作废",e,t),this.$http.get("/WorkOrder/updateStatus",{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode}).then(function(t){console.log("请求作废结果",t),"10000"==t.code&&(o.tableData[e].status=6)})},copy:function(e,t){var o;console.log(t),o=1==t.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:o,query:{merchantCode:this.merchantCode,workOrderCode:t.workOrderCode,orderType:t.workorderType,orderid:t.id,type:"copy"}}),location.reload()},goCompre:function(){var e;e=""!==this.car&&""!==this.carNUm?{car:this.car,carNum:this.carNum,merchantCode:this.merchantCode}:{merchantCode:this.merchantCode},this.$router.push({path:"/comprehensiveOrder",query:e})},goQuickOrder:function(){var e;e=""!==this.car&&""!==this.carNUm?{car:this.car,carNum:this.carNum,has:"has",merchantCode:this.merchantCode}:{has:"noHas",merchantCode:this.merchantCode},this.$router.push({path:"/quickOrder",query:e}),location.reload()},handleClick:function(){alert("button click")},handleCurrentChange:function(e){this.getTableData(this.merchantCode,e,10,this.getTime[0],this.getTime[1],this.status,this.fMoney,this.eMoney,this.other,this.orderType),console.log("当前页: ".concat(e))}}},H=W,U=(o("15a4"),Object(l["a"])(H,V,F,!1,null,"d1613c16",null)),J=U.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello",staticStyle:{width:"100%"}},[e._m(0),e._m(1),s("div",{staticClass:"d-spb",staticStyle:{width:"100%"}},[s("div",{staticClass:"d-flex"},[s("div",{staticStyle:{height:"60px","margin-left":"30px"}},[s("h3",[e._v(e._s(e.carNum))])]),s("div",{staticStyle:{"margin-left":"5px","margin-top":"30px"}},[s("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){0==e.dis?e.setCar():e.dm()}}})]),s("div",{staticStyle:{"margin-top":"25px","margin-left":"120px"}},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:e.dis},on:{change:function(t){return e.check()}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1),s("div",{staticStyle:{"margin-top":"25px","margin-left":"10px"}},[e._v("\n\t\t\t\t使用他人会员卡\n\t\t\t\t"),s("span",[e._v(e._s(e.otherName)+e._s(e.otherPhone)+e._s(e.otherCar))])])]),s("div",{staticStyle:{color:"#666666"}},[s("div",{staticClass:"d-flex",staticStyle:{"margin-top":"25px","align-items":"center"}},[s("div",[s("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"100px"},attrs:{size:"small",placeholder:"添加手机号",disabled:e.dis},model:{value:e.carAddTel,callback:function(t){e.carAddTel=t},expression:"carAddTel"}})],1),s("div",[s("el-input",{staticClass:"phone",staticStyle:{"margin-left":"20px",height:"23px",width:"100px"},attrs:{size:"small",placeholder:"添加姓名",disabled:e.dis},model:{value:e.carAddName,callback:function(t){e.carAddName=t},expression:"carAddName"}})],1),s("div",{staticClass:"d-flex",staticStyle:{"margin-left":"20px","align-items":"center","margin-top":"8px"}},[s("div",[e._v("\n\t\t\t\t\t\t\n\t\t\t\t\t挂账:\n\t\t\t\t\t")]),s("div",{staticStyle:{color:"red"}},[e._v("¥ "+e._s(e.buyer))])]),e.showInput?s("div",{staticClass:"d-flex",staticStyle:{"margin-left":"20px"}},[s("div",[e._v("本次公里数")]),s("div",{staticClass:"d-flex",staticStyle:{"margin-left":"5px"}},[s("el-input",{staticClass:"kil",staticStyle:{height:"23px",width:"50px"},attrs:{size:"small",disabled:e.dis},model:{value:e.carKil,callback:function(t){e.carKil=t},expression:"carKil"}}),s("div",{staticStyle:{"margin-top":"4px","margin-left":"5px"}},[e._v("KM")])],1)]):e._e()]),e.showInput?s("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[s("div",[s("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"100px"},attrs:{size:"small",placeholder:"添加发动机",disabled:e.dis},model:{value:e.carAddEngine,callback:function(t){e.carAddEngine=t},expression:"carAddEngine"}})],1),s("div",[s("el-input",{staticClass:"phone",staticStyle:{"margin-left":"20px",height:"23px",width:"100px"},attrs:{size:"small",placeholder:"添加车架号",disabled:e.dis},model:{value:e.carVin,callback:function(t){e.carVin=t},expression:"carVin"}})],1),s("div",{staticClass:"d-flex",staticStyle:{"margin-top":"5px"}},[s("div",{staticStyle:{"margin-left":"20px"}},[e._v("车辆注册日期")]),s("div",{staticClass:"c-date",staticStyle:{width:"100px",height:"23px","margin-left":"5px"}},[s("el-date-picker",{attrs:{size:"mini",clearable:!1,type:"date",placeholder:"选择日期",disabled:e.dis},model:{value:e.carDate,callback:function(t){e.carDate=t},expression:"carDate"}})],1)])]):e._e(),e.showInput?s("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px","align-items":"center"}},[s("div",[s("el-input",{staticClass:"phone",staticStyle:{height:"23px",width:"100px"},attrs:{size:"small",placeholder:"车身颜色",disabled:e.dis},model:{value:e.carColor,callback:function(t){e.carColor=t},expression:"carColor"}})],1),s("div",{staticClass:"cartype",staticStyle:{height:"23px","margin-left":"20px"}},[s("el-select",{attrs:{placeholder:"请选择车型",size:"mini",disabled:e.dis},on:{change:e.chCar},model:{value:e.carType,callback:function(t){e.carType=t},expression:"carType"}},e._l(e.carTypes,function(e){return s("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.brandId}})}),1),s("el-select",{attrs:{placeholder:"请筛选完车型后进行车系选择",size:"mini",disabled:e.dis},on:{"visible-change":e.chCar2},model:{value:e.amgValue,callback:function(t){e.amgValue=t},expression:"amgValue"}},e._l(e.amg,function(e){return s("el-option",{key:e.familyId,attrs:{label:e.familyName,value:e.familyId}})}),1)],1)]):e._e(),s("div",{staticClass:"d-flex",staticStyle:{"margin-top":"20px"}},[s("div",[e._v("开单时间:")]),s("div",[e._v(e._s(e.orderTime))])])])]),s("div",{staticClass:"d-flex",staticStyle:{height:"60px","margin-left":"30px"}},[s("div",{staticStyle:{width:"300px"}},[s("el-input",{attrs:{placeholder:"请输入搜索内容...",disabled:e.dis},on:{focus:e.searchShowClick},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("div",{staticStyle:{"margin-left":"10px"}},[s("el-button",{attrs:{type:"primary",disabled:e.dis},on:{click:e.searchShowClick}},[e._v("搜索")])],1),s("div",{staticStyle:{"margin-left":"20px","margin-top":"20px"}},[s("font",{attrs:{size:"1"}},[s("font",{attrs:{color:"#808080"}},[e._v("找不到项目？")]),s("el-button",{staticStyle:{color:"#0000FF"},attrs:{type:"text"},on:{click:e.openNs}},[e._v("新建服务")]),s("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"服务不计入库存,如:洗车、保养..."}},[s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})]),s("el-button",{staticStyle:{"margin-left":"5px",color:"#0000FF"},attrs:{type:"text"},on:{click:e.openNp}},[e._v("新建商品")]),s("span",{staticStyle:{color:"#0000FF"}},[e._v("(配件)")]),s("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"商品计入库存,如:玻璃水、机油滤芯..."}},[s("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1)],1)]),s("div",{staticStyle:{height:"50px","margin-top":"50px"}},[e._m(2),s("div",{staticClass:"vipBox d-flex"},e._l(e.sCheck,function(t,o){return s("div",{key:o,class:{actives:e.vipBoxCur==o},staticStyle:{padding:"0 10px",height:"40px","line-height":"40px",color:"#fff",background:"#b0b0b0","text-align":"center","border-radius":"10px","margin-right":"10px"},on:{click:function(s){return e.vipChange(t,o)}}},[e._v(e._s(t.memberCardName))])}),0),e._m(3)]),s("div",{staticStyle:{width:"100%","margin-top":"70px"}},[s("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[s("el-checkbox-group",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"},on:{change:e.checkGroup},model:{value:e.checkServer,callback:function(t){e.checkServer=t},expression:"checkServer"}},e._l(e.fCheck,function(t,o){return s("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(s){return e.checkChange(o,t)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[[s("div",[e._v(e._s(t.goodsName))]),s("div",{staticStyle:{"margin-left":"5px"}},[e._v("¥"+e._s(t.price))])]],2)}),1)],1),s("div",{staticStyle:{"text-align":"left",color:"#c5c5c8","margin-top":"20px","margin-left":"50px","border-left":"3px solid #6F93FE","padding-left":"3px"}},[e._v("储值卡内常用项目")]),s("el-checkbox-group",{on:{change:e.checkGroup},model:{value:e.checkServer2,callback:function(t){e.checkServer2=t},expression:"checkServer2"}},[s("div",{staticClass:"c-checkBoxs",staticStyle:{"margin-left":"50px"}},[s("div",{staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.laborItemsVoList,function(t,o){return s("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(s){return e.checkChange2(o,t)}}},[[s("div",[e._v(e._s(t.name))]),s("div",{staticClass:"d-flex"},[s("div",{staticClass:"discount"},[e._v(e._s(t.count)+"折")]),s("div",{staticStyle:{"margin-left":"5px",color:"#6F93FE"}},[e._v("\n\t\t\t\t\t\t\t\t¥\n\t\t\t\t\t\t\t\t"),s("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(t.price))])])])]],2)}),1),s("div",{staticClass:"c-checkBoxs",staticStyle:{width:"100%","flex-wrap":"wrap",display:"flex","justify-content":"left"}},e._l(e.vipbox.freeItemsVoList,function(t,o){return s("el-checkbox",{key:o,staticClass:"c-checked",staticStyle:{"margin-top":"10px"},attrs:{label:t},on:{change:function(s){return e.checkChange2(o,t)}}},[[s("div",[e._v(e._s(t.name))]),s("div",{staticStyle:{"margin-left":"5px"}},[e._v("剩余"+e._s(t.surplusCount)+"次")])]],2)}),1)])]),s("div",{staticStyle:{"margin-left":"20px","margin-top":"70px","text-align":"center"}},[s("font",{attrs:{size:"1"}},[s("font",{attrs:{color:"#808080"}},[e._v("更多项目请在搜索栏中搜索~")])],1)],1)],1),s("div",{staticClass:"end d-spb",staticStyle:{"margin-left":"20px"}},[s("div",{style:{position:"relative",visibility:e.carNone}},[s("div",{staticClass:"end-img d-flex"},[s("div",{staticClass:"carAlert",on:{click:function(t){0==e.dis?e.showCar():e.dm()}}},[s("img",{attrs:{src:o("c013"),alt:""}})]),s("div",{staticClass:"icon",staticStyle:{"text-align":"center"}},[e._v(e._s(0==e.dis?e.carList.length:e.fCheck.length))])]),e.isCarShow?s("div",{staticClass:"carTable"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carList,"show-summary":"","summary-method":e.getSummaries}},[s("el-table-column",{attrs:{prop:"goodsName",label:"已选项目",width:"180"}}),s("el-table-column",{attrs:{prop:"num",label:"清空",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[s("span",{on:{click:e.clearAll}},[s("i",{staticClass:"el-icon-delete"}),e._v("\n\t\t\t\t\t\t\t\t清空\n\t\t\t\t\t\t\t")])]}},{key:"default",fn:function(t){return[s("span",{staticClass:"carDel",staticStyle:{"margin-right":"5px",color:"#4c6acc","font-size":"5px"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),s("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[s("el-input-number",{attrs:{size:"small",min:1,max:10},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})],1)]}}],null,!1,1487180358)}),s("el-table-column",{attrs:{prop:"price",label:"",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){t.column,t.$index;return[s("i",{staticClass:"el-icon-close",on:{click:e.closeCar}})]}},{key:"default",fn:function(t){return[s("span",{staticStyle:{color:"rgb(223, 150, 90)"}},[e._v("¥"+e._s(t.row.price))])]}}],null,!1,2227630479)})],1)],1):e._e()]),s("div",{staticClass:"end-btn d-flex"},[s("div",{staticClass:"title"},[e._v("\n\t\t\t\t已选 \n\t\t\t\t"),s("span",{staticStyle:{"font-size":"28px",color:"#f00"}},[e._v(e._s(0==e.dis?e.carList.length:e.fCheck.length))]),e._v("\n\t\t\t\t 个项目\n\t\t\t")]),s("div",{staticStyle:{"margin-left":"10px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toBill}},[e._v("下一步")])],1)])]),s("el-dialog",{attrs:{visible:e.searchShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.searchShow=t}}},[s("div",{staticStyle:{"padding-top":"15px"}},[s("el-row",[e._l(e.tabTitle,function(t,o){return s("el-col",{key:o,staticClass:"tabs",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[s("p",{class:{active:e.cur==o},staticStyle:{"text-align":"center","padding-bottom":"10px"},on:{click:function(t){return e.tabChangess(o)}}},[e._v(e._s(t))])])}),s("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold",color:"#999acd","font-size":"18px","text-align":"center","line-height":"64px"},attrs:{span:8}},[e._v("已选项目")])],2)],1),s("div",{staticClass:"col",staticStyle:{"margin-top":"38px"}},[s("el-row",[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,o){return s("el-menu",{key:o,staticClass:"el-menu-vertical-demo",on:{open:e.handleOpen,close:e.handleClose}},[s("el-submenu",{attrs:{index:t.code}},[s("template",{slot:"title"},[s("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,o){return s("el-menu-item-group",{key:o},[s("el-menu-item",{attrs:{index:t.code},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)]),s("el-col",{attrs:{span:14}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-row",[s("el-col",{attrs:{span:8}},[e._v("名称")]),s("el-col",{attrs:{span:8}},[e._v("价格")]),s("el-col",{staticStyle:{"text-align":"right","padding-right":"13px"},attrs:{span:8}},[e._v("选择")])],1),s("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.serverList},on:{"selection-change":e.serverChecked}},[s("el-table-column",{attrs:{prop:"goodsName"}}),s("el-table-column",{attrs:{prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.price)+"\n\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{type:"selection"}})],1)],1)]),s("el-col",{attrs:{span:5}},e._l(e.serverSelected,function(t,o){return s("div",{key:o,staticClass:"grid-content bg-purple",staticStyle:{"text-align":"center"}},[s("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:20}},[e._v(e._s(t.goodsName))]),s("el-col",{staticStyle:{"margin-top":"13px"},attrs:{span:4}},[s("i",{staticClass:"el-icon-close",on:{click:function(o){return e.delSelected(t.goodsCode)}}})])],1)}),0)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.close}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.onfirm}},[e._v("确 定")])],1)]),s("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}}),s("newserve",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),s("setCar",{attrs:{setCarshow:e.setCarshow},on:{closeCarAlert:e.closeCarAlert,carConfirm:e.sendCarData}}),s("uservip",{attrs:{usevip:e.usevip},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.sendVipData}})],1)},Q=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/快捷开单")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"60px","margin-left":"30px"}},[o("h3",{staticStyle:{"text-align":"left"}},[e._v("快速选择开单项目")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("hr")])}],Y=(o("0cd8"),o("2caf"),o("c5f6"),o("f3e2"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建服务","close-on-click-modal":!1,center:"",visible:e.nsIsShow,width:"40%"},on:{"update:visible":function(t){e.nsIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"服务名称"}},[o("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"服务分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择服务分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e.showHour?o("el-form-item",{attrs:{label:"工时/小时"}},[o("el-col",{attrs:{span:7}},[o("el-input",{model:{value:e.form.hour,callback:function(t){e.$set(e.form,"hour",t)},expression:"form.hour"}})],1),o("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[o("span",{staticStyle:{"margin-right":"10px"}},[e._v("工时单价")]),o("el-input",{staticStyle:{width:"60%"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1):e._e(),o("el-form-item",{attrs:{label:"一口价"}},[o("el-input",{model:{value:e.form.buy,callback:function(t){e.$set(e.form,"buy",t)},expression:"form.buy"}})],1),o("el-form-item",{attrs:{label:"服务模板"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务模板"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.nsList,function(e,t){return o("el-option",{key:t,attrs:{label:e.templateName,value:e.code}})}),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)}),Z=[],ee={components:{},props:{nsIsShow:Boolean,nsList:Array,searchList:Array},data:function(){return{options:null,value:null,showHour:!1,radio:"1",chooseRadio:null,List:[],form:{name:"",region:"",hour:"",price:"",buy:"",model:""},newServe:!0,tel:""}},computed:{},methods:{handleChange:function(e){console.log("%c选择德服务分类","color:#70ff57;font-size:20px;font-weight:bold",e,this.form.region)},fList:function(e){console.log("选择的",e)},chRadio:function(e){console.log(e),this.showHour=2==e},close:function(){this.$emit("closeNs")},save:function(){this.$emit("saveNs");var e,t,o,s,a,i,n=this.form;""!=n.region?(e=n.region[0].split(",")[0],t=n.region[1].split(",")[0],o=n.region[2].split(",")[0],s=n.region[0].split(",")[1],a=n.region[1].split(",")[1],i=n.region[2].split(",")[1]):alert("请选择服务分类"),console.log(e,s,t,a,o,i),this.getNewServe(n.name,e,s,t,a,o,i,n.buy,n.model),this.form={}},confirm:function(){this.$emit("sendNs");var e,t,o,s,a,i,n=this.form;""!=n.region?(e=n.region[0].split(",")[0],t=n.region[1].split(",")[0],o=n.region[2].split(",")[0],s=n.region[0].split(",")[1],a=n.region[1].split(",")[1],i=n.region[2].split(",")[1]):alert("请选择服务分类"),console.log(e,s,t,a,o,i),this.getNewServe(n.name,e,s,t,a,o,i,n.buy,n.model)},getNewServe:function(e,t,o,s,a,i,n,r,l){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"2",type:"2",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:s,twoCategoryName:a,threeCategoryCode:i,threeCategoryName:n,standardPrice:r,createName:"fnb",createCode:"007",templateCode:l}).then(function(e){console.log("新建服务结果",e),"10000"==e.code||alert(e.message)})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},te=ee,oe=(o("1e14"),Object(l["a"])(te,Y,Z,!1,null,"0a9d0112",null)),se=oe.exports,ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新建商品","close-on-click-modal":!1,center:"",visible:e.npIsShow,width:"50%"},on:{"update:visible":function(t){e.npIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"商品(配件)名称"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"商品(配件)分类"}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.searchList,placeholder:"请选择商品分类"},on:{change:e.handleChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-input",{attrs:{placeholder:'如"米其林"等'},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),o("el-form-item",{attrs:{label:"规格"}},[o("el-input",{attrs:{placeholder:'如"255/60R18"、"J000823"等'},model:{value:e.form.spe,callback:function(t){e.$set(e.form,"spe",t)},expression:"form.spe"}})],1),o("el-form-item",{attrs:{label:"计量单位"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择计量单位"},on:{focus:e.getUnit},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.unit,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}},[o("span",[e._v(e._s(t))])])}),1)],1),o("el-form-item",{attrs:{label:"商品(配件)售价"}},[o("el-input",{attrs:{placeholder:"¥0"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),o("el-form-item",{attrs:{label:"原厂编码"}},[o("el-input",{attrs:{placeholder:"请输入原厂编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),o("el-form-item",{attrs:{label:"库存阈值"}},[o("el-input",{attrs:{placeholder:"请输入安全库存预警值"},model:{value:e.form.repertory,callback:function(t){e.$set(e.form,"repertory",t)},expression:"form.repertory"}})],1),o("el-form-item",{attrs:{label:"配件编码"}},[o("el-input",{attrs:{placeholder:"请输入商品配件编码"},model:{value:e.form.coding,callback:function(t){e.$set(e.form,"coding",t)},expression:"form.coding"}})],1),o("el-form-item",{attrs:{label:"厂家类型"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择厂家类型"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.type,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"条形码"}},[o("el-input",{attrs:{placeholder:"请输入条形码"},model:{value:e.form.barCode,callback:function(t){e.$set(e.form,"barCode",t)},expression:"form.barCode"}})],1),o("el-form-item",{attrs:{label:"商品(配件)介绍"}},[o("el-input",{attrs:{placeholder:"请输入商品介绍、例如：库存/规格/品牌等",type:"textarea"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:e.save}},[e._v("保存并继续新建")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认新建")])],1)],1)],1)},ie=[],ne={components:{},props:{npIsShow:{type:Boolean},searchList:Array},data:function(){return{showHour:!1,radio:"1",chooseRadio:null,type:[{label:"原厂件",value:"1"},{label:"品牌件",value:"2"},{label:"副厂件",value:"3"},{label:"拆解件",value:"4"},{label:"修复件",value:"5"},{label:"假货",value:"6"}],unit:[],form:{name:"",region:"",brand:"",spe:"",unit:"",price:"",code:"",repertory:"",coding:"",model:"",barCode:"",text:""},newProduct:!0,tel:""}},computed:{},methods:{getUnit:function(){var e=this;this.$http.get("/laborSynthesize/getUnit",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code?e.unit=t.data:alert(t.message)})},handleChange:function(e){console.log(e)},close:function(){this.$emit("closeNp")},save:function(){this.$emit("saveNp");var e,t,o,s,a,i,n=this.form;""!=n.region?(e=n.region[0].split(",")[0],t=n.region[1].split(",")[0],o=n.region[2].split(",")[0],s=n.region[0].split(",")[1],a=n.region[1].split(",")[1],i=n.region[2].split(",")[1]):alert("请选择商品分类"),this.addNewProduct(n.name,e,s,t,a,o,i,n.price,n.brand,n.spe,n.unit,n.code,n.model,n.barCode,n.text),this.form=""},confirm:function(){this.$emit("sendNp");var e,t,o,s,a,i,n=this.form;""!=n.region?(e=n.region[0].split(",")[0],t=n.region[1].split(",")[0],o=n.region[2].split(",")[0],s=n.region[0].split(",")[1],a=n.region[1].split(",")[1],i=n.region[2].split(",")[1]):alert("请选择商品分类"),this.addNewProduct(n.name,e,s,t,a,o,i,n.price,n.brand,n.spe,n.unit,n.code,n.model,n.barCode,n.text)},addNewProduct:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h){this.$http.post("/laborSynthesize/addGoods",{merchantCode:this.merchantCode,operateType:"1",type:"1",name:e,oneCategoryCode:t,oneCategoryName:o,twoCategoryCode:s,twoCategoryName:a,threeCategoryCode:i,threeCategoryName:n,standardPrice:r,createName:"fnb",createCode:"007",brandName:l,specification:c,unit:d,oemCode:u,quality:p,snCode:m,description:h}).then(function(e){console.log("请求新建商品结果",e),e.code})}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},re=ne,le=(o("8899"),Object(l["a"])(re,ae,ie,!1,null,"4e4896bc",null)),ce=le.exports,de=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"setCar"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑车辆",center:"",visible:e.setCarshow,width:"30%"},on:{"update:visible":function(t){e.setCarshow=t}}},[o("div",{staticClass:"d-flex"},[o("el-select",{attrs:{size:"",placeholder:"无"},model:{value:e.carAbb,callback:function(t){e.carAbb=t},expression:"carAbb"}},e._l(e.carAbbs,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1),o("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.carNum,callback:function(t){e.carNum=t},expression:"carNum"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},ue=[],pe={name:"setCar",components:{},props:{setCarshow:{type:Boolean}},data:function(){return{carAbb:"",carAbbs:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],setCar:!0,carNum:""}},computed:{},methods:{close:function(){this.$emit("closeCarAlert",this.$props.setCarshow)},carConfirm:function(){console.log(this.carAbb+this.carNum),console.log("9876",this.$props.setCarshow),this.$emit("carConfirm",this.$props.setCarshow,this.carNum,this.carAbb)}},mounted:function(){},created:function(){}},me=pe,he=(o("8c44"),Object(l["a"])(me,de,ue,!1,null,"b0396eac",null)),fe=he.exports,ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"useVip"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"使用他人会员卡",center:"",visible:e.usevip,width:"30%"},on:{"update:visible":function(t){e.usevip=t}}},[o("div",[o("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"popper-class":"my-autocomplete",clearable:!0,"fetch-suggestions":e.querySearch,placeholder:"请输入客户姓名、手机号、车牌号进行搜索"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[o("el-row",[o("el-col",{attrs:{span:8}},[e._v(e._s(s.cName))]),o("el-col",{attrs:{span:8}},[e._v(e._s(s.phone))]),o("el-col",{attrs:{span:8}},[e._v(e._s(s.carNum))])],1)]}}]),model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.carConfirm}},[e._v("确 定")])],1)])],1)},ge=[],be={props:{usevip:{type:Boolean}},components:{},data:function(){return{restaurants:[],state:""}},computed:{},methods:{close:function(){this.$emit("closeVipAlert",this.$props.usevip)},carConfirm:function(){var e=this;console.log(this.state),""!=this.state?this.$http.get("/LaborFastOrder/findOtherVip",{merchantCode:this.merchantCode,condition:this.state}).then(function(t){console.log("请求使用他人会员卡结果",t),"10000"==t.code?e.$emit("vipConfirm",t.data.plateNumber,t.data.name,t.data.phone,t.data.customerCode):alert(t.message)}):alert("请输入他人的姓名/电话/车牌号")},querySearch:function(e,t){var o=this.restaurants,s=e?o.filter(this.createFilter(e)):o;t(s)},createFilter:function(e){return function(t){return 0===t.cName.toLowerCase().indexOf(e.toLowerCase())||0===t.phone.toLowerCase().indexOf(e.toLowerCase())||0===t.carNum.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log("点击",e),this.state=e.cName+"/"+e.phone+"/"+e.carNum,this.otherName=e.cName,this.otherPhone=e.phone,this.otherCar=e.carNum},handleIconClick:function(e){console.log("bi",e)},loadAll:function(){return[{cName:"张三",phone:"155280324555",carNum:"川Q1293"},{cName:"李四",phone:"12320324555",carNum:"川A12333"},{cName:"王麻子",phone:"15120324555",carNum:"川M18273"}]}},mounted:function(){this.restaurants=this.loadAll()},created:function(){this.merchantCode=this.$route.query.merchantCode}},ye=be,_e=(o("23d2"),Object(l["a"])(ye,ve,ge,!1,null,"872626ca",null)),Ce=_e.exports,xe={components:{newproduct:ce,newserve:se,setCar:fe,uservip:Ce},data:function(){return{npIsShow:!1,nsIsShow:!1,nsList:null,options:null,carNone:"",customerCode:null,cur:0,tabTitle:["服务","商品"],showInput:!1,serverSelected:[],serverList:[],searchShow:!1,searchList:[],isCarShow:!1,carList:[],carList1:[],carList2:[],allNum:0,checkServer2:[],sCheck:[],checkServer:[],fCheck:[],vipbox:[],vipBoxCur:null,usevip:null,otherName:"",otherPhone:"",otherCar:"",radio:null,search:"",orderTime:"今天",amgValue:"",amg:[],carType:"",carTypes:[],buyer:"0",carColor:"",carDate:"",carVin:"",carKil:"",carAddEngine:"",carAddName:"",carAddTel:"",setCarshow:!1,carNum:"暂无车牌",dis:!1}},created:function(){if(this.merchantCode=this.$route.query.merchantCode,this.useType=this.$route.query.type,this.orderId=this.$route.query.orderid,console.log("工单id",this.orderId),this.workOrderCode=this.$route.query.workOrderCode,"has"==this.$route.query.has&&(this.carNum=this.$route.query.car+this.$route.query.carNum,this.showInput=!0,this.inputVipList(this.carNum)),"look"==this.$route.query.type){var e="";this.getLookList(e),this.dis=!0,this.carNone="none",this.showInput=!0}else if("copy"==this.$route.query.type||"set"==this.$route.query.type){var t="copy";this.getLookList(t),this.dis=!1,this.carNone="hidden",this.showInput=!0}else this.getFcheck(),this.getCarBrand()},methods:{dm:function(){console.log("dis",this.dis)},getLookList:function(e){var t=this;this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:2}).then(function(e){console.log("请求查看快捷开单结果",e),"10000"==e.code?(t.carNum=e.data.plateNumber,t.carAddTel=e.data.customerPhone,t.carAddName=e.data.customerName,t.carKil=e.data.lastMileage,t.carDate=e.data.registeredDate,t.carAddEngine=e.data.engineNum,t.caVin=e.data.vehicleIdNum,t.carColor=e.data.vehicleColor,t.carType=e.data.modelName,t.amgValue=e.data.seriesName,t.fCheck=e.data.laborGoodsVoList,t.checkServer=t.fCheck,e.data.laborGoodsVoList.map(function(e){t.carList.push(e)}),1==e.data.isMyCard?t.radio=!1:t.radio=!0):alert(e.message)})},getFcheck:function(){var e=this;this.$http.get("/LaborGoods/findFastOrderGoods",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.goodsCode=e.code,e.goodsCome=3,e.goodsVipId=null}),e.fCheck=t.data)})},getVipProduct:function(e){var t=this;this.$http.get("/LaborFastOrder/findOtherVipGoods",{merchantCode:this.merchantCode,customerCode:e}).then(function(e){console.log("请求会员卡列表结果",e),"10000"==e.code?(e.data.map(function(e){3==e.memberCardType&&(e.laborItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=2,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),t.sCheck.push(e))}),t.radio=!0,console.log("%c展示的会员卡","color:#ff0000;font-size:20px;font-weight:bold",t.sCheck)):(alert(e.message),t.radio=!1)})},inputVipList:function(e){var t=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:e}).then(function(e){console.log("请求输入车牌号结果",e),"10000"==e.code?(t.carAddTel=e.data.customerPhone,t.carAddName=e.data.customerName,t.carKil=e.data.lastMileage,t.carDate=e.data.registeredDate,t.carAddEngine=e.data.engineNum,t.caVin=e.data.vehicleIdNum,t.carColor=e.data.vehicleColor,t.carType=e.data.modelName,t.amgValue=e.data.seriesName,t.goodsVipId=e.data.customerMemberCardId,t.merchantName=e.data.merchantName,t.merchantPhone=e.data.merchantPhone,t.showInput=!0,e.data.vipGoodsList&&(e.data.vipGoodsList.map(function(e){3==e.memberCardType&&(e.laborItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),e.freeItemsVoList.map(function(t){t.goodsCome=1,t.goodsName=t.name,t.goodsVipId=e.customerMemberCardId}),t.sCheck.push(e))}),console.log("%c自己会员卡","color:#70ff57;font-size:20px;font-weight:bold",t.sCheck))):alert(e.message)})},vipChange:function(e,t){console.log("选中的会员卡",e),this.vipBoxCur=t,this.vipbox=e,console.log("张氏的会员卡",this.vipbox)},chCar:function(e){this.brandId=e},chCar2:function(){var e=this;this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(t){"10000"==t.code?e.amg=t.data:alert(t.message)})},toBill:function(){var e,t;1==this.radio?(e=1,t=1):(e=0,t=2);var o=this.useType,s=this.orderId;console.log("type",o,s);var a=this.workOrderCode;this.$router.push({path:"/quickOrderBill",query:{merchantPhone:this.merchantPhone,merchantName:this.merchantName,orderid:s,workOrderCode:a,type:o,merchantCode:this.merchantCode,plateNumber:this.carNum,goodsVipId:this.goodsVipId,goodsCome:t,isMyCard:e,customerName:this.carAddName,customerPhone:this.carAddTel,mileage:this.carKil,engineNum:this.carAddEngine,vehicleIdNum:this.caVin,applyDate:this.carDate,carColor:this.carColor,modelName:this.carType,seriesName:this.amgValue,customerCode:this.customerCode,laborOrderGoodsList:this.carList}})},searchShowClick:function(){this.searchShow=!0,this.getTree("1")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.searchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data,console.log("%c商品模板","color:#70ff57;font-size:20px;font-weight:bold",t.options))})},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(o.serverList=e.data)})},tabChangess:function(e){console.log("选中的选项",e),this.cur=e,this.getTree(e+1)},delSelected:function(e){var t;this.serverList.map(function(o,s){e==o.goodsCode&&(t=s)}),this.$refs.multipleTable.toggleRowSelection(this.serverList[t],!1)},serverChecked:function(e){console.log("勾选选项",e),this.serverSelected=e},handleClassify:function(e){console.log("二级分类",e),this.getThree(e.code,"2")},close:function(){console.log("关闭"),this.searchShow=!1},onfirm:function(){for(var e in this.searchShow=!1,this.serverSelected.map(function(e){e.num=1,e.goodsCome=3,e.goodsCount=1}),this.serverSelected)this.serverSelected[e].num=1,this.fCheck.push(this.serverSelected[e]),this.checkServer.push(this.serverSelected[e]);this.carList=this.deWeight(this.checkServer),this.fCheck=this.deWeight(this.fCheck)},handleOpen:function(e){console.log("打开二级列表",e)},handleClose:function(e){console.log("关闭二级列表",e)},getSummaries:function(e){var t=e.columns,o=e.data,s=[],a=[];return console.log("params",e),t.forEach(function(e,t){if(0!==t){if(a="price"==e.property?o.map(function(e){return Number(e.num*e.price)}):o.map(function(e){return Number(e["num"])}),"price"==e.property)a.every(function(e){return isNaN(e)})||(s[t]=a.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),s[t]+=" 元");else if("num"==e.property){var i=o.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})||(s[t]=i.reduce(function(e,t){var o=Number(t);return isNaN(o)?e:e+t},0),s[t]+=" 件")}}else s[t]="总计"}),s},handleDelete:function(e,t){console.log("删除数据",e,t),this.carList.splice(e,1)},clearAll:function(e){console.log("全部清空",e),this.carList=[]},closeCar:function(){this.isCarShow=!1},showCar:function(){console.log("打开购物车弹窗"),this.isCarShow=!0},checkGroup:function(e){console.log("差大城市",e)},checkChange:function(e,t){t.num=1;var o=this.deWeight(this.checkServer),s=[];o.map(function(e){s.push(e)}),this.carList1=s,this.carList=this.carList1.concat(this.carList2)},checkChange2:function(e,t){t.num=1;var o=this.deWeight(this.checkServer2),s=[];o.map(function(e){s.push(e)}),this.carList2=s,this.carList=this.carList1.concat(s)},closeVipAlert:function(e){this.usevip=!1,this.radio=!1},sendVipData:function(e,t,o,s){this.otherName=t+"/",this.otherPhone=o+"/",this.otherCar=e,this.showInput=!0,this.usevip=!1,this.customerCode=s,this.getVipProduct(s)},check:function(){console.log("单选框",this.radio),this.radio?this.usevip=!0:(this.otherName="",this.otherPhone="",this.otherCar="")},closeCarAlert:function(e){this.setCarshow=!1},sendCarData:function(e,t,o){console.log("接收子组件传来的值",e,t,o),this.setCarshow=!1,this.carNum=o+t,this.inputVipList(this.carNum),this.showInput=!0},setCar:function(){this.setCarshow=!0},getCarBrand:function(){var e=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(t){"10000"==t.code&&(t.data.map(function(e){e.value=e.brandId,e.label=e.brandName}),e.carTypes=t.data)})},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){console.log("请求服务模板结果",t),"success"==t.code&&(e.nsList=t.data)}),this.getTree("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},openNp:function(){this.npIsShow=!0,this.getTree("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}}},we=xe,Se=(o("30f4"),Object(l["a"])(we,X,Q,!1,null,"5e195e2a",null)),ke=Se.exports,Ne=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"quickOrderBill"},[e._m(0),e._m(1),o("div",{staticClass:"choose",staticStyle:{"padding-left":"30px"}},[e._v("\n\t\t已选\n\t\t"),o("span",{staticStyle:{color:"#0000FF"}},[e._v(e._s(e.List.length))]),e._v("\n\t\t个项目\n\t")]),o("div",{staticStyle:{"padding-left":"30px","margin-top":"20px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"20px",backgroundColor:"#d7d7d7"},data:e.List}},[o("el-table-column",{attrs:{align:"center",prop:"name",label:"名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"单价",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"num",label:"数量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,disabled:0==e.dis?1==t.row.isGift:e.dis,size:"mini",label:"描述文字"},on:{change:e.handleChange},model:{value:t.row.num,callback:function(o){e.$set(t.row,"num",o)},expression:"scope.row.num"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotal",label:"小计",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.inputShow?o("el-input",{attrs:{size:"mini",placeholder:""},on:{change:e.changet},model:{value:t.row.subtotal,callback:function(o){e.$set(t.row,"subtotal",o)},expression:"scope.row.subtotal"}}):e._e(),0==e.inputShow?o("span",[e._v("¥"+e._s(t.row.subtotal))]):e._e(),0==e.inputShow?o("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){0==e.dis&&(e.inputShow=!0)}}}):e._e()]}}])}),o("el-table-column",{attrs:{align:"center",prop:"deduct",label:"提成",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.inputShow2?o("el-input",{attrs:{size:"mini",placeholder:""},on:{change:e.changet2},model:{value:t.row.deduct,callback:function(o){e.$set(t.row,"deduct",o)},expression:"scope.row.deduct"}}):e._e(),0==e.inputShow2?o("span",[e._v("¥"+e._s(t.row.deduct))]):e._e(),0==e.inputShow2?o("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){0==e.dis&&(e.inputShow2=!0)}}}):e._e()]}}])}),o("el-table-column",{attrs:{align:"center",prop:"emp",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.List)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售：")]),e._l(t.row.sell,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.employeeName))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工：")]),e._l(t.row.road,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.employeeName))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.List)}}},[e._v("删除")])],1),0==t.row.isGift?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.List)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1)],1),o("div",{staticClass:"d-flex remark"},[o("div",[e._v("本次备注:")]),o("div",{staticStyle:{width:"300px"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入备注信息(打印单显示,最多120字)",clearable:"",disabled:e.dis},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",color:"#000000","font-size":"18px"}},[e._v("\n\t\t\t总价:\n\t\t\t"),o("span",{staticStyle:{color:"#FF0000","font-size":"32px"}},[e._v("¥"+e._s(e.all))])]),o("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.goquick}},[e._v("继续添加项目")]),o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),o("div",{staticClass:"d-flex"},["set"!=e.useType?o("el-button",{attrs:{type:"primary",size:"small",disabled:e.dis},on:{click:e.goList}},[e._v("开单")]):e._e(),o("el-button",{attrs:{type:"primary",size:"small",disabled:e.dis},on:{click:e.goClose}},[e._v("结算")])],1),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"10px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.setCompAlert}},[e._v("完工")]),o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.setBuyerAlert}},[e._v("挂账")])],1)]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("buyer",{attrs:{carNumber:e.carNumber,buyerAlert:e.buyerAlert},on:{closeBuyerAlert:e.closeBuyerAlert,buyerConfirm:e.sendBuyerData}}),o("el-dialog",{attrs:{title:"完工确认","close-on-click-modal":!1,center:"",visible:e.isShowFinish,width:"30%"},on:{"update:visible":function(t){e.isShowFinish=t}}},[o("el-input",{attrs:{placeholder:"请输入需要通知的手机号"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeCompAlert}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.noSend}},[e._v("不发送短信提醒")]),o("el-button",{attrs:{type:"danger"},on:{click:e.comConfirm}},[e._v("发送短信提醒")])],1)],1)],1)},Le=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/洗美开单")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])}],Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,s){return o("el-col",{key:s,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,s){return o("el-col",{key:s,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},$e=[],Ie={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2)},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow)},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Te=Ie,Ae=(o("f321"),Object(l["a"])(Te,Oe,$e,!1,null,"fd3ba2c6",null)),Pe=Ae.exports,Me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{title:"挂账确认",center:"",visible:e.buyerAlert,width:"30%"},on:{"update:visible":function(t){e.buyerAlert=t}}},[o("div",[e._v("操作挂账后，工单中的内容不可修改，确定要对["+e._s(e.carNumber)+"]操作挂账么？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.buyerConfirm}},[e._v("确 定")])],1)])],1)},Ee=[],ze={components:{},props:{buyerAlert:{type:Boolean},carNumber:{type:String}},data:function(){return{}},computed:{},methods:{close:function(){this.$emit("closeBuyerAlert")},buyerConfirm:function(){console.log("确认挂账"),this.$emit("buyerConfirm")}},mounted:function(){},created:function(){}},De=ze,Ve=(o("ced6"),Object(l["a"])(De,Me,Ee,!1,null,"2ec5990a",null)),Fe=Ve.exports,Ge={components:{emp:Pe,buyer:Fe,comp:K},data:function(){return{carNumber:null,mapList:null,form:{},buyerAlert:!1,isShowFinish:!1,tel:null,chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,inputShow:!1,inputShow2:!1,allArr:[],all:0,remark:"",List:[],dis:!1}},computed:{},created:function(){var e=this.$route.query,t=this.form;this.useType=this.$route.query.type,this.carNumber=e.plateNumber,this.merchantCode=this.$route.query.merchantCode,this.merchantPhone=t.merchantPhone,this.merchantName=t.merchantName,t.workOrderCode=e.workOrderCode,t.orderId=e.orderid,t.goodsCome=e.goodsCome,t.goodsVipId=e.goodsVipId,t.customerName=e.customerName,t.customerPhone=e.customerPhone,t.plateNumber=e.plateNumber,t.mileage=e.mileage,t.engineNum=e.engineNum,t.vehicleIdNum=e.vehicleIdNum,t.applyDate=e.applyDate,t.carColor=e.carColor,t.modelName=e.modelName,t.seriesName=e.seriesName,t.customerCode=e.customerCode,t.isMyCard=e.isMyCard,"set"==this.useType||"copy"==this.useType||"look"==this.useType?(console.log("%c传递的值","color:red",this.$route.query.laborOrderGoodsList),this.$route.query.laborOrderGoodsList.map(function(e){e.isGift=e.isGift||0,e.num=e.goodsCount||1,e.sell=null,e.road=null,e.subtotal=e.num*e.price,e.deduct=0})):this.$route.query.laborOrderGoodsList.map(function(e){e.isGift=0,e.num=1,e.sell=null,e.road=null,e.subtotal=e.num*e.price,e.deduct=0}),"look"==this.$route.query.type&&(this.dis=!0),this.List=this.$route.query.laborOrderGoodsList},methods:{setBillOrder:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C,x){var w=this;this.$http.post("/LaborFastOrder/addLaborOrder",{merchantCode:this.merchantCode,workOrderCode:this.form.workOrderCode,orderId:e,goodsCome:t,goodsVipId:o,type:s,workorderType:a,customerName:i,customerPhone:n,plateNumber:r,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,createId:v,updateId:g,workOrderTime:b,isMyCard:y,remarks:_,totalMoney:C,laborOrderGoodsList:x}).then(function(e){console.log("请求结果",e),"10000"==e.code?w.$router.push({path:"/orderList",query:{merchantCode:w.merchantCode}}):alert(e.message)})},billing:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C){var x=this;this.$http.post("/LaborFastOrder/addLaborOrder",{merchantCode:this.merchantCode,goodsCome:e,goodsVipId:t,type:o,workorderType:s,customerName:a,customerPhone:i,plateNumber:n,mileage:r,engineNum:l,vehicleIdNum:c,applyDate:d,carColor:u,modelName:p,seriesName:m,customerCode:h,createId:f,updateId:v,workOrderTime:g,isMyCard:b,remarks:y,totalMoney:_,laborOrderGoodsList:C}).then(function(e){console.log("新增工单请求结果",e),1e4==e.code?(x.$router.push({path:"/orderList",query:{merchantCode:x.merchantCode}}),x.$destroy("quickOrder")):alert(e.message)})},finish:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C,x,w,S,k,N){var L,O,$,I=this;console.log("传递",this.useType,this.form.orderId),"set"==this.useType?(L=this.form.workOrderCode,O=this.form.orderId,$=2):(L=null,O=null,$=null),this.$http.post("/LaborFastOrder/sendSms",{merchantCode:this.merchantCode,status:$,orderId:O,workOrderCode:L,goodsCome:e,goodsVipId:t,type:o,workorderType:s,customerName:a,customerPhone:i,plateNumber:n,mileage:r,engineNum:l,vehicleIdNum:c,applyDate:d,carColor:u,modelName:p,seriesName:m,customerCode:h,createId:f,updateId:v,workOrderTime:g,isMyCard:b,remarks:y,totalMoney:_,laborOrderGoodsList:C,toPhone:this.tel,action:"WORK_ORDER_FINISHED",plateNum:this.carNumber,merchantName:this.form.merchantName,merchantPhone:this.form.merchantPhone}).then(function(e){console.log("请求完工结果",e),1e4==e.code?I.$router.push({path:"/orderList",query:{merchantCode:I.merchantCode}}):alert(e.message)})},comConfirm:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal,e.goodsCount=e.num}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List),this.isShowFinish=!1},noSend:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal,e.goodsCount=e.num}),this.finish(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List),this.isShowFinish=!1},closeCompAlert:function(){this.isShowFinish=!1},setCompAlert:function(){this.isShowFinish=!0},buyerAjax:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C,x){var w,S,k=this;"set"==this.useType?(w=this.form.workOrderCode,S=this.form.orderId):(w=null,S=null),this.$http.post("/LaborFastOrder/buyoncredit",{isBuyoncredit:e,orderId:S,workOrderCode:w,merchantCode:this.merchantCode,goodsCome:t,goodsVipId:o,type:s,workorderType:a,customerName:i,customerPhone:n,plateNumber:r,mileage:l,engineNum:c,vehicleIdNum:d,applyDate:u,carColor:p,modelName:m,seriesName:h,customerCode:f,createId:v,updateId:g,workOrderTime:b,isMyCard:y,remarks:_,totalMoney:C,laborOrderGoodsList:x}).then(function(e){console.log("请求挂账结果",e),"success"==e.code?k.$router.push({path:"/orderList",query:{merchantCode:k.merchantCode}}):alert(e.message)})},sendBuyerData:function(){var e=this.form;this.List.map(function(e){e.subtotalMoney=e.subtotal,e.goodsCount=e.num}),this.buyerAlert=!1,this.buyerAjax("2",e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List)},closeBuyerAlert:function(){this.buyerAlert=!1},setBuyerAlert:function(){this.buyerAlert=!0},goquick:function(){this.$router.go(-1)},save:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal,e.goodsCount=e.num});var e=this.form;"copy"==this.useType||void 0==this.useType?this.billing(e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List):"set"==this.useType&&this.setBillOrder(e.orderId,e.goodsCome,e.goodsVipId,"1","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List)},goList:function(){this.List.map(function(e){e.subtotalMoney=e.subtotal,e.goodsCount=e.num}),console.log("%c最后开单提交数组","color:red;background:black;font-size:24px;font-weight:bold",this.List);var e=this.form;this.billing(e.goodsCome,e.goodsVipId,"2","2",e.customerName,e.customerPhone,e.plateNumber,e.mileage,e.engineNum,e.vehicleIdNum,e.applyDate,e.carColor,e.modelName,e.seriesName,e.customerCode,"007","007","2019-12-12",e.isMyCard,this.remark,this.all,this.List)},goClose:function(){this.$router.push({path:"/close",query:{id:"Agony"}})},changet:function(){var e=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(t,o){e+=t.subtotal*t.num}),this.all=parseFloat(e)},changet2:function(){this.inputShow2=!1},sendEmpData:function(e,t){this.empAlert=!1,console.log(e,t),""!=e&&(this.List[this.chooseEmpidx].sell=e),""!=t&&(this.List[this.chooseEmpidx].road=t);var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)}),this.List[this.chooseEmpidx].mapList=this.deWeight(o)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,console.log("显示弹窗",e,t),this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].code}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],s=[];e.data.map(function(e){1==e.employeeType?t.push(e):s.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(s)}})},set:function(e,t){var o=0;t[e].isGift=1,t[e].subtotal=0,console.log(t),this.List.forEach(function(e,t){o+=e.subtotal*e.num}),this.all=parseFloat(o)},deleteRow:function(e,t){console.log(e),this.List.splice(e,1);var o=0;console.log(this.List),this.inputShow=!1,this.List.forEach(function(e,t){o+=e.subtotal*e.num}),this.all=parseFloat(o)},handleChange:function(e){console.log(this.List);var t=0;this.List.forEach(function(e,o){t+=e.subtotal*e.num}),this.all=parseFloat(t)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){var e=this;this.List.map(function(t){e.all+=t.subtotal})}},je=Ge,Be=(o("733e"),Object(l["a"])(je,Ne,Le,!1,null,"7bd54d24",null)),qe=Be.exports,Re=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"comprehensiveOrder"},[e._m(0),e._m(1),o("div",{staticClass:"header",staticStyle:{background:"#F2F2F2",padding:"10px 0px"}},[o("div",{staticClass:" center"},[o("div",{staticStyle:{"font-size":"32px",color:"#fff","font-weight":"bold","margin-right":"15px"}},[e._v("老用户搜索")]),o("div",{staticClass:"d-flex",staticStyle:{width:"400px"}},[o("el-input",{staticStyle:{"border-top-right-radius":"0px","border-bottom-right-radius":"0px"},attrs:{placeholder:"根据客户姓名、电话、车牌号进行搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("el-button",{staticStyle:{background:"#66ccff",border:"1px solid #66ccff","border-top-left-radius":"0px","border-bottom-left-radius":"0px"},on:{click:e.searchOld}},[e._v("搜索")])],1),o("div",{staticStyle:{"margin-left":"15px","font-size":"24px",color:"#fff","font-weight":"bold"},on:{click:e.addUser}},[e._v("新增车辆/客户")])])]),o("div",{staticClass:"body"},[o("div",{staticClass:"b1"},[o("h4",[e._v("车主信息")]),o("el-form",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"},attrs:{"label-position":"right","label-width":"120px",model:e.owner}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("el-input",{attrs:{disabled:e.dis},on:{change:e.importCarnum},model:{value:e.owner.plateNumber,callback:function(t){e.$set(e.owner,"plateNumber",t)},expression:"owner.plateNumber"}})],1),o("el-form-item",{attrs:{label:"客户手机号"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.customerPhone,callback:function(t){e.$set(e.owner,"customerPhone",t)},expression:"owner.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.customerName,callback:function(t){e.$set(e.owner,"customerName",t)},expression:"owner.customerName"}})],1),o("el-form-item",{attrs:{label:"本次里程"}},[o("el-input",{attrs:{disabled:e.dis},model:{value:e.owner.mileage,callback:function(t){e.$set(e.owner,"mileage",t)},expression:"owner.mileage"}})],1),o("el-form-item",{attrs:{label:"下次保养里程"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请输入下次保养里程",disabled:e.dis},model:{value:e.owner.nextKeepFitKm,callback:function(t){e.$set(e.owner,"nextKeepFitKm",t)},expression:"owner.nextKeepFitKm"}},[o("el-option",{attrs:{label:Number(e.owner.mileage)+Number(5e3),value:Number(e.owner.mileage)+Number(5e3)}},[o("span",[e._v(e._s(Number(e.owner.mileage)+"+"+Number(5e3)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.mileage)+Number(7500),value:Number(e.owner.mileage)+Number(7500)}},[o("span",[e._v(e._s(Number(e.owner.mileage)+"+"+Number(7500)+"km"))])]),o("el-option",{attrs:{label:Number(e.owner.mileage)+Number(1e4),value:Number(e.owner.mileage)+Number(1e4)}},[o("span",[e._v(e._s(Number(e.owner.mileage)+"+"+Number(1e4)+"km"))])])],1)],1),o("el-form-item",{attrs:{label:"下次保养日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"填写日期有助于提醒用户",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.nextKeepFitTime,callback:function(t){e.$set(e.owner,"nextKeepFitTime",t)},expression:"owner.nextKeepFitTime"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号",disabled:e.dis},model:{value:e.owner.vehicleIdNum,callback:function(t){e.$set(e.owner,"vehicleIdNum",t)},expression:"owner.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号",disabled:e.dis},model:{value:e.owner.engineNum,callback:function(t){e.$set(e.owner,"engineNum",t)},expression:"owner.engineNum"}})],1),o("el-form-item",{attrs:{label:"车辆注册日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请输入注册日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.applyDate,callback:function(t){e.$set(e.owner,"applyDate",t)},expression:"owner.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择",disabled:e.dis},on:{change:e.chCar,focus:e.getBrand},model:{value:e.owner.brandName,callback:function(t){e.$set(e.owner,"brandName",t)},expression:"owner.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车系车型"}},[o("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择",disabled:e.dis},model:{value:e.owner.seriesName,callback:function(t){e.$set(e.owner,"seriesName",t)},expression:"owner.seriesName"}},e._l(e.series,function(e){return o("el-option",{key:e,attrs:{label:e.familyName,value:e.familyName}})}),1)],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色",disabled:e.dis},model:{value:e.owner.carColor,callback:function(t){e.$set(e.owner,"carColor",t)},expression:"owner.carColor"}})],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择保险到期日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.compulsoryInsureDeadline,callback:function(t){e.$set(e.owner,"compulsoryInsureDeadline",t)},expression:"owner.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"date",placeholder:"请选择年检日期",disabled:e.dis,"value-format":"yyyy-MM-dd"},model:{value:e.owner.annualInspectDate,callback:function(t){e.$set(e.owner,"annualInspectDate",t)},expression:"owner.annualInspectDate"}})],1),o("el-form-item",{attrs:{label:"预计交车时间"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"datetime",placeholder:"请选择交车时间",disabled:e.dis,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.owner.estimateSubmit,callback:function(t){e.$set(e.owner,"estimateSubmit",t)},expression:"owner.estimateSubmit"}})],1),o("el-form-item",{attrs:{label:"开单时间"}},[o("el-date-picker",{staticStyle:{width:"202px"},attrs:{type:"datetime",placeholder:"请选择开单时间",disabled:e.dis,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.owner.workorderTime,callback:function(t){e.$set(e.owner,"workorderTime",t)},expression:"owner.workorderTime"}})],1)],1),o("div",{staticClass:"farewell"},[o("h4",[e._v("送修人信息")]),o("div",{staticClass:"d-flex"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"26px","margin-right":"12px"}},[e._v("送修人姓名")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人姓名",disabled:e.dis},model:{value:e.owner.repairName,callback:function(t){e.$set(e.owner,"repairName",t)},expression:"owner.repairName"}})],1)]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{"font-size":"14px","margin-left":"30px","margin-right":"12px"}},[e._v("送修人手机号")]),o("div",[o("el-input",{attrs:{placeholder:"请输入送修人手机号",disabled:e.dis},model:{value:e.owner.repairPhone,callback:function(t){e.$set(e.owner,"repairPhone",t)},expression:"owner.repairPhone"}})],1)])])])],1),o("div",{staticClass:"b2",staticStyle:{"font-size":"14px",background:"#fff","border-radius":"15px","margin-top":"10px","padding-left":"36px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",{},[e._v("其他信息")]),o("div",{staticStyle:{"margin-left":"25px"}},[o("el-checkbox",{on:{change:e.userVipChange},model:{value:e.useVip,callback:function(t){e.useVip=t},expression:"useVip"}},[e._v("使用他人会员卡")])],1),1==e.useVip?o("div",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.vipName+"/"+e.vipPhone+"/"+e.vipCar))]):e._e(),o("el-button",{class:1==e.useVip?"c1":"",staticStyle:{"margin-right":"30px","margin-left":"45px"},attrs:{type:"text"},on:{click:function(t){1==e.useVip&&e.openVipPop()}}},[e._v("可用会员卡"+e._s(e.vipNum)+"张")]),o("div",{staticStyle:{color:"#999"}},[e._v("来店消费统计：来店消费"),o("span",[e._v(e._s(e.expense))]),e._v("次,消费"+e._s(e.price)+"元  挂账："+e._s(e.buyer)+"元")])],1),o("div",{staticClass:"lastTimeRemark"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h5",[e._v("上次备注：")]),o("div",[e._v(e._s(e.lastTimeRemark))])])])]),o("div",{staticClass:"b3",staticStyle:{background:"#fff","border-radius":"15px","margin-top":"10px","padding-top":"10px","padding-bottom":"10px"}},[o("h4",{staticStyle:{"padding-left":"36px"}},[e._v("维修/保养项目(工时)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"}}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"服务名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"serviceTime",label:"服务时长",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",disabled:e.dis},on:{change:function(o){return e.manOurMoneyChange(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"服务次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:null!=t.row.surplusCount?t.row.surplusCount:20,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"销售/施工人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.mapList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索服务名称",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNs}},[e._v("没搜到?新建服务")])],1)],1),o("b4",{attrs:{dis:e.dis,manOur:e.manOur2},on:{children:e.children1}}),o("b5",{attrs:{dis:e.dis,manOur:e.manOur3},on:{children:e.children2}}),o("b6",{attrs:{dis:e.dis,manOur:e.manOur4,useType:e.useType},on:{children:e.children3}}),o("b7",{attrs:{dis:e.dis,subjoin:e.subjoin,useType:e.useType},on:{selectChange:e.selectChange,priceChange:e.priceChange,remarksChange:e.remarksChange}}),o("div",{staticClass:"b8"},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","margin-left":"36px"}},[o("h4",{staticStyle:{"margin-right":"20px"}},[e._v("备注")]),o("el-input",{staticStyle:{width:"900px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印单显示,最多120字)",disabled:e.dis},model:{value:e.otherRemark,callback:function(t){e.otherRemark=t},expression:"otherRemark"}})],1)])],1),o("div",{staticClass:"footer"},[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"flex-end","align-items":"center","margin-right":"30px"}},[o("h5",[e._v("总价：")]),o("div",{staticStyle:{color:"#ff0000","font-size":"30px"}},[e._v("¥"+e._s(e.allNum))]),o("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[o("el-button",{attrs:{type:"text",disabled:e.dis},on:{click:e.save}},[e._v("保存")])],1),"set"!=e.useType?o("div",[o("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary",disabled:e.dis},on:{click:e.confirm}},[e._v("开单")])],1):e._e()])]),o("useOtherVip",{attrs:{usevip:e.usevip},on:{closeVipAlert:e.closeVipAlert,vipConfirm:e.vipConfirm}}),o("vippop",{attrs:{vipPop:e.vipPop,vipList:e.vipList,customerCode:e.cust},on:{closeVipPop:e.closeVipPop,confirmVipPop:e.confirmVipPop}}),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("nv",{attrs:{nvIsShow:e.nvIsShow,searchList:e.nvSearchList},on:{closeNv:e.closeNv,sendNv:e.sendNv}}),o("newServe",{attrs:{nsIsShow:e.nsIsShow,nsList:e.nsList,searchList:e.options},on:{sendNs:e.sendNs,saveNs:e.saveNs,closeNs:e.closeNs}}),o("addcar",{attrs:{addUserIsShow:e.addUserIsShow},on:{closeAc:e.closeAc,sendAc:e.sendAc}})],1)},Ke=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/综合开单")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])}],We=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.nvIsShow,width:"850px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.nvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#999999"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:8}},[e._v("服务分类")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:8}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName,"row-key":e.getRowKey1},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{attrs:{data:t.row.list,"row-key":e.getRowKey,"show-header":!1},on:{"selection-change":e.serverChecked2}},[o("el-table-column",{attrs:{align:"right",type:"selection","reserve-selection":!0}}),o("el-table-column",{attrs:{width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.memberCardType?"通用储值卡":2==t.row.memberCardType?"限定储值卡":3==t.row.memberCardType?"次卡":4==t.row.memberCardType?"默认卡":"卡外"))]),0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.row.memberCardName))]):e._e(),3==t.row.memberCardType&&0!=t.row.memberCardType?o("span",[e._v("(余次"+e._s(t.row.surplusCount)+")")]):e._e(),3!=t.row.memberCardType&&0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"10px"}},[e._v("余额:"+e._s(t.row.cardBalance))]):e._e()]}}],null,!0)}),o("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"d-flex"},[o("div",[e._v("¥"+e._s(t.row.price))]),null!=t.row.goodsDiscount&&0!=t.row.memberCardType?o("div",{staticStyle:{padding:"2px","margin-left":"5px","border-radius":"7px","text-align":"center",background:"#169BD5",color:"#fff"}},[e._v(e._s(t.row.goodsDiscount)+"折")]):e._e()])]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{width:"230",prop:"name"}}),o("el-table-column",{attrs:{width:"260",prop:"type"}}),o("el-table-column",{attrs:{prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.standardPrice)+"\n\t\t\t\t\t\t\t\t")]):e._e(),t.row.list.length>0?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t有会员卡\n\t\t\t\t\t\t\t\t")]):e._e()]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,s){return o("el-menu",{key:s,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,s){return o("el-menu-item-group",{key:s},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},He=[],Ue={components:{},props:{nvIsShow:Boolean,searchList:Array},data:function(){return{checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[]}},computed:{},watch:{},methods:{getRowKey1:function(e){return e.code},getRowKey:function(e){console.log("需要标识",e)},getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},cellcb:function(e){if(e.list.length>0)return"myCell"},toggleRowExpansion:function(e,t){console.log("手风琴下拉列表",e,t),this.secondList=t.list},confirm:function(){var e=this.deWeight(this.serverSelected);console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.$emit("sendNv",e)},close:function(){this.$emit("closeNv",!1)},serverChecked:function(e){this.arr1=e,this.serverSelected=this.arr1.concat(this.arr2),console.log("勾选选项",e,this.serverSelected)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),this.serverSelected=this.arr1.concat(this.arr2),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",e,this.serverSelected,this.arr3)},handleClassify:function(e){console.log("点击二级分类",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:"111",categoryCode:e,level:"2"}).then(function(e){console.log("请求的书距",e),"10000"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,3==t.memberCardType?t.price=e.standardPrice:t.price=t.memberCardGoodsPrice,t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Je=Ue,Xe=(o("07b9"),Object(l["a"])(Je,We,He,!1,null,"cc5152fc",null)),Qe=Xe.exports,Ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b4"},[o("h4",{staticStyle:{"padding-left":"36px"}},[e._v("维修/保养项目(配件)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"}}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",disabled:e.dis},on:{change:function(o){return e.manOurMoneyChange(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"0",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"销售人员",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{border:"1px dashed #3f3fff"}},[o("div",{staticStyle:{position:"relative",top:"-4px",left:"70px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){0==e.dis&&e.setEmpAlert(t.$index,e.manOur)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.mapList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.employeeType?t.employeeName:""))])])})],2)])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品")])],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},Ze=[],et=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#999999"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:7}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:4}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"table",attrs:{data:e.serverList,"show-header":!1,"row-class-name":e.getRowClassName},on:{"expand-change":e.toggleRowExpansion,"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection"}}),o("el-table-column",{attrs:{type:"expand"},on:{click:function(t){return e.showSecond(e.scope.$index)}},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{attrs:{data:t.row.list,"show-header":!1},on:{"selection-change":e.serverChecked2}},[o("el-table-column",{attrs:{align:"right",type:"selection"}}),o("el-table-column",{attrs:{width:"470"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(1==t.row.memberCardType?"通用储值卡":2==t.row.memberCardType?"限定储值卡":3==t.row.memberCardType?"次卡":4==t.row.memberCardType?"默认卡":"卡外"))]),0!=t.row.memberCardType?o("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.row.memberCardName))]):e._e(),o("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.row.price))]),3==t.row.memberCardType&&0!=t.row.memberCardType?o("span",[e._v("(余次"+e._s(t.row.surplusCount)+")")]):e._e(),3!=t.row.memberCardType&&0!=t.row.memberCardType?o("span",[e._v("余额:"+e._s(t.row.cardBalance))]):e._e()]}}],null,!0)}),o("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center"}},[o("div",[e._v("¥"+e._s(t.row.price))]),null!=t.row.goodsDiscount&&0!=t.row.memberCardType?o("div",{staticStyle:{width:"35px","margin-left":"5px","border-radius":"7px","text-align":"center","line-height":"20px",height:"20px",background:"#169BD5",color:"#fff"}},[e._v(e._s(t.row.goodsDiscount)+"折")]):e._e()])]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{width:"170",prop:"name"}}),o("el-table-column",{attrs:{width:"",prop:"type"}}),o("el-table-column",{attrs:{width:"",prop:"title"}}),o("el-table-column",{attrs:{width:"",prop:"type"}}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.list.length?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t¥"+e._s(t.row.standardPrice)+"\n\t\t\t\t\t\t\t\t")]):e._e(),t.row.list.length>0?o("span",[e._v("\n\t\t\t\t\t\t\t\t\t有会员卡\n\t\t\t\t\t\t\t\t")]):e._e()]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,s){return o("el-menu",{key:s,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,s){return o("el-menu-item-group",{key:s},[o("el-menu-item",{attrs:{index:t.name},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},tt=[],ot={props:{pnvIsShow:Boolean,searchList:Array},components:{},data:function(){return{checkList:[],secondList2:[],secondList:[],searchShow:!0,serverSelected:[],serverList:[],arr1:[],arr2:[],arr3:[],arr4:[]}},computed:{},methods:{getRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.list.length?"row-expand-cover":"row-checkbox-cover"},toggleRowExpansion:function(e){this.secondList=e.list},confirm:function(){var e=this.deWeight(this.serverSelected);console.log("%c最后提交的数组","color:#70ff57;font-size:20px;font-weight:bold",e),this.$emit("sendPnv",e)},close:function(){this.$emit("closePnv",!1)},showSecond:function(e){},serverChecked:function(e){this.arr1=e,this.serverSelected=this.arr1.concat(this.arr2)},serverChecked2:function(e){var t=[];this.arr3=t.concat(e),this.arr2=this.arr2.concat(this.arr3),this.serverSelected=this.arr1.concat(this.arr2),console.log("%c内部勾选选项","color:#ff0000;font-size:20px;font-weight:bold",e,this.serverSelected,this.arr3)},handleClassify:function(e){console.log("点击",e),this.getVipList(e.code)},handleOpen:function(e){},handleClose:function(e){},getVipList:function(e){var t=this;this.$http.get("/laborSynthesize/getVipGoods",{merchantCode:this.merchantCode,customerCode:"111",categoryCode:e,level:"2"}).then(function(e){console.log("%c请求三级列表","color:#70ff57;font-size:20px;font-weight:bold",e),"success"==e.code?(e.data.map(function(e){e.list.map(function(t){t.goodsName=e.name,t.goodsCount=1,t.mapList=[],t.goodsCome=1,t.isGift=0,t.goodsCode=e.code,t.goodsVipId=t.customerMemberCardId,3==t.memberCardType?t.price=e.standardPrice:t.price=t.memberCardGoodsPrice,t.subtotalMoney=t.price}),e.list.push({memberCardGoodsPrice:null,code:e.code,memberCardGoodsDiscount:null,memberCardType:"0",surplusCount:"10",serviceDiscount:null,cardBalance:null,memberCardName:e.name,customerMemberCardId:"107",goodsDiscount:null,goodsName:e.name,goodsCount:1,mapList:[],goodsCome:2,price:e.standardPrice,subtotalMoney:e.price,isGift:0,goodsCode:e.code})}),t.serverList=e.data,console.log("%c请求结果三级","color:red;font-size:20px",t.serverList)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},st=ot,at=(o("c907"),Object(l["a"])(st,et,tt,!1,null,"feb741ea",null)),it=at.exports,nt={components:{newproduct:ce,pnv:it,emp:Pe},props:{dis:{type:Boolean},manOur:{type:Array}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null}},computed:{},methods:{openNp:function(){this.npIsShow=!0,this.getTree("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("2")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){this.manOur=e,this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},set:function(e,t){t[e].isGift=1},deleteRow:function(e,t){this.manOur.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var s=this;console.log("%c111","font-size:100px"),s.manOur[s.chooseEmpidx].mapList=o,console.log(this.manOur)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],s=[];e.data.map(function(e){1==e.employeeType?t.push(e):s.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(s)}})},manOurMoneyChange:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},rt=nt,lt=(o("afa3"),Object(l["a"])(rt,Ye,Ze,!1,null,"17788267",null)),ct=lt.exports,dt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b5"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"}}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"材料名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","text-align":"center","justify-content":"center"}},[o("div",{staticStyle:{color:"#0000FF"}},[e._v(e._s(1==t.row.isGift?"【赠品】":""))]),o("div",[e._v(e._s(t.row.goodsName))])])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"}}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"geted",label:"已领数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"inventory",label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("0")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1),0==t.row.isGift&&0==t.row.memberCardType?o("div",[o("el-button",{attrs:{type:"text",size:"small",disabled:e.dis},on:{click:function(o){return e.set(t.$index,e.manOur)}}},[e._v("设为赠品")])],1):e._e()]}}])})],1),o("div",{staticClass:"lastTimeRemark",staticStyle:{"margin-top":"20px","padding-left":"25px","padding-top":"20px"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"搜索商品/品牌/规格",disabled:e.dis},model:{value:e.manOurSearch,callback:function(t){e.manOurSearch=t},expression:"manOurSearch"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showPartsNoVip},slot:"append"})],1),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"text",disabled:e.dis},on:{click:e.openNp}},[e._v("没搜到?新建商品(配件)")])],1),o("pnv",{attrs:{pnvIsShow:e.pnvIsShow,searchList:e.pnvSearchList},on:{closePnv:e.closePnv,sendPnv:e.sendPnv}}),o("newproduct",{attrs:{npIsShow:e.npIsShow,searchList:e.options},on:{sendNp:e.sendNp,saveNp:e.saveNp,closeNp:e.closeNp}})],1)},ut=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h4",{staticStyle:{"padding-left":"36px"}},[e._v("门店耗材"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("注:材料中的商品只记录库存变化,不计入结算余额")])])}],pt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"noVip"},[o("el-dialog",{attrs:{visible:e.pnvIsShow,width:"800px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pnvIsShow=t}}},[o("div",{staticStyle:{padding:"15px",background:"#999999"}},[o("el-row",[o("el-col",{staticClass:"server",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:7}},[e._v("服务名称")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("品牌")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:3}},[e._v("规格")]),o("el-col",{staticClass:"product",staticStyle:{"font-weight":"bold",color:"black","font-size":"18px"},attrs:{span:4}},[e._v("当前库存")]),o("el-col",{staticClass:"checked",staticStyle:{"font-weight":"bold","font-size":"18px",color:"black"},attrs:{span:4}},[e._v("售价")])],1)],1),o("div",{staticClass:"col"},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.serverList},on:{"selection-change":e.serverChecked}},[o("el-table-column",{attrs:{width:"30",type:"selection"}}),o("el-table-column",{attrs:{width:"200",prop:"goodsName"}}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{width:"",prop:"title"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{width:"",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t¥"+e._s(t.row.price)+"\n\t\t\t\t\t\t\t")]}}])})],1)],1),o("el-col",{attrs:{span:5}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"left"}},e._l(e.searchList,function(t,s){return o("el-menu",{key:s,staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:e.handleOpen,close:e.handleClose}},[o("el-submenu",{attrs:{index:t.name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.name))])]),e._l(t.mapList,function(t,s){return o("el-menu-item-group",{key:s},[o("el-menu-item",{attrs:{index:t.mapList},on:{click:function(o){return e.handleClassify(t)}}},[e._v(e._s(t.name))])],1)})],2)],1)}),1)])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},mt=[],ht={components:{},props:{pnvIsShow:Boolean,searchList:Array},data:function(){return{searchShow:!0,serverSelected:[],serverList:[]}},computed:{},methods:{confirm:function(){this.$emit("sendPnv",this.serverSelected)},close:function(){this.$emit("closePnv")},serverChecked:function(e){console.log("勾选选项",e),this.serverSelected=e},handleClassify:function(e){console.log("二级分类",e),this.getThree(e.code,"2")},getThree:function(e,t){var o=this;this.$http.get("/LaborGoods/findGoodsInfo",{merchantCode:this.merchantCode,categoryCode:e,level:t}).then(function(e){console.log("请求弹窗树三级结果",e),"10000"==e.code&&(e.data.map(function(e){e.goodsCount=1}),o.serverList=e.data)})},handleOpen:function(e){},handleClose:function(e){}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ft=ht,vt=(o("8df8"),Object(l["a"])(ft,pt,mt,!1,null,"aadb3d60",null)),gt=vt.exports,bt={components:{pnv:gt,newproduct:ce},props:{dis:{type:Boolean},manOur:{type:Array}},data:function(){return{npIsShow:!1,options:null,pnvIsShow:!1,pnvSearchList:[],manOurSearch:"",chooseEmpidx:null,empAlert:null}},computed:{},methods:{showPartsNoVip:function(){console.log("%c打开维修/保养项目(配件)--无会员卡弹窗","color:lightgreen;font-weight:bold;background:red"),this.pnvIsShow=!0,this.getTree("0")},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.pnvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data)})},sendPnv:function(e){this.manOur=e,this.$emit("children",this.manOur),this.pnvIsShow=!1},closePnv:function(){this.pnvIsShow=!1},openNp:function(){this.npIsShow=!0,this.getTree("2")},closeNp:function(){this.npIsShow=!1},saveNp:function(){},sendNp:function(){this.npIsShow=!1},set:function(e,t){t[e].isGift=1},deleteRow:function(e,t){this.manOur.splice(e,1)},manOurMoneyChange:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},yt=bt,_t=(o("1360"),Object(l["a"])(yt,dt,ut,!1,null,"59b34104",null)),Ct=_t.exports,xt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b6"},[o("h4",{staticStyle:{"padding-left":"36px"}},[e._v("客户自带材料")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:"set"==e.useType?e.manOur:e.manOurs,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"}}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入商品名称",disabled:e.dis},on:{change:e.input},model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入品牌",disabled:e.dis},on:{change:e.input},model:{value:t.row.brandName,callback:function(o){e.$set(t.row,"brandName",o)},expression:"scope.row.brandName"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"model",label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入规格型号",disabled:e.dis},on:{change:e.input},model:{value:t.row.model,callback:function(o){e.$set(t.row,"model",o)},expression:"scope.row.model"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"商品数量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,size:"mini",label:"描述文字",disabled:e.dis},on:{change:function(o){return e.changeManOurNum(t.row.price,t.row.goodsCount,t.$index,e.manOur)}},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},on:{change:e.input},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small",disabled:e.dis},nativeOn:{click:function(o){return o.preventDefault(),e.deleteRow(t.$index,e.manOur)}}},[e._v("删除")])],1)]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("h3",[e._v("+新增")])]):e._e()],1)},wt=[],St={components:{},props:{dis:{type:Boolean},manOur:{type:Array},useType:String},data:function(){return{manOurSearch:"",manOurs:[{goodsName:"",brandName:"",model:"",goodsCount:"1",remarks:""}]}},computed:{},methods:{add:function(){this.manOurs.push({goodsName:"",brandName:"",model:"",goodsCount:"1",remarks:""})},input:function(){this.$emit("children",this.manOurs)},deleteRow:function(e,t){this.manOurs.splice(e,1),this.$emit("children",this.manOurs)},changeManOurNum:function(e,t,o,s){this.$emit("children",this.manOurs)}},mounted:function(){},created:function(){}},kt=St,Nt=(o("2237"),Object(l["a"])(kt,xt,wt,!1,null,"978456c6",null)),Lt=Nt.exports,Ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"b7"},[e._m(0),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manOur,"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:"bold",fontSize:"16px",backgroundColor:"#d7d7d7"}}},[o("el-table-column",{attrs:{align:"center",prop:"title",label:"附加费用名称"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","justify-content":"center"}},[o("div",{staticStyle:{"margin-right":"10px"}},[e._v("附加费用名称")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("新增")]),o("div",{staticStyle:{color:"#409Eff"}},[e._v("/")]),o("el-button",{attrs:{type:"text"},on:{click:e.addlist}},[e._v("编辑")])],1)]}},{key:"default",fn:function(t){return[o("el-select",{attrs:{placeholder:"请选择",disabled:e.dis},on:{"visible-change":e.getlists,change:e.selectChange},model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}},e._l(e.lists,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)]}}])}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"金额/元"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入金额",disabled:e.dis},on:{change:e.priceChange},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"请输入备注",disabled:e.dis},on:{change:e.remarksChange},model:{value:t.row.remarks,callback:function(o){e.$set(t.row,"remarks",o)},expression:"scope.row.remarks"}})]}}])})],1),1!=e.dis?o("div",{staticClass:"add",on:{click:e.add}},[o("h3",[e._v("+新增")])]):e._e(),o("addition",{attrs:{isShowAddition:e.isShowAddition,addlists:e.addlists},on:{close:e.addPrice}})],1)},$t=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h4",{staticStyle:{"padding-left":"36px"}},[e._v("附加费用"),o("span",{staticStyle:{"margin-left":"38px",color:"#666666","font-size":"14px","font-weight":"0"}},[e._v("附加费用 注:加工费、管理费、税费等其他费用")])])}],It=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("el-dialog",{attrs:{title:"附加费用","close-on-click-modal":!1,center:"",visible:e.isShowAddition,width:"40%"},on:{close:e.close,"update:visible":function(t){e.isShowAddition=t}}},[o("el-input",{attrs:{maxlength:"10",placeholder:"请输入附加费类别,不超过10字"},model:{value:e.add,callback:function(t){e.add=t},expression:"add"}},[o("el-button",{staticStyle:{background:"#5b92fe",color:"#fff","border-top-left-radius":"0","border-bottom-left-radius":"0",border:"1px solid #5b92fe"},attrs:{slot:"append",type:"primary"},on:{click:e.adds},slot:"append"},[e._v("添 加")])],1),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("h3",[e._v("附加费列表")]),o("span",{staticStyle:{color:"#b2baca"}},[e._v("(最多创建10个,当前总计: "),o("span",{staticStyle:{color:"#fea022"}},[e._v(e._s(e.addlists.length)+"个")]),e._v(")")])]),o("el-table",{attrs:{"header-cell-style":{color:"#333",fontSize:"14px",fontWeight:900,background:"#f1f4f5"},data:e.addlists}},[o("el-table-column",{attrs:{type:"index",label:"序号"}}),o("el-table-column",{attrs:{prop:"name",width:"300",label:"附加费名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showSet?o("div",[e._v(e._s(t.row.name))]):e._e(),t.row.showSet?e._e():o("el-input",{model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.showSet?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.set(t.$index,t.row)}}},[e._v("编辑")]):e._e(),t.row.showSet?e._e():o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.save(t.$index,t.row)}}},[e._v("保存")]),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.del(t.$index,e.addlists)}}},[e._v("删除")])]}}])})],1)],1)],1)},Tt=[],At={components:{},props:{isShowAddition:Boolean,addlists:Array},data:function(){return{all:"3",add:""}},computed:{},methods:{set:function(e,t){console.log("编辑",t),t.showSet=!1,t.showSave=!0,this.$set(this.$props.addlists,e,t)},save:function(e,t){var o=this;t.showSet=!0,t.showSave=!1,this.$http.get("/laborSynthesize/editAdditional",{merchantCode:this.merchantCode,name:t.name,id:t.id}).then(function(s){console.log("%c请求结果","color:red;font-size:20px",s),"success"==s.code?o.$set(o.$props.addlists,e,t):alert(s.message)})},del:function(e,t){this.$http.get("/laborSynthesize/deleteAdditional",{merchantCode:this.merchantCode,name:t[e].name,id:t[e].id}).then(function(o){console.log("%c请求删除结果","color:red;font-size:20px",o),"success"==o.code?t.splice(e,1):alert(o.message)})},adds:function(){var e=this;""!=this.add?this.$http.get("/laborSynthesize/addAdditional",{name:this.add,merchantCode:this.merchantCode}).then(function(t){console.log("%c请求结果","color:red;font-size:20px",t),"success"==t.code?e.addlists.push({name:e.add,showSet:!0,showSave:!1}):alert(t.message)}):alert("请输入附加费类别")},close:function(){this.$emit("close",this.addlists)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Pt=At,Mt=(o("501d"),Object(l["a"])(Pt,It,Tt,!1,null,"5821240a",null)),Et=Mt.exports,zt={components:{addition:Et},props:{dis:{type:Boolean},subjoin:{type:Array},useType:String},data:function(){return{addlists:[],lists:null,isShowAddition:!1,options:[],manOur:[{name:"",price:"",remarks:""}]}},computed:{},watch:{subjoin:function(e){this.manOur=e}},methods:{addPrice:function(e){this.isShowAddition=!1,this.options=e},addlist:function(){this.isShowAddition=!0,this.getlists()},add:function(){this.manOur.push({name:"",price:"",remarks:""}),console.log("新增",this.$props.useType,this.manOur)},getlists:function(){var e=this;this.$http.get("/laborSynthesize/getAdditional",{merchantCode:this.merchantCode}).then(function(t){"success"==t.code?(e.lists=t.data,t.data.map(function(e){e.showSet=!0,e.showSave=!1}),e.addlists=t.data,console.log("打开的弹框",e.addlists)):alert(t.message)})},selectChange:function(){this.manOur;this.$emit("selectChange",this.manOur)},priceChange:function(){console.log(this.manOur),this.$emit("priceChange",this.manOur)},remarksChange:function(){this.$emit("remarksChange",this.manOur)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Dt=zt,Vt=(o("36a8"),Object(l["a"])(Dt,Ot,$t,!1,null,"11112bc2",null)),Ft=Vt.exports,Gt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"completeConfirm"},[o("el-dialog",{attrs:{title:"新增车辆/客户","close-on-click-modal":!1,center:"",visible:e.addUserIsShow,width:"50%","show-close":!1},on:{"update:visible":function(t){e.addUserIsShow=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"车牌号"}},[o("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入车牌号"},model:{value:e.form.carNum,callback:function(t){e.$set(e.form,"carNum",t)},expression:"form.carNum"}},[o("el-select",{attrs:{slot:"prepend",placeholder:"无"},slot:"prepend",model:{value:e.form.carAbb,callback:function(t){e.$set(e.form,"carAbb",t)},expression:"form.carAbb"}},e._l(e.carAbbs,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),o("el-form-item",{attrs:{label:"用户手机号"}},[o("el-input",{attrs:{type:"number",max:"11",placeholder:"请填写11位数字"},model:{value:e.form.customerPhone,callback:function(t){e.$set(e.form,"customerPhone",t)},expression:"form.customerPhone"}})],1),o("el-form-item",{attrs:{label:"客户姓名"}},[o("el-input",{attrs:{placeholder:"请输入客户姓名,不超过10个字",maxlength:"10"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),o("el-form-item",{attrs:{label:"车架号"}},[o("el-input",{attrs:{placeholder:"请输入车架号"},model:{value:e.form.vehicleIdNum,callback:function(t){e.$set(e.form,"vehicleIdNum",t)},expression:"form.vehicleIdNum"}})],1),o("el-form-item",{attrs:{label:"发动机号"}},[o("el-input",{attrs:{placeholder:"请输入发动机号"},model:{value:e.form.engineNum,callback:function(t){e.$set(e.form,"engineNum",t)},expression:"form.engineNum"}})],1),o("el-form-item",{attrs:{label:"注册日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择注册日期","value-format":"yyyy-MM-dd"},model:{value:e.form.applyDate,callback:function(t){e.$set(e.form,"applyDate",t)},expression:"form.applyDate"}})],1),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择品牌"},on:{focus:e.getBrand},model:{value:e.form.brandName,callback:function(t){e.$set(e.form,"brandName",t)},expression:"form.brandName"}},e._l(e.brand,function(e){return o("el-option",{key:e.brandId,attrs:{label:e.brandName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车型车系"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{focus:e.chCar},model:{value:e.form.seriesName,callback:function(t){e.$set(e.form,"seriesName",t)},expression:"form.seriesName"}},e._l(e.series,function(e){return o("el-option",{key:e,attrs:{label:e.familyName,value:e.value}})}),1)],1),o("el-form-item",{attrs:{label:"车身颜色"}},[o("el-input",{attrs:{placeholder:"请输入车身颜色"},model:{value:e.form.carColor,callback:function(t){e.$set(e.form,"carColor",t)},expression:"form.carColor"}})],1),o("el-form-item",{attrs:{label:"本次公里数"}},[o("el-input",{attrs:{placeholder:"请输入本次公里数"},model:{value:e.form.mileage,callback:function(t){e.$set(e.form,"mileage",t)},expression:"form.mileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1),o("el-form-item",{attrs:{label:"保险到期日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择保险到期日期","value-format":"yyyy-MM-dd"},model:{value:e.form.compulsoryInsureDeadline,callback:function(t){e.$set(e.form,"compulsoryInsureDeadline",t)},expression:"form.compulsoryInsureDeadline"}})],1),o("el-form-item",{attrs:{label:"年检日期"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择年检日期","value-format":"yyyy-MM-dd"},model:{value:e.form.annualInspectDate,callback:function(t){e.$set(e.form,"annualInspectDate",t)},expression:"form.annualInspectDate"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},jt=[],Bt={components:{},props:{addUserIsShow:Boolean},data:function(){return{brand:[],series:[],carAbbs:["京","湘","津","鄂","沪","粤","渝","琼","翼","川","晋","贵","辽","云","吉","陕","黑","甘","苏","青","浙","皖","藏","闽","蒙","赣","桂","鲁","宁","豫","新"],List:[],form:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",mileage:"",customerName:"",customerPhone:"",plateNumber:""},newProduct:!0,tel:""}},computed:{},methods:{handleChange:function(e){console.log(e)},close:function(){this.$emit("closeAc")},save:function(){this.$emit("noSend")},confirm:function(){this.form.plateNumber=this.form.carAbb+this.form.carNum,this.form.brandId=this.form.brandName.split("/")[0],this.form.brandName=this.form.brandName.split("/")[1],this.form.modelId=this.form.seriesName.split("/")[0],this.form.modelName=this.form.seriesName.split("/")[1],console.log(this.form.seriesName,this.form.modelId,this.form.modelName,this.form.brandId,this.form.brandName),this.$emit("sendAc",this.form)},chCar:function(e){var t=this;console.log("获取车品牌牌",this.form.brandName),""!=this.form.brandName&&(this.brandId=this.form.brandName.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求车型结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId+"/"+e.familyName,e.label=e.familyName}),t.series=e.data)})},getBrand:function(e){var t=this;this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求车品牌结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})}},mounted:function(){},created:function(){}},qt=Bt,Rt=(o("5a63"),Object(l["a"])(qt,Gt,jt,!1,null,"bde1dbae",null)),Kt=Rt.exports,Wt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vip"},[o("el-dialog",{attrs:{title:"","close-on-click-modal":!1,visible:e.vipPop,width:"60%","show-close":!1},on:{"update:visible":function(t){e.vipPop=t},close:e.close}},[o("h3",[e._v("会员卡内项目")]),o("div",{staticClass:"d-flex",attrs:{id:"d1"}},e._l(e.vipList,function(t,s){return o("div",{key:s,class:{active2:e.cur2==s},staticStyle:{padding:"0 10px",height:"40px","line-height":"40px",color:"#fff",background:"#b0b0b0","text-align":"center","border-radius":"10px","margin-right":"10px"},on:{click:function(o){return e.vipChange(t,s)}}},[e._v("\t\t\n\t\t\t\t"+e._s(t.memberCardName)+"\n\t\t\t")])}),0),o("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px","text-align":"center","font-size":"13px",color:"#333",background:"#F2F2F2"}},[e._v("全部服务"+e._s(e.serve)+"折,全部商品"+e._s(e.product)+"折,此处看添加卡内特殊优惠项目和赠送项目;如需添加其他项目,可在点击右上角关闭按钮后的页面添加.")]),o("div",{staticStyle:{color:"#333","font-size":"18px","margin-top":"15px",height:"73px"}},[o("div",e._l(e.tabTitle,function(t,s){return o("el-col",{key:s,staticClass:"tabs",attrs:{span:6}},[o("p",{class:{active:e.cur==s},staticStyle:{"text-align":"center","padding-bottom":"10px"},on:{click:function(t){return e.tabChangess(s)}}},[e._v(e._s(t))])])}),1)]),o("el-row",[o("el-col",{attrs:{span:18}},[o("div",{staticStyle:{"margin-top":"20px"}},[o("el-select",{attrs:{placeholder:"请选择服务类型"},on:{change:e.optionsChange},model:{value:e.serverType,callback:function(t){e.serverType=t},expression:"serverType"}},e._l(e.options,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),o("div",{staticStyle:{"margin-top":"20px"}},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#f2f2f2"},data:e.list,"row-key":e.getRowKeys},on:{"selection-change":e.selectChange}},[o("el-table-column",{attrs:{prop:"goodsName",label:"服务名称"}}),o("el-table-column",{attrs:{prop:"hour",label:"所需工时"}}),o("el-table-column",{attrs:{prop:"price",label:"工时单价(个/元)"}}),o("el-table-column",{attrs:{prop:"price",label:"单价"}}),o("el-table-column",{attrs:{type:"selection",prop:"money",label:"操作","reserve-selection":!0}})],1)],1)]),o("el-col",{attrs:{span:6}},[o("h4",[e._v("已选项目("+e._s(e.chooseList.length)+")")]),e._l(e.chooseList,function(t,s){return o("div",{key:s,staticClass:"d-spb",staticStyle:{"margin-left":"10px"}},[o("div",{staticClass:"d-flex"},[o("div",[e._v("["+e._s(t.choose)+"]")]),o("div",[e._v(e._s(t.goodsName))])]),o("div",[o("i",{staticClass:"el-icon-close",on:{click:function(o){return e.delSelected(t.goodsCode)}}})])])})],2)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},Ht=[],Ut={components:{},props:{vipPop:Boolean,vipList:Array,arr:Array,customerCode:String},data:function(){return{listType:"specialService",otherVipList:[],chooseList:[],cur:-1,cur2:-1,tabTitle:["特殊优惠项目--服务","特殊优惠项目--商品","赠送--服务","赠送--商品"],list:[],serverType:"",options:[],serve:10,product:"10",card:"会员卡",num:"300"}},computed:{},watch:{arr:function(e){this.list=e}},methods:{getRowKeys:function(e){return e.goodsCode},close:function(){this.$emit("closeVipPop")},confirm:function(){this.$emit("confirmVipPop",this.chooseList)},delSelected:function(e){var t;console.log("删除商品下表",e),this.list.map(function(o,s){e==o.goodsCode&&(t=s)}),this.$refs.multipleTable.toggleRowSelection(this.list[t],!1)},getList:function(e){var t=this;this.$http.get("/laborSynthesize/getOtherVipGoods",{merchantCode:this.merchantCode,vipId:e,customerCode:"3100000100106"}).then(function(e){console.log("%c请求会员卡内商品结果","color:red;font-size:20px",e),"10000"==e.code?t.otherVipList=e.data:alert(e.message)})},vipChange:function(e,t){this.getList(e.customerMemberCardId),console.log("选中行下把你",t),this.cur2=t},tabChangess:function(e){this.cur=e;var t=[],o=[],s=[],a=[],i=[],n=[],r=[],l=[];t=this.otherVipList.specialService,o=this.otherVipList.specialGoods,s=this.otherVipList.freeService,a=this.otherVipList.freeGoods,i=this.otherVipList.specialServiceClass,n=this.otherVipList.specialGoodsClass,r=this.otherVipList.freeServiceClass,l=this.otherVipList.freeGoodsClass,0==e?(t.map(function(e){e.choose="特殊优惠项目--服务"}),this.list=t,this.options=i,this.listType="specialService"):1==e?(o.map(function(e){e.choose="特殊优惠项目--商品"}),this.list=o,this.options=n,this.listType="specialGoods"):2==e?(s.map(function(e){e.choose="赠送--服务"}),this.list=s,this.options=r,this.listType="freeService"):3==e&&(t.map(function(e){e.choose="赠送--商品"}),this.list=a,this.options=l,this.listType="freeGoods")},selectChange:function(e){this.chooseList=e},optionsChange:function(e){console.log("’=选择的下拉框",e);var t=[],o=[],s=[],a=[];"specialService"==this.listType?(this.otherVipList.specialService.map(function(o){o.twoCategoryName==e&&t.push(o)}),this.list=t):"specialGoods"==this.listType?(this.otherVipList.specialGoods.map(function(t){t.twoCategoryName==e&&o.push(t)}),this.list=o):this.otherVipList.freeService?(this.otherVipList.freeService.map(function(t){t.twoCategoryName==e&&s.push(t)}),this.list=s):this.otherVipList.freeGoods&&(this.otherVipList.freeGoods.map(function(t){t.twoCategoryName==e&&a.push(t)}),this.list=a)},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},Jt=Ut,Xt=(o("69ec"),Object(l["a"])(Jt,Wt,Ht,!1,null,"0310b0bc",null)),Qt=Xt.exports,Yt={components:{vippop:Qt,addcar:Kt,useOtherVip:Ce,newServe:se,nv:Qe,emp:Pe,b4:ct,b5:Ct,b6:Lt,b7:Ft},data:function(){return{customerCode:"111",cust:null,usevip:!1,vipList:[],nsIsShow:!1,nsList:null,options:null,brandId:null,familyId:null,pnvIsShow:!1,searchList:[],uvIsShow:!1,uvSearchList:[],nvIsShow:!1,nvSearchList:[],allNum:"300",otherRemark:"",subjoin:null,manOurSearch:"",chooseEmpidx:null,empList1:[],empList2:[],empAlert:null,manOur:[],manOur2:[],manOur3:[],manOur4:[],lastTimeRemark:"备注",buyer:"0",price:"0",expense:"0",vipNum:0,vipCar:"皖BA827A",vipPhone:"18605533016",vipName:"张三",useVip:!1,series:[],brand:[],dis:!1,vehicleId:null,owner:{repairName:"",repairPhone:"",workorderTime:"",estimateSubmit:"",annualInspectDate:"",compulsoryInsureDeadline:"",carColor:"",seriesName:"",brandName:"",applyDate:"",engineNum:"",vehicleIdNum:"",nextKeepFitTime:"",nextKeepFitKm:"",mileage:"",customerName:"",customerPhone:"",plateNumber:""},addUserIsShow:!1,vipPop:!1,search:"",useType:null}},computed:{},created:function(){this.merchantCode=this.$route.query.merchantCode,"look"==this.$route.query.type?(this.getForm(),this.dis=!0):"copy"!=this.$route.query.type&&"set"!=this.$route.query.type||(this.useType=this.$route.query.type,this.workOrderCode=this.$route.query.workOrderCode,this.orderId=this.$route.query.orderid,this.getForm("copy"))},methods:{setList:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C,x,w,S,k,N){var L=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{orderId:this.orderId,workOrderCode:this.workOrderCode,merchantCode:this.merchantCode,type:1,workorderType:"1",customerName:e,customerPhone:t,plateNumber:o,mileage:s,engineNum:a,vehicleIdNum:i,applyDate:n,carColor:r,modelName:l,seriesName:c,customerCode:d,createId:u,updateId:p,workOrderTime:m,isMyCard:h,remarks:f,totalMoney:N,estimateSubmit:v,brandName:g,nextKeepFitKm:b,nextKeepFitTime:y,repairName:_,repairPhone:C,annualInspectDate:x,compulsoryInsureDeadline:w,list:S,laborOrderGoodsList:k}).then(function(e){console.log("请求新增综合单结果",e),"10000"==e.code?L.$router.push({path:"/orderList",query:{merchantCode:L.merchantCode}}):alert(e.message)})},addList:function(e,t,o,s,a,i,n,r,l,c,d,u,p,m,h,f,v,g,b,y,_,C,x,w,S,k,N,L){var O=this;this.$http.post("/laborSynthesize/addLaborSynthesize",{merchantCode:this.merchantCode,type:e,workorderType:"1",customerName:t,customerPhone:o,plateNumber:s,mileage:a,engineNum:i,vehicleIdNum:n,applyDate:r,carColor:l,modelName:c,seriesName:d,customerCode:u,createId:p,updateId:m,workOrderTime:h,isMyCard:f,remarks:v,totalMoney:L,estimateSubmit:g,brandName:b,nextKeepFitKm:y,nextKeepFitTime:_,repairName:C,repairPhone:x,annualInspectDate:w,compulsoryInsureDeadline:S,list:k,laborOrderGoodsList:N}).then(function(e){console.log("请求新增综合单结果",e),"10000"==e.code?O.$router.push({path:"/orderList",query:{merchantCode:O.merchantCode}}):alert(e.message)})},getForm:function(e){var t=this;this.$http.get("/WorkOrder/getWorkOrderInfo",{merchantCode:this.merchantCode,orderCode:this.$route.query.workOrderCode,orderType:this.$route.query.orderType,copy:e}).then(function(e){console.log("请求综合开单结果",e),"10000"==e.code&&(t.owner=e.data,t.lastTimeRemark=e.data.before_remarks,e.data.laborOrderGoodsList.map(function(e){1==e.type?t.manOur.push(e):2==e.type?t.manOur2.push(e):3==e.type?t.manOur3.push(e):t.manOur4.push(e)}),t.subjoin=e.data.list,t.otherRemark=e.data.remarks,t.allNum=e.data.totalMoney)})},getTree:function(e){var t=this;this.$http.get("/LaborGoods/categoryList",{merchantCode:this.merchantCode,parentCode:"0",type:e}).then(function(e){console.log("请求弹窗树状结果",e),"10000"==e.code&&(t.nvSearchList=e.data,e.data.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.mapList.map(function(e){e.value=e.code+","+e.name,e.label=e.name,e.children?e.children.map(function(e){e.value=e.code+","+e.name,e.label=e.name}):e.children=[]}),e.children=e.mapList}),t.options=e.data,console.log("%c商品模板","color:#70ff57;font-size:20px;font-weight:bold",t.options))})},getOtherVipGoods:function(){var e=this;this.$http.get("/laborSynthesize/getOtherVip",{merchantCode:this.merchantCode,customerCode:this.customerCode,vehicleId:this.vehicleId}).then(function(t){console.log("%c请求可用会员卡项目弹窗信息结果","color:red;font-size:20px",t),"10000"==t.code?(e.vipList=t.data,e.vipNum=t.data.length,e.cust=e.customerCode):alert(t.message)})},showNoVip:function(){console.log("%c打开维修/保养项目(配件)--弹窗","color:lightgreen;font-weight:bold;background:red"),this.nvIsShow=!0,this.getTree("1")},sendNv:function(e){this.manOur=e,console.log("%c显示工111时","color:blue;background:red",this.manOur),this.nvIsShow=!1},closeNv:function(e){this.nvIsShow=!1},openNs:function(){var e=this;this.nsIsShow=!0,this.$http.get("/LaborGoods/getSelect",{}).then(function(t){console.log("请求服务模板结果",t),"10000"==t.code&&(e.nsList=t.data)}),this.getTree("1")},closeNs:function(){this.nsIsShow=!1},saveNs:function(){},sendNs:function(){this.nsIsShow=!1},remarksChange:function(e){this.subjoin=e},priceChange:function(e){this.subjoin=e},selectChange:function(e){this.subjoin=e},children1:function(e){this.manOur2=e},children2:function(e){this.manOur3=e},children3:function(e){this.manOur4=e},confirm:function(){var e,t,o=this.owner;o.brandName&&(e=o.brandName.split("/")[1]),t=this.useVip?1:0;var s=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),this.manOur4.map(function(e){e.type=4}),s=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),this.addList("2",o.customerName,o.customerPhone,o.plateNumber,o.mileage,o.engineNum,o.vehicleIdNum,o.applyDate,o.carColor,e,o.seriesName,this.customerCode,"007","007",o.workOrderTime,t,this.otherRemark,o.estimateSubmit,e,o.nextKeepFitKm,o.nextKeepFitTime,o.repairName,o.repairPhone,o.annualInspectDate,o.compulsoryInsureDeadline,this.subjoin,s,this.allNum)},save:function(){var e,t=this.owner;t.brandName&&t.brandName.split("/")[1],e=this.useVip?1:0;var o=[];this.manOur.map(function(e){e.type=1}),this.manOur2.map(function(e){e.type=2}),this.manOur3.map(function(e){e.type=3}),this.manOur4.map(function(e){e.type=4}),o=this.manOur2.concat(this.manOur.concat(this.manOur3.concat(this.manOur4))),"set"==this.useType?this.setList(t.customerName,t.customerPhone,t.plateNumber,t.mileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,t.modelName,t.seriesName,this.customerCode,"007","007",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,t.brandName,t.nextKeepFitKm,t.nextKeepFitKm,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,o,this.allNum):this.addList("1",t.customerName,t.customerPhone,t.plateNumber,t.mileage,t.engineNum,t.vehicleIdNum,t.applyDate,t.carColor,t.modelName,t.seriesName,this.customerCode,"007","007",t.workOrderTime,e,this.otherRemark,t.estimateSubmit,t.brandName,t.nextKeepFitKm,t.nextKeepFitKm,t.repairName,t.repairPhone,t.annualInspectDate,t.compulsoryInsureDeadline,this.subjoin,o,this.allNum)},set:function(e,t){this.manOur[e].isGift=1,console.log(e,t,this.manOur)},deleteRow:function(e,t){this.manOur.splice(e,1)},sendEmpData:function(e,t){this.empAlert=!1;var o=[];e.map(function(e){o.push(e)}),t.map(function(e){o.push(e)});var s=this;console.log("%c111","font-size:100px"),s.manOur[s.chooseEmpidx].mapList=o,console.log(this.manOur)},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e,console.log("%c选择员工","color:#70ff57;font-size:20px;font-weight:bold",t),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode}).then(function(e){if(console.log("请求选择员工弹窗结果",e),"10000"==e.code){var t=[],s=[];e.data.map(function(e){1==e.employeeType?t.push(e):s.push(e)}),o.empList1=o.deWeight(t),o.empList2=o.deWeight(s)}})},manOurMoneyChange:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)},changeManOurNum:function(e,t,o,s){s[o].subtotalMoney=Number(e)*Number(t)},closeVipAlert:function(){this.usevip=!1,this.useVip=!1},vipConfirm:function(e,t,o,s){this.vipName=e,this.vipPhone=t,this.vipCar=o,this.customerCode=s,this.usevip=!1,this.getOtherVipGoods()},userVipChange:function(e){this.useVip=e,this.usevip=e},openVipPop:function(){this.vipPop=!0},closeVipPop:function(){this.vipPop=!1},confirmVipPop:function(e){var t=this;this.vipPop=!1,console.log("父组件",e),e.map.length>0&&e.map(function(e){e.subtotalMoney=e.price,e.mapList=[],1==e.goodsType?t.manOur2.push(e):t.manOur.push(e)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},searchOld:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.search}).then(function(t){console.log("%c请求输入车牌结果",t,"font-size:18px"),"10000"==t.code?(e.owner=t.data,e.vehicleId=t.data.vehicleId):alert(t.message)})},addUser:function(){console.log("打开"),this.addUserIsShow=!0},closeAc:function(){console.log("关闭"),this.addUserIsShow=!1},sendAc:function(e){var t=this,o=e;this.$http.get("/laborSynthesize/addCarAndCustomer",{plateNumber:o.plateNumber,phone:o.customerPhone,name:o.customerName,vehicleIdNum:o.vehicleIdNum,engineNum:o.engineNum,registeredDate:o.applyDate,brandName:o.brandName,merchantCode:this.merchantCode,brandId:o.brandId,modelName:o.modelName,modelId:o.modelId,seriesName:o.modelName,seriesId:o.modelId,lastMileage:o.mileage,source:"s"}).then(function(o){console.log("%c请求新增客户结果","color:red;font-size:20px",o),"10000"==o.code?(t.addUserIsShow=!1,t.owner=e):alert(o.message)})},getBrand:function(e){var t=this;console.log("店家车系陈星",e),console.log(this.owner.seriesName),this.$http.get("/laborSynthesize/getBrandList",{merchantCode:this.merchantCode}).then(function(e){console.log("请求车型结果",e),"10000"==e.code?(e.data.map(function(e){e.value=e.brandId+"/"+e.brandName}),t.brand=e.data):alert(e.message)})},chCar:function(e){var t=this;""!=e&&(this.brandId=e.split("/")[0]),this.$http.get("/laborSynthesize/getSeriesList",{brandId:this.brandId}).then(function(e){console.log("请求车品牌结果",e),"10000"==e.code&&(e.data.map(function(e){e.value=e.familyId,e.label=e.familyName}),t.series=e.data)})},chCar2:function(e){console.log("%c车型","color:red",e),this.$http.get("/laborSynthesize/getSeriesList",{familyId:this.familyId}).then(function(e){console.log("请求车系结果",e),"10000"==e.code||alert(e.message)})},importCarnum:function(){var e=this;this.$http.get("/LaborFastOrder/findVipGoods",{merchantCode:this.merchantCode,condition:this.owner.plateNumber}).then(function(t){console.log("%c请求输入车牌结果",t,"font-size:18px"),"10000"==t.code?e.vehicleId=t.data.vehicleId:alert(t.message)})}},mounted:function(){}},Zt=Yt,eo=(o("7b57"),Object(l["a"])(Zt,Re,Ke,!1,null,"5918b91e",null)),to=eo.exports,oo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"close"},[e._m(0),e._m(1),o("div",{staticClass:"pl"},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("el-col",{attrs:{span:3}},[o("h2",[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.customerName))]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("span",[e._v(e._s(e.laborOrder.customerPhone))])]),o("el-col",{attrs:{span:3}},[o("div",[e._v(e._s(e.laborOrder.updateTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"40%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.mileage,callback:function(t){e.$set(e.laborOrder,"mileage",t)},expression:"laborOrder.mileage"}},[o("template",{slot:"append"},[e._v("\n\t\t\t\t\t\t\tKM\n\t\t\t\t\t\t")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-col",{attrs:{span:4}},[o("h3",[e._v("项目明细")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center"},attrs:{span:10}},[o("h3",[e._v("工单编号:")]),e._v("\n\t\t\t\t  \n\t\t\t\t"),o("h3",{staticStyle:{"padding-top":"5px"}},[e._v(e._s(e.laborOrder.workorderCode))])]),o("el-table",{staticStyle:{width:"60%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.list},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"126px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.laborGoodsEmployeeList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.laborGoodsEmployeeList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"40px"}},[o("h3",[e._v("业务结算")]),o("table",{staticClass:"table"},[o("tr",[o("td",{attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},[o("div",{staticClass:"d-flex"},[o("p",{staticClass:"underline"},[e._v(e._s(e.vipNum)+"张")]),o("p",[e._v("可用会员卡")])]),o("div",{staticClass:"d-flex",staticStyle:{"margin-left":"40px","flex-wrap":"wrap"}},e._l(e.vipCards,function(t,s){return o("el-checkbox-group",{key:s,attrs:{label:t},on:{change:function(o){return e.changeBox(t,s)}},model:{value:e.vipList,callback:function(t){e.vipList=t},expression:"vipList"}},[o("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:t,disabled:e.dis},on:{change:function(o){return e.ch(o,t)}}},[e._v(e._s(t.memberCardName))])],1)}),1)])])]),o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("el-checkbox",{on:{change:e.mes},model:{value:e.isMes,callback:function(t){e.isMes=t},expression:"isMes"}},[e._v("折卡后短信通知持卡人")])],1)]),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.timersShow}},[e._v(e._s(e.vipList.length)+"张")]),o("div",[e._v("可用次卡商品")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showtimeCardList,function(t,s){return o("div",{key:s,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.goodsName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"1000px",border:"0",padding:"20px","padding-left":"40px","flex-wrap":"wrap"}},[o("div",{staticClass:"d-flex",staticStyle:{width:"200px"}},[o("div",{staticClass:"underline",on:{click:e.couponIsAlert}},[e._v(e._s(e.coupon)+"张")]),o("div",[e._v("可用优惠券")])]),o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.showCouponList,function(t,s){return o("div",{key:s,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("卡余额")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.balance)+"元")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"80%"}},[e._v("请输入抵扣金额:")]),o("el-input",{attrs:{size:"small",type:"number"},on:{change:e.inputPrice},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}})],1)])]),o("tr",[o("td",[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",width:"150px"}},[o("div",{staticClass:"underline",on:{click:e.codeListIsShow}},[e._v(e._s(e.alertCodeList.length)+"张")]),o("div",[e._v("可用兑换码")])]),e._l(e.codeList,function(t,s){return o("div",{key:s,staticClass:"d-flex",staticStyle:{"margin-right":"10px","align-items":"center"}},[o("div",[e._v(e._s(t.name))])])}),o("el-button",{attrs:{type:"text"},on:{click:e.addCode}},[e._v("添加新兑换码")])],2)])])]),o("div",{staticClass:"footer"},[o("div",{staticStyle:{"margin-right":"56px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.discount)+Number(e.onceCardDiscount)))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.codeDis)))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(Number(e.favMoney)))])])])]),o("div",{staticStyle:{width:"103%",background:"#ccc",height:"70px","margin-left":"-40px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("订单总金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.laborOrder.totalMoney))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",[o("el-input",{model:{value:e.favMoney,callback:function(t){e.favMoney=t},expression:"favMoney"}})],1),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("应收总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(e.laborOrder.totalMoney-e.favMoney-e.discount-e.codeDis-e.onceCardDiscount))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("el-button",{staticStyle:{"margin-right":"35px"},attrs:{type:"text"},on:{click:e.back}},[e._v("返回")]),o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"small",type:"primary"},on:{click:e.close}},[e._v("业务结算")])],1)])]),o("el-button",{on:{click:e.un}},[e._v("解锁")]),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}}),o("timesCard",{attrs:{timersCardShow:e.timersCardShow,vipCards:e.vipList,timeCardList:e.timeCardList},on:{confirmTimers:e.confirmTimers,closeTimers:e.closeTimers}}),o("codes",{attrs:{codeShow:e.codeShow,alertCodeList:e.alertCodeList},on:{confirmCode:e.confirmCode,closeCode:e.closeCode}}),o("coupon",{attrs:{couponIsShow:e.couponIsShow,couponList:e.couponList},on:{confirmCoupon:e.confirmCoupon,closeCoupon:e.closeCoupon}}),o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"添加兑换码",visible:e.addCodes},on:{"update:visible":function(t){e.addCodes=t}}},[o("div",{staticStyle:{display:"flex","justify-content":"center","margin-bottom":"30px"}},[o("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("优惠券")]),o("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("次卡商品")])],1),o("el-input",{attrs:{placeholder:"请输入兑换码"},model:{value:e.importCode,callback:function(t){e.importCode=t},expression:"importCode"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeAddCode}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.sendAddCode}},[e._v("确 定")])],1)],1)],1)},so=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/工单结算")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])}],ao=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chooseEmp"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,center:"",title:"选择员工",visible:e.chooseEmp},on:{"update:visible":function(t){e.chooseEmp=t}}},[o("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"选择销售",name:"first"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.empListf,function(t,s){return o("el-col",{key:s,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1),o("el-tab-pane",{attrs:{label:"选择施工",name:"second"}},[o("el-row",{staticStyle:{"margin-left":"70px"}},[o("el-checkbox-group",{model:{value:e.checkList2,callback:function(t){e.checkList2=t},expression:"checkList2"}},e._l(e.empLists,function(t,s){return o("el-col",{key:s,attrs:{span:11}},[o("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.employeeName))])],1)}),1)],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.empConfirm}},[e._v("确 定")])],1)],1)],1)},io=[],no={components:{},props:{chooseEmp:{type:Boolean},empListf:{type:Array},empLists:{type:Array}},data:function(){return{checkList:[],checkList2:[],activeName:"first"}},computed:{},methods:{empConfirm:function(){this.$emit("empConfirm",this.checkList,this.checkList2)},close:function(){this.$emit("closeEmpAlert",this.$props.setCarshow)},handleClick:function(e){console.log(e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},ro=no,lo=(o("c994"),Object(l["a"])(ro,ao,io,!1,null,"5f665da6",null)),co=lo.exports,uo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择次卡",center:"",visible:e.timersCardShow,width:"70%","show-close":!1},on:{"update:visible":function(t){e.timersCardShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"goodsName",label:"标题"}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"goodsName",label:"标题"}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:t.row.surplusCount,label:"",size:"small"},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},po=[],mo={components:{},props:{timeCardList:Array,timersCardShow:Boolean,vipCards:Array},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},watch:{timeCardList:function(e){e.map(function(e){e.goodsCount=1}),this.list=e}},computed:{},methods:{getBalance:function(e){var t=this;this.$http.post("/LaborBlance/getBalance",{merchantCode:this.merchantCode,workorderCode:this.orderCode,vipCards:this.$props.vipCards,onceCards:e}).then(function(e){console.log("%c请求最高可用抵扣金额结果","color:red;font-size:20px",e),"10000"==e.code?t.$emit("confirmTimers",t.chooseList,e.data.cardBalance,e.data.maxDisCount):alert(e.message)})},confirm:function(){this.getBalance(this.chooseList)},close:function(){this.$emit("closeTimers")},chooseDis:function(e){this.chooseList=e,console.log("选择的",e)}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode}},ho=mo,fo=(o("1113"),Object(l["a"])(ho,uo,po,!1,null,"e319aa4c",null)),vo=fo.exports,go=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择优惠券",center:"",visible:e.couponIsShow,width:"70%"},on:{"update:visible":function(t){e.couponIsShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"couponName",label:"标题"}}),o("el-table-column",{attrs:{align:"center",prpo:"goodsCount",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input-number",{attrs:{min:1,max:t.row.surplusCount,label:"",size:"small"},model:{value:t.row.goodsCount,callback:function(o){e.$set(t.row,"goodsCount",o)},expression:"scope.row.goodsCount"}})]}}])})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},bo=[],yo={components:{},props:{couponIsShow:Boolean,couponList:Array},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},computed:{},watch:{couponList:function(e){e.map(function(e){e.goodsCount=1}),this.list=e}},methods:{confirm:function(){this.$emit("confirmCoupon",this.chooseList)},close:function(){this.$emit("closeCoupon")},chooseDis:function(e){console.log("选择的下标",e),this.chooseList=e}},mounted:function(){},created:function(){}},_o=yo,Co=(o("0611"),Object(l["a"])(_o,go,bo,!1,null,"fe9a49bc",null)),xo=Co.exports,wo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dis"},[o("el-dialog",{attrs:{"close-on-click-modal":!1,title:"已选兑换码",center:"",visible:e.codeShow,width:"70%","show-close":!1},on:{"update:visible":function(t){e.codeShow=t}}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{height:"70px",background:"#f1f1f1",display:"flex","align-items":"center",padding:"0 20px"}},[o("el-input",{attrs:{placeholder:"搜索优惠券"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("div",[o("el-table",{ref:"multipleTable",attrs:{"show-header":!1,data:e.list},on:{"selection-change":e.chooseDis,select:e.tableSelect}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{type:"selection"}})],1)],1)]),o("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12}},[o("el-col",{attrs:{span:16}},[o("div",{staticStyle:{"padding-left":"15px"}},[e._v("已选项"+e._s(e.chooseList.length))])]),o("el-col",{attrs:{span:7}},[o("div",[e._v("设置数量")])]),o("el-table",{attrs:{"show-header":!1,data:e.chooseList}},[o("el-table-column",{attrs:{prop:"name",label:""}}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:""}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认选择")])],1)],1)],1)},So=[],ko={components:{},props:{alertCodeList:Array,codeShow:Boolean},data:function(){return{chooseList:[],list:[],search:"",disShow:!0}},watch:{alertCodeList:function(e){e.map(function(e){e.goodsCount=1}),this.first(e),this.list=e}},computed:{},methods:{tableSelect:function(e,t){var o=e.length&&-1!==e.indexOf(t);0==o&&this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:t.exchangeCode,type:t.type}]).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code||alert(e.message)})},first:function(e){var t=this;this.$nextTick(function(){e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})})},confirm:function(){this.$emit("confirmCode",this.chooseList)},close:function(){this.$emit("closeCode")},chooseDis:function(e){this.chooseList=e}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode}},No=ko,Lo=(o("12d2"),Object(l["a"])(No,wo,So,!1,null,"2ca61317",null)),Oo=Lo.exports,$o={components:{timesCard:vo,emp:co,coupon:xo,codes:Oo},data:function(){return{array:[],dis:!1,arrId:[],codeShow:!1,alertCodeList:[],addCodes:!1,importCode:null,codeList:[],radio:"2",couponIsShow:!1,couponList:[],showCouponList:[],timersCardShow:!1,showtimeCardList:[],empList1:[],empList2:[],chooseEmpidx:null,empAlert:!1,payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:"0",vipDis:"0",discount:"0",discountMax:null,timeCardList:[],cardBalance:!1,showCard:!1,isMes:null,vipList:[],code:"0",balance:0,coupon:"0",timeCard:"0",vipCards:[],vipNum:0,orderNum:"",list:[],onceCardDiscount:0,laborOrder:{plateNumber:"",customerName:"",customerPhone:"",updateTime:"",mileage:"",workorderCode:"",totalMoney:"0"}}},computed:{},methods:{close:function(e,t,o,s,a,i,n,r,l,c,d,u){var p=this;this.$http.post("/LaborBlance/balance/order",{laborOrder:this.laborOrder,goodsList:this.list,vipNumber:this.vipNum,cardBalance:this.balance,vipCards:this.vipList,onceGoodsList:this.showtimeCardList,coupons:this.showCouponList,deduction:this.discount,shouldPay:this.laborOrder.totalMoney-this.favMoney-this.discount-this.codeDis-this.onceCardDiscount,orderPrice:this.laborOrder.totalMoney,redeemCode:this.codeList,benefit:this.favMoney}).then(function(e){console.log("%c请求工单结算结果","color:red;font-size:20px",e),"success"==e.code?p.$router.push({name:"financialClose",params:{data:e.data,merchantCode:p.merchantCode}}):alert(e.message)})},getVipList:function(e){var t=this;this.dis=!0,setTimeout(function(){t.dis=!1},1500),this.$http.get("/LaborBlance/findOnceCards",{merchantCode:this.merchantCode,orderCode:this.orderCode,vipCardId:e}).then(function(e){console.log("%c请求查询次卡商品集合结果","color:red;font-size:20px",e),"10000"==e.code?t.timeCardList=e.data:alert(e.message)})},back:function(){this.$router.push({path:"/orderList",query:{merchantCode:this.merchantCode}})},codeListIsShow:function(){this.codeShow=!0},confirmCode:function(e){var t=this;console.log("确认兑换码弹窗",e),this.codeList=e,e.map(function(e){t.codeDis+=Number(e.price)}),this.codeShow=!1},closeCode:function(){this.codeShow=!1},couponIsAlert:function(){this.couponIsShow=!0},closeCoupon:function(){this.couponIsShow=!1},confirmCoupon:function(e){this.showCouponList=e,this.couponIsShow=!1},confirmTimers:function(e,t,o){this.timersCardShow=!1,this.showtimeCardList=e,this.balance=this.balance-t,this.discountMax=o},closeTimers:function(){this.timersCardShow=!1},timersShow:function(){this.getVipList(this.arrId.join(",")),this.timersCardShow=!0},inputPrice:function(e){e>this.discountMax&&(this.$message.error("输入的折扣金额必须小于"+this.discountMax),this.discount="")},print:function(e){console.log(e),this.$router.push({name:"closeOrder",params:{data:this.laborOrder,vipNum:this.vipNum,list:this.list,resPrice:this.laborOrder.totalMoney-this.favMoney-this.discount-this.codeDis-this.onceCardDiscount,type:e}})},addCode:function(){this.addCodes=!0},closeAddCode:function(){this.addCodes=!1},sendAddCode:function(){var e=this;this.$http.get("/LaborRedeemCode/discriminateCode",{merchantCode:this.merchantCode,exchangeCode:this.importCode,type:this.radio}).then(function(t){console.log("%c请求兑换码识别结果","color:red;font-size:20px",t),"true"==t.data.status?(t.data.exchangeCode=e.importCode,e.alertCodeList.push(t.data),e.addCodes=!1,e.importCode=""):alert("该兑换码已被使用或者暂无该兑换码")})},un:function(){this.$http.post("/LaborRedeemCode/unlockedCode",[{merchantCode:this.merchantCode,exchangeCode:"XP3L62FXVH32HT0X",type:1}]).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code||alert(e.message)})},mes:function(e){console.log(this.isMes,e)},changeBox:function(e,t){console.log("选择的卡",e,t,this.vipList);var o=[];this.vipList.map(function(e){o.push(e.customerMemberCardId)}),this.arrId=o,console.log("会员卡id",o,this.arrId)},ch:function(e,t){var o=this;console.log("选中的值",e,t),e||this.array.map(function(e,t){o.timeCardList.map(function(t,s){e==t&&o.timeCardList.splice(s,o.array.length)})})},cellClick:function(e){},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType}),console.log("选择的销售施工",this.list[this.chooseEmpidx])},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var s=[],a=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?s.push(e):a.push(e)}),o.empList1=o.deWeight(s),o.empList2=o.deWeight(a)):alert(e.message)})},getList:function(){var e=this;this.$http.get("/LaborBlance/findOrderInfo",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){if(console.log("%c请求工单结算结果","color:red;font-size:20px",t),"10000"==t.code){e.laborOrder=t.data.laborOrder,t.data.goodsList.map(function(e){null==e.price&&(e.price=0),null==e.subtotalMoney&&(e.subtotalMoney=0)}),e.list=t.data.goodsList,e.vipNum=t.data.vipNumber,e.vipCards=t.data.vipCards,t.data.vipCards.map(function(t){t.isSelected&&e.vipList.push(t)});var o=[];e.vipList.map(function(e){o.push(e.customerMemberCardId)}),e.arrId=o,e.timeCard=t.data.onceGoodsList.length,e.timeCardList=t.data.onceGoodsList,e.coupon=t.data.coupons.length,e.couponList=t.data.coupons,e.balance=t.data.cardBalance,e.discountMax=t.data.maxDisCount,null!=t.data.redeemCode?(e.code=t.data.redeemCode.length,e.codeList=t.data.redeemCode):e.code=0,e.onceCardDiscount=t.data.onceCardDiscount,console.log("%c次卡商品集合","color:#70ff57;font-size:20px;font-weight:bold",e.timeCardList)}else alert(t.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t},uniq:function(e){for(var t=[],o=0;o<e.length;o++)if(0==t.length)t.push(e[o]);else{for(var s=0,a=0;a<t.length;a++){var i=e[o],n=t[a];if(JSON.stringify(n)===JSON.stringify(i)){s=1;break}}0==s&&t.push(e[o])}return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.getList()}},Io=$o,To=(o("1c83"),Object(l["a"])(Io,oo,so,!1,null,"0bb3f984",null)),Ao=To.exports,Po=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"billdetail"},[e._m(0),e._m(1),o("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"50px"}},[o("el-col",{attrs:{span:3}},[o("h2",[e._v(e._s(e.laborOrder.plateNumber))])]),o("el-col",{attrs:{span:5}},[o("span",[e._v(e._s(e.laborOrder.payName))]),e._v("  "),o("span",[e._v(e._s(e.laborOrder.payTel))])]),o("el-col",{attrs:{span:3}},[o("div",[e._v(e._s(e.laborOrder.payTime))])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"40%"}},[e._v("本次公里数:")]),o("el-input",{model:{value:e.laborOrder.thisMileage,callback:function(t){e.$set(e.laborOrder,"thisMileage",t)},expression:"laborOrder.thisMileage"}},[o("template",{slot:"append"},[e._v("KM")])],2)],1)])],1),o("div",{staticStyle:{"margin-top":"50px"}},[o("el-row",{staticStyle:{"align-items":"center",display:"flex"}},[o("el-col",{attrs:{span:14}},[o("h3",[e._v("已选项目"+e._s(e.list.length)+"个")])]),o("el-col",{staticStyle:{"align-items":"center"},attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"20px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("el-table",{staticStyle:{width:"70%"},attrs:{"header-cell-style":{color:"#333",fontSize:"14px",background:"#ccc"},border:"",data:e.list},on:{"cell-click":e.cellClick}},[o("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"项目"}}),o("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.price))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"数量"}}),o("el-table-column",{attrs:{align:"center",prop:"subtotalMoney",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("¥"+e._s(t.row.subtotalMoney))])]}}])}),o("el-table-column",{attrs:{prop:"sell",label:"销售/施工人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{position:"relative",left:"132px"}},[o("i",{staticClass:"el-icon-edit-outline",on:{click:function(o){return e.setEmpAlert(t.$index,e.list)}}})]),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("销售:")]),e._l(t.row.employeeList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(1==t.customerType?t.employeeName:""))])])})],2),o("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[o("div",[e._v("施工:")]),e._l(t.row.employeeList,function(t,s){return o("div",{key:s},[o("div",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(2==t.customerType?t.employeeName:""))])])})],2)]}}])}),o("el-table-column",{attrs:{prpo:"num",align:"center",label:"提成业绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("--")])]}}])})],1)],1),o("div",{staticStyle:{"margin-top":"20px"}},[o("h3",[e._v("支付信息")]),o("table",{staticClass:"table"},[o("tr",[o("td",[e._v("应收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.receivablePayMoney))]),o("td",[e._v("会员卡扣除")]),o("td",[e._v(e._s(e.laborOrder.vipOffsetMoney)+"次")]),o("td",[e._v("优惠券折扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.dis))]),o("td",[e._v("人工优惠")]),o("td",[e._v("¥"+e._s(e.laborOrder.preferentialMoney))]),o("td",[e._v("现金")]),o("td",[e._v("¥"+e._s(e.laborOrder.cashPayMoney))])]),o("tr",[o("td",[e._v("微信转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatTransferPayMoney))]),o("td",[e._v("支付宝转账")]),o("td",[e._v("¥"+e._s(e.laborOrder.aliTransferPayMoney))]),o("td",[e._v("刷银行卡")]),o("td",[e._v("¥"+e._s(e.laborOrder.swipecardPayMoney))]),o("td",[e._v("微信支付")]),o("td",[e._v("¥"+e._s(e.laborOrder.wechatPayMoney))]),o("td",[e._v("支付宝支付")]),o("td",[e._v("¥"+e._s(e.laborOrder.aliPayMoney))])]),o("tr",[o("td",[e._v("兑换码抵扣")]),o("td",[e._v("¥"+e._s(e.laborOrder.redeemCodeMoney))]),o("td",[e._v("实收金额")]),o("td",[e._v("¥"+e._s(e.laborOrder.realityMoney))]),o("td",[e._v("完成时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("操作人")]),o("td",[e._v(e._s(e.laborOrder.name))]),o("td",[e._v("已支付")]),o("td",[e._v(e._s(e.laborOrder.payType))])])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"15px","align-items":"center"}},[o("div",[e._v("本次备注：")]),o("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"120",placeholder:"请输入备注信息(打印显示,最多120字)"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),o("div",{staticClass:"footer"},[o("div",[e._v("共"+e._s(e.server.length)+"项服务【含赠送"+e._s(e.give)+"项】,")]),o("div",[e._v(e._s(e.product.length)+"件商品【含赠送"+e._s(e.give2)+"件】")]),o("div",[e._v("总价: "),o("span",{staticStyle:{"font-size":"24px",color:"#ff0000","font-weight":"bold"}},[e._v("¥"+e._s(e.total))])]),o("el-button",{staticStyle:{width:"100px",height:"30px","margin-left":"30px"},attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保 存")])],1),o("emp",{attrs:{chooseEmp:e.empAlert,empListf:e.empList1,empLists:e.empList2},on:{closeEmpAlert:e.closeEmpAlert,empConfirm:e.sendEmpData}})],1)},Mo=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/开单详情")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])}],Eo=o("bd86"),zo={components:{emp:Pe},data:function(){var e;return{server:[],product:[],chooseEmpidx:null,empAlert:!1,empList1:[],empList2:[],total:0,give2:"0",give:"0",remark:"",laborOrder:(e={redeemCodeMoney:"",vipOffsetMoney:"",preferentialMoney:"",cashPayMoney:"",wechatTransferPayMoney:"",aliTransferPayMoney:"",swipecardPayMoney:"",wechatPayMoney:"",aliPayMoney:""},Object(Eo["a"])(e,"redeemCodeMoney",""),Object(Eo["a"])(e,"createTime",""),Object(Eo["a"])(e,"creatorId",""),Object(Eo["a"])(e,"realityMoney",""),Object(Eo["a"])(e,"name","前台"),Object(Eo["a"])(e,"payType","已完成"),Object(Eo["a"])(e,"dis","0"),e),list:[],kil:"12314",date:"2019-10-10 14:27:36",phone:"13555555555",name:"王二",carNum:"皖B09090"}},computed:{},methods:{getList:function(){var e=this;this.$http.get("/LaborBlance/findInfoByOrderCode",{merchantCode:this.merchantCode,orderCode:this.orderCode}).then(function(t){console.log("%c请求结算查看结果","color:red;font-size:20px",t),"10000"==t.code?(e.laborOrder=t.data.settleaccounts,e.list=t.data.goodsList,e.list.map(function(t){1==t.type?e.server.push(t):2==t.type&&e.product.push(t),e.total+=Number(t.subtotalMoney)})):alert(t.message)})},save:function(){var e=this;this.$http.post("/LaborBlance/save",{workorderCode:this.orderCode,merchantCode:this.merchantCode,goodsList:this.list,mileage:this.laborOrder.thisMileage,additionalRemarks:this.remark}).then(function(t){console.log("%c请求保存结果","color:red;font-size:20px",t),"10000"==t.code?e.$router.push({path:"/orderList",query:{merchantCode:e.merchantCode}}):alert(t.message)})},cellClick:function(e){console.log(e)},look:function(){var e="";e=1==this.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:e,query:{merchantCode:this.merchantCode,workOrderCode:this.orderCode,orderType:this.workorderType,type:"look"}}),location.reload()},sendEmpData:function(e,t){this.empAlert=!1,this.list[this.chooseEmpidx].laborGoodsEmployeeList=e.concat(t),this.list[this.chooseEmpidx].laborGoodsEmployeeList.map(function(e){e.customerType=e.employeeType})},closeEmpAlert:function(){this.empAlert=!1},setEmpAlert:function(e,t){var o=this;this.empAlert=!0,this.chooseEmpidx=e;var s=[],a=[];console.log("显示的弹窗",t[e]),this.$http.get("/LaborFindByGoods/findByGoods",{merchantCode:this.merchantCode,goodsCode:t[e].goodsCode||t[e].workorderCode}).then(function(e){console.log("%c请求员工弹窗结果","color:red;font-size:20px",e),"10000"==e.code?(e.data.map(function(e){1==e.employeeType?s.push(e):a.push(e)}),o.empList1=o.deWeight(s),o.empList2=o.deWeight(a)):alert(e.message)})},deWeight:function(e){for(var t=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&t.push(e[o]);return t}},mounted:function(){},created:function(){this.merchantCode=this.$route.query.merchantCode,this.orderCode=this.$route.query.workOrderCode,this.workorderType=this.$route.query.workorderType,this.getList()}},Do=zo,Vo=(o("5a3f"),Object(l["a"])(Do,Po,Mo,!1,null,"d586fbea",null)),Fo=Vo.exports,Go=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"financialClose"},[e._m(0),e._m(1),o("div",{staticClass:"body"},[o("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"50px"}},[o("el-col",{attrs:{span:2}},[o("h3",[e._v("财务结算")])]),o("el-col",{staticClass:"d-flex",staticStyle:{"align-items":"center"},attrs:{span:8}},[o("div",[e._v("工单编号:")]),e._v("  "),o("div",{staticStyle:{"padding-top":"5px"}},[e._v(e._s(e.orderNum))])]),o("el-col",{attrs:{span:10}},[o("el-button",{staticStyle:{"text-decoration":"underline","font-size":"20px"},attrs:{type:"text"},on:{click:e.look}},[e._v("查看工单详情>")])],1)],1),o("div",[o("table",{staticClass:"table"},[o("tr",[o("td",{attrs:{rowspan:"2"}},[e._v("会员卡")]),o("td",{staticStyle:{width:"700px"}},[o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","padding-left":"40px"}},e._l(e.form.vipCards,function(t,s){return o("div",{key:s,staticClass:"d-flex",staticStyle:{padding:"25px 0px"}},[o("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(t.memberCardName))])])}),0)])]),e._m(2),o("tr",[o("td",[e._v("次卡商品")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.onceGoodsList,function(t,s){return o("div",{key:s,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.goodsName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("优惠券")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("span",{staticStyle:{color:"#0000ff"}},[e._v("已选:")]),e._l(e.form.coupons,function(t,s){return o("div",{key:s,staticStyle:{"margin-right":"5px",color:"#0000ff"}},[e._v(e._s(t.couponName)+"*"+e._s(t.goodsCount))])})],2)]),o("tr",[o("td",[e._v("卡余额")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",{staticStyle:{width:"200px","text-align":"left"}},[e._v("余额:"+e._s(e.form.cardBalance)+"元")]),o("div",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",[e._v("已抵扣:¥"+e._s(e.form.deduction))])])])]),o("tr",[o("td",[e._v("兑换码")]),o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},e._l(e.form.redeemCode,function(t,s){return o("div",{key:s},[e._v(e._s(t.name))])}),0)])])]),o("div",{staticStyle:{"margin-right":"56px","margin-top":"50px",display:"flex","justify-content":"flex-end"}},[o("ul",[o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("会员卡抵扣: ")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.deduction))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("兑换码核销:")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.codeDis))])]),o("li",{staticClass:"d-flex",staticStyle:{"align-items":"center"}},[o("div",{staticStyle:{width:"200px"}},[e._v("人工优惠金额: ")]),o("div",{staticStyle:{"margin-left":"80px"}},[e._v("-¥"+e._s(e.form.benefit))])])])]),o("div",{staticStyle:{background:"#ccc",height:"70px",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[e._v("订单总金额:")]),o("div",{staticClass:"red",staticStyle:{"margin-left":"10px"}},[e._v("¥"+e._s(e.form.orderPrice))]),o("div",{staticStyle:{"margin-left":"30px","margin-right":"10px"}},[e._v("优惠金额:")]),o("div",{staticClass:"red"},[e._v("¥"+e._s(e.form.benefit))]),o("div",{staticStyle:{"margin-left":"60px","margin-right":"10px"}},[e._v("应收总额:")]),o("div",{staticClass:"red",staticStyle:{"margin-right":"80px"}},[e._v("¥"+e._s(e.form.shouldPay))])]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("div",{staticStyle:{"margin-right":"15px"}},[e._v("支付方式：")]),o("div",[o("el-radio-group",{on:{change:e.radioChanges},model:{value:e.checkedRadio,callback:function(t){e.checkedRadio=t},expression:"checkedRadio"}},[o("el-radio",{attrs:{label:"1"}},[e._v("现金")]),o("el-radio",{attrs:{label:"3"}},[e._v("微信支付")]),o("el-radio",{attrs:{label:"4"}},[e._v("支付宝支付")]),o("el-radio",{attrs:{label:"2"}},[e._v("刷卡")]),o("el-radio",{attrs:{label:"5"}},[e._v("支付宝转账")]),o("el-radio",{attrs:{label:"6"}},[e._v("微信转账")]),o("el-popover",{attrs:{placement:"bottom",width:"800",trigger:"click"},model:{value:e.vis,callback:function(t){e.vis=t},expression:"vis"}},[o("div",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("现金：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:e.cash,callback:function(t){e.cash=t},expression:"cash"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)]),o("el-col",{attrs:{span:9}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("微信/支付宝支付：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:e.wx,callback:function(t){e.wx=t},expression:"wx"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center"}},[o("div",[e._v("刷卡：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("微信转账：")]),o("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini"},model:{value:e.wxpay,callback:function(t){e.wxpay=t},expression:"wxpay"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)]),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"d-flex choose",staticStyle:{"align-items":"center","margin-top":"10px"}},[o("div",[e._v("支付宝转账：")]),o("el-input",{staticStyle:{width:"30%"},attrs:{size:"mini"},model:{value:e.alipay,callback:function(t){e.alipay=t},expression:"alipay"}},[o("template",{slot:"prepend"},[e._v("¥")])],2)],1)]),o("el-col",{attrs:{span:5}},[o("div",{staticStyle:{"margin-top":"10px"}},[e._v("将微信二维码发送至")])]),o("el-col",{attrs:{span:12}},[o("el-radio-group",{staticStyle:{"margin-top":"10px"},on:{change:e.mesChange},model:{value:e.mesCode,callback:function(t){e.mesCode=t},expression:"mesCode"}},[o("el-radio",{attrs:{label:"1"}},[e._v("电脑")]),o("el-radio",{attrs:{label:"2"}},[e._v("一体机")])],1)],1)],1),o("el-radio",{attrs:{slot:"reference",label:"7"},slot:"reference"},[e._v("两种以上支付方式")])],1)],1)],1)]),o("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","margin-right":"30px","margin-top":"20px"}},[o("div",[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.print}},[o("span",{staticClass:"el-dropdown-link"},[e._v("打印")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"报价单"}},[e._v("报价单")]),o("el-dropdown-item",{attrs:{command:"结算单"}},[e._v("结算单")])],1)],1)],1),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"small",type:"primary"},on:{click:e.close}},[e._v("财务结算")])],1)]),o("hint",{attrs:{notice:e.notice},on:{rec:e.rec,unrec:e.unrec}})],1)},jo=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px",height:"50px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("工单管理/工单列表/工单结算")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"20px"}},[o("hr")])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",{staticClass:"d-flex",staticStyle:{width:"700px",border:"0",padding:"20px","padding-left":"40px"}},[o("div",[e._v("折卡后短信通知持卡人")])])])}],Bo={components:{hint:D},data:function(){return{notice:!1,buyoncredit:0,mesCode:"",alipay:"",wxpay:"",bank:"",ali:"",wx:"",cash:"",vis:!1,radios:null,checkedRadio:"",payMoney:240,favMoney:0,allMoney:240,otherDis:"0",codeDis:"0",vipDis:"0",discount:"1",couponList:[],timeCardList:[],cardBalance:!1,showCard:!1,radio:!1,isMes:null,checkList:[],code:"0",balance:178,coupon:"1",timeCard:"1",vipNum:3,orderNum:"120314891023",form:{}}},computed:{},methods:{destroy:function(){var e=this,t=this.form.redeemCode;this.$http.post("/LaborRedeemCode/unlockedCode",{arr:t}).then(function(t){"10000"==t.code?e.$router.push({path:"/orderList",query:{merchantCode:e.merchantCode}}):alert(t.message)})},close:function(){var e,t=this,o=this.form,s=[];""!=this.cash?s.push("1"):""!=this.wx?s.push("3"):""!=this.ali?s.push("4"):""!=this.bank?s.push("2"):""!=this.wxpay?s.push("6"):""!=this.alipay&&s.push("5");var a=s.join(",");this.$http.post("/LaborBlance/finance",(e={laborOrder:o.laborOrder,goodsList:o.goodsList,vipNumber:o.vipNumber,cardBalance:o.cardBalance,vipCards:o.vipCards,onceGoodsList:o.onceGoodsList,coupons:o.coupons},Object(Eo["a"])(e,"vipNumber",o.vipNumber),Object(Eo["a"])(e,"deduction",o.deduction),Object(Eo["a"])(e,"shouldPay",o.shouldPay),Object(Eo["a"])(e,"orderPrice",o.orderPrice),Object(Eo["a"])(e,"redeemCode",o.redeemCode),Object(Eo["a"])(e,"benefit",o.benefit),Object(Eo["a"])(e,"qrcodeTo",this.mesCode),Object(Eo["a"])(e,"payType",a),Object(Eo["a"])(e,"wechatPayMoney",this.wx),Object(Eo["a"])(e,"aliPayMoney",this.ali),Object(Eo["a"])(e,"cashPayMoney",this.cash),Object(Eo["a"])(e,"swipecardPayMoney",this.bank),Object(Eo["a"])(e,"wechatTransferPayMoney",this.wxpay),Object(Eo["a"])(e,"aliTransferPayMoney",this.alipay),Object(Eo["a"])(e,"vipOffsetMoney",o.deduction),Object(Eo["a"])(e,"settleaccountsId",o.settleaccountsId),Object(Eo["a"])(e,"buyoncredit",this.buyoncredit),e)).then(function(e){console.log("%c请求结果","color:red;font-size:20px",e),"10000"==e.code?t.destroy():alert(e.message)})},rec:function(e){this.notice=!1,this.buyoncredit=0},unrec:function(){this.notice=!1,this.buyoncredit=1},mesChange:function(e){console.log(e)},radioChanges:function(e){console.log("选择的",e),this.notice="3"!=e&&"4"!=e&&"7"!=e,7==e&&(this.vis=!0)},print:function(e){console.log(e)},addCode:function(){},mes:function(e){console.log(this.isMes,e)},radioChange:function(){console.log(this.radio)},changeBox:function(e){this.cardBalance=!0},changeBox2:function(e){console.log("val2",e),this.showCard=1==e},look:function(){var e;e=1==this.form.workorderType?"/comprehensiveOrder":"/quickOrder",this.$router.push({path:e,query:{merchantCode:this.merchantCode,workOrderCode:this.form.laborOrder.workOrderCode,orderType:this.form.laborOrder.workorderType,type:"look"}})}},mounted:function(){},created:function(){var e=this,t=this.$route.params.data,o=this.form;this.merchantCode=this.$route.params.merchantCode,o.laborOrder=t.laborOrder,o.goodsList=t.goodsList,o.vipNumber=t.vipNumber,o.cardBalance=t.cardBalance,o.vipCards=t.vipCards,o.onceGoodsList=t.onceGoodsList,o.coupons=t.coupons,o.orderPrice=t.orderPrice,o.deduction=t.deduction,t.redeemCode.map(function(t){t.exchangeCode=t.code,t.merchantCode=e.merchantCode}),o.redeemCode=t.redeemCode,console.log("%c兑换码集合","color:#70ff57;font-size:20px;font-weight:bold",this.form.redeemCode),o.benefit=t.benefit,o.settleaccountsId=t.settleaccountsId,o.shouldPay=t.shouldPay}},qo=Bo,Ro=(o("e264"),Object(l["a"])(qo,Go,jo,!1,null,"1511682f",null)),Ko=Ro.exports,Wo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("form",{attrs:{id:"form1"}},[o("div",{staticClass:"cm"},[o("h2",[e._v(e._s(e.company)+"服务中心"+e._s(e.type))]),o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"c1"},[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])]),o("div",{staticClass:"c1"},[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])]),o("div",{staticClass:"c1"},[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])]),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(s+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(s+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.all1)+Number(e.all2))+"元")]),o("table",{staticClass:"t2",staticStyle:{width:"40%"}},e._l(e.t4,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(e.resPrice))]),o("td",[e._v(e._s(t.name2))]),o("td",[e._v(e._s(e.resPrice))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.remark))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.addr))])]),o("div",[o("div",{staticClass:"c2"},[e._v("联系电话："),o("span",[e._v(e._s(e.tel))])]),o("div",{staticClass:"c3"},[e._v("客户签字：")]),o("div",{staticClass:"border"})])])])]),o("button",{on:{click:e.printPdf}},[e._v("打印")])])},Ho=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],Uo=(o("a481"),o("4917"),null);function Jo(){try{var e=navigator.userAgent;if(null!=e.match(/Windows\sPhone/i))return!0;if(null!=e.match(/iPhone|iPod/i))return!0;if(null!=e.match(/Android/i))return!0;if(null!=e.match(/Edge\D?\d+/i))return!0;var t=e.match(/Trident\D?\d+/i),o=e.match(/MSIE\D?\d+/i),s=e.match(/OPR\D?\d+/i),a=e.match(/Firefox\D?\d+/i),i=e.match(/x64/i);if(null==t&&null==o&&null!==i)return!0;if(null!==a){if(a=a[0].match(/\d+/),a[0]>=42||null!==i)return!0}else if(null!==s){if(s=s[0].match(/\d+/),s[0]>=32)return!0}else if(null==t&&null==o){var n=e.match(/Chrome\D?\d+/i);if(null!==n&&(n=n[0].match(/\d+/),n[0]>=42))return!0}return!1}catch(r){return!0}}if(Jo()){var Xo=document.head||document.getElementsByTagName("head")[0]||document.documentElement,Qo=document.createElement("script");Qo.src="http://localhost:8000/CLodopfuncs.js?priority=1",Xo.insertBefore(Qo,Xo.firstChild),Qo=document.createElement("script"),Qo.src="http://localhost:18000/CLodopfuncs.js?priority=0",Xo.insertBefore(Qo,Xo.firstChild)}function Yo(e,t){var o,s="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",a="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop32.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",i="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",n="<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop64.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",r="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",l="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",c="<br><font color='#FF00FF'>CLodop云打印服务需升级!点击这里<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>执行升级</a>,升级后请刷新页面。</font>";try{var d=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0;if(Jo()){try{o=getCLodop()}catch(p){}if(!o&&"complete"!==document.readyState)return void alert("C-Lodop没准备好，请稍后再试！");o&&(CLODOP.CVERSION<"3.0.0.2"&&(d?document.write(c):document.documentElement.innerHTML=c+document.documentElement.innerHTML),t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e))}else{var u=d&&navigator.userAgent.indexOf("x64")>=0;if(void 0!=e||void 0!=t?o=d?e:t:null==Uo?(o=document.createElement("object"),o.setAttribute("width",0),o.setAttribute("height",0),o.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),d?o.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):o.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(o),Uo=o):o=Uo,null==o||"undefined"==typeof o.VERSION)return navigator.userAgent.indexOf("Chrome")>=0&&(document.documentElement.innerHTML=l+document.documentElement.innerHTML),navigator.userAgent.indexOf("Firefox")>=0&&(document.documentElement.innerHTML=r+document.documentElement.innerHTML),u?document.write(i):d?document.write(s):document.documentElement.innerHTML=s+document.documentElement.innerHTML,o}return o.VERSION<"6.0"?(Jo()||(u?document.write(n):d?document.write(a):document.documentElement.innerHTML=a+document.documentElement.innerHTML),o):o}catch(p){alert("getLodop出错:"+p)}}var Zo={components:{},data:function(){return{type:"结算单",resPrice:0,company:"XXXXX",t4:[{name:"应付金额",price:"2450.00",name2:"剩余应付金额",price2:"2450.00"}],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{printPdf:function(){var e=Yo();e.SET_PRINT_STYLE("FontSize",12);var t="<style> table,td { border: 1 solid #000000;border-collapse:collapse;text-align:center; }  table,th { border: 0;border-collapse:collapse;text-align:center;} h2{text-align:center;} .remark{margin-top:20px} .row{font-size:12px} .c1{float:left;width:33.33333%}  .c2{float:left;width:65%} .border{border-bottom: 1px solid #797979;width: 120px;float:left} .c3{float:left}</style>",o=t+document.getElementById("form1").innerHTML;e.ADD_PRINT_HTM(74,200,590,1e3,o),e.SET_PRINT_PAGESIZE(1,2100,2970,document.getElementById("form1").innerHTML),e.PREVIEW()}},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data;var t=this.$route.params.list;console.log("%c额就是那","color:#70ff57;font-size:20px;font-weight:bold",t),t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum,this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var o=new Date,s=o.toLocaleString("chinese",{hour12:!1});this.printTime=s.replace(/\//g,"-"),console.log(this.laborOrder)}},es=Zo,ts=(o("c6d0"),Object(l["a"])(es,Wo,Ho,!1,null,"25c59ec8",null)),os=ts.exports,ss=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"text-align":"center"}},[o("form",{attrs:{id:"form1"}},[o("div",{staticClass:"cm"},[o("h2",[e._v(e._s(e.company)+"服务中心"+e._s(e.type))]),o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"c1"},[e._v("工单编号："),o("span",[e._v(e._s(e.laborOrder.workorderCode))])]),o("div",{staticClass:"c1"},[e._v("开单时间："),o("span",[e._v(e._s(e.laborOrder.createTime))])]),o("div",{staticClass:"c1"},[e._v("打印时间："),o("span",[e._v(e._s(e.printTime))])])]),o("table",{staticClass:"t1",staticStyle:{width:"100%","margin-top":"0.9375rem"}},[o("tr",[o("td",[e._v("客户姓名")]),o("td",[e._v(e._s(e.laborOrder.customerName))]),o("td",[e._v("手机号")]),o("td",[e._v(e._s(e.laborOrder.customerPhone))]),o("td",[e._v("车牌号")]),o("td",[e._v(e._s(e.laborOrder.plateNumber))])]),o("tr",[o("td",[e._v("会员卡")]),o("td",[e._v(e._s(e.vipNum)+"张")]),o("td",[e._v("品牌/车型/车系")]),o("td",{attrs:{colspan:"3"}},[e._v(e._s(e.laborOrder.brandName+"/"+e.laborOrder.modelName+"/"+e.laborOrder.seriesName))])]),o("tr",[o("td",[e._v("车架号")]),o("td",[e._v(e._s(e.laborOrder.vehicleIdNum))]),o("td",[e._v("进场时间")]),o("td",[e._v(e._s(e.laborOrder.createTime))]),o("td",[e._v("进场里程")]),o("td",[e._v(e._s(e.laborOrder.mileage))])])]),e.t2.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(工时)")]):e._e(),e.t2.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(0),e._l(e.t2,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(s+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all1)+"元")])])])],2):e._e(),e.t3.length>0?o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("维修/保养项目(配件)")]):e._e(),e.t3.length>0?o("table",{staticClass:"t2",staticStyle:{width:"100%"}},[e._m(1),e._l(e.t3,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(s+1))]),o("td",[e._v(e._s(t.goodsName))]),o("td",[e._v(e._s(t.goodsCount))]),o("td",[e._v(e._s(t.price))]),o("td",[e._v(e._s(t.memberCardGoodsPrice))]),o("td",[e._v(e._s(t.subtotalMoney))]),o("td",[e._v(e._s(t.remarks))])])}),o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"7"}},[o("div",{staticStyle:{"padding-right":"0.3125rem"}},[e._v("金额合计:"+e._s(e.all2)+"元")])])])],2):e._e(),o("h4",{staticStyle:{color:"#666666","text-align":"left"}},[e._v("预计合计："+e._s(Number(e.all1)+Number(e.all2))+"元")]),o("table",{staticClass:"t2",staticStyle:{width:"40%"}},e._l(e.t4,function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(e.resPrice))]),o("td",[e._v(e._s(t.name2))]),o("td",[e._v(e._s(e.resPrice))])])}),0),o("div",{staticClass:"remark",staticStyle:{color:"#666666","text-align":"left","margin-top":"1.25rem"}},[e._v("*备注："),o("span",[e._v(e._s(e.remark))])]),o("div",{staticStyle:{"margin-top":"1.5625rem","margin-bottom":"1.5625rem",color:"#666666","text-align":"left"}},[e._v("门店地址："),o("span",[e._v(e._s(e.addr))])]),o("div",[o("div",{staticClass:"c2"},[e._v("联系电话："),o("span",[e._v(e._s(e.tel))])]),o("div",{staticClass:"c3"},[e._v("客户签字：")]),o("div",{staticClass:"border"})])])])]),o("button",{on:{click:e.printPdf}},[e._v("打印")])])},as=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("服务项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("tr",[o("td",[e._v("序号")]),o("td",[e._v("商品项目")]),o("td",[e._v("数量")]),o("td",[e._v("价格/元")]),o("td",[e._v("优惠")]),o("td",[e._v("总价/元")]),o("td",[e._v("备注")])])}],is={components:{},data:function(){return{type:"结算单",resPrice:0,company:"XXXXX",t4:[{name:"应付金额",price:"2450.00",name2:"剩余应付金额",price2:"2450.00"}],tel:"17717717717",addr:"上海市嘉定区",remark:"1",prePrice:"2100.00",all2:0,t3:[],all1:0,t2:[],vipNum:0,printTime:"",date:"2019-10-10 10:00:00",orderNum:"1910100094100584"}},computed:{},methods:{printPdf:function(){var e=Yo();e.SET_PRINT_STYLE("FontSize",12);var t="<style> table,td { border: 1 solid #000000;border-collapse:collapse;text-align:center; }  table,th { border: 0;border-collapse:collapse;text-align:center;} h2{text-align:center;} .remark{margin-top:20px} .row{font-size:12px} .c1{float:left;width:33.33333%}  .c2{float:left;width:65%} .border{border-bottom: 1px solid #797979;width: 120px;float:left} .c3{float:left}</style>",o=t+document.getElementById("form1").innerHTML;e.ADD_PRINT_HTM(74,200,590,1e3,o),e.SET_PRINT_PAGESIZE(1,2100,2970,document.getElementById("form1").innerHTML),e.PREVIEW()}},mounted:function(){},created:function(){var e=this;this.laborOrder=this.$route.params.data;var t=this.$route.params.list;console.log("%c额就是那","color:#70ff57;font-size:20px;font-weight:bold",t),t.map(function(t){1==t.type?(e.t2.push(t),e.all1+=Number(t.subtotalMoney)):(e.t3.push(t),e.all2+=Number(t.subtotalMoney))}),this.resPrice=this.$route.params.resPrice,this.vipNum=this.$route.params.vipNum,this.type=this.$route.params.type,console.log("%c单类型","color:#70ff57;font-size:20px;font-weight:bold",this.type);var o=new Date,s=o.toLocaleString("chinese",{hour12:!1});this.printTime=s.replace(/\//g,"-"),console.log(this.laborOrder)}},ns=is,rs=(o("e71c"),Object(l["a"])(ns,ss,as,!1,null,"768a15b3",null)),ls=rs.exports,cs=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[e._m(0),e._m(1),o("el-tabs",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"效果统计",name:"first"}},[o("resStatistical")],1),o("el-tab-pane",{attrs:{label:"发放优惠券",name:"second"}},[e._v("配置管理")]),o("el-tab-pane",{attrs:{label:"设置活动券",name:"third"}},[e._v("角色管理")]),o("el-tab-pane",{attrs:{label:"一体机优惠券管理",name:"fourth"}},[e._v("定时任务补偿")])],1)],1)},ds=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-left":"120px"}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("营销管理/优惠券设置")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%","margin-bottom":"40px"}},[o("hr")])}],us=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"resStatistical"},[o("div",{staticClass:"header"},[o("el-row",{staticStyle:{"text-align":"center"}},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("领取次数")]),o("div",[e._v(e._s(e.getNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("使用数")]),o("div",[e._v(e._s(e.useNum)+"次")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("拉新效果")]),o("div",[e._v(e._s(e.pullNew)+"人")])])]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("div",[e._v("收益效果")]),o("div",[e._v(e._s(e.getMoney)+"元")])])])],1)],1),o("div",{staticClass:"body"}),o("div",{staticClass:"footer"})])},ps=[],ms={components:{},data:function(){return{getMoney:"0",pullNew:"5",useNum:"0",getNum:"7"}},computed:{},methods:{},mounted:function(){},created:function(){}},hs=ms,fs=(o("8eb7"),Object(l["a"])(hs,us,ps,!1,null,"2a78d224",null)),vs=fs.exports,gs={components:{resStatistical:vs},data:function(){return{activeName:"first"}},computed:{},methods:{handleClick:function(e,t){console.log(e,t)}},mounted:function(){},created:function(){}},bs=gs,ys=Object(l["a"])(bs,cs,ds,!1,null,"2115c1c4",null),_s=ys.exports;s["default"].use(y["a"]);var Cs=new y["a"]({routes:[{path:"/noVip",name:"noVip",component:D},{path:"/demo",name:"demo",component:k},{path:"/",name:"orderList",component:J},{path:"/quickOrder",name:"quickOrder",component:ke,meta:{keepAlive:!0},children:[]},{path:"/quickOrderBill",name:"quickOrderBill",component:qe},{path:"/comprehensiveOrder",name:"comprehensiveOrder",component:to},{path:"/close",name:"close",component:Ao},{path:"/billdetail",name:"billdetail",component:Fo},{path:"/financialClose",name:"financialClose",component:Ko},{path:"/A4",name:"A4",component:T},{path:"/closeOrder",name:"closeOrder",component:os},{path:"/closeOrders",name:"closeOrders",component:ls},{path:"/offer",name:"offer",component:T},{path:"/index",name:"index",component:_s},{path:"/resStatistical",name:"resStatistical",component:vs}],mode:"history",base:"/orderList/"}),xs=o("2f62");s["default"].use(xs["a"]);var ws={pjtnews:0,count:1,userInfo:{},token:null},Ss={add:function(e){e.count+=1},reduce:function(e){e.count-=1},increment:function(e){e.userInfo={name:"王珊",age:"21"}},setToken:function(e,t){e.token=t}},ks={increment:function(e){e.commit("increment")},setToken:function(e){e.commit("setToken")}},Ns=new xs["a"].Store({state:ws,mutations:Ss,actions:ks}),Ls=o("df45"),Os=o.n(Ls),$s=o("5c96"),Is=o.n($s);o("0fae");s["default"].prototype.$http=b,s["default"].config.productionTip=!1,s["default"].use(Os.a),s["default"].use(Is.a),new s["default"]({router:Cs,store:Ns,render:function(e){return e(d)}}).$mount("#app")},5737:function(e,t,o){},"5a3f":function(e,t,o){"use strict";var s=o("6810"),a=o.n(s);a.a},"5a63":function(e,t,o){"use strict";var s=o("6063"),a=o.n(s);a.a},6063:function(e,t,o){},"64a9":function(e,t,o){},6810:function(e,t,o){},"68bc":function(e,t,o){},"69ec":function(e,t,o){"use strict";var s=o("3141"),a=o.n(s);a.a},"733e":function(e,t,o){"use strict";var s=o("f0a6"),a=o.n(s);a.a},"75fd":function(e,t,o){},"7aa9":function(e,t,o){},"7b1f":function(e,t,o){},"7b57":function(e,t,o){"use strict";var s=o("e8f6"),a=o.n(s);a.a},"81cf":function(e,t,o){},8899:function(e,t,o){"use strict";var s=o("533d"),a=o.n(s);a.a},"8b5a":function(e,t,o){},"8c27":function(e,t,o){},"8c44":function(e,t,o){"use strict";var s=o("d09e"),a=o.n(s);a.a},"8df8":function(e,t,o){"use strict";var s=o("aee3"),a=o.n(s);a.a},"8eb7":function(e,t,o){"use strict";var s=o("5737"),a=o.n(s);a.a},9326:function(e,t,o){"use strict";var s=o("186a"),a=o.n(s);a.a},"994e":function(e,t,o){},"9bbb":function(e,t,o){},aee3:function(e,t,o){},afa3:function(e,t,o){"use strict";var s=o("c9b1"),a=o.n(s);a.a},c013:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAgCAYAAABQISshAAAD3ElEQVRYR+2YS4gcVRSG/7+6R6ILFwZRiKIL4yNKdOG4UMFkNQkoouIDnwliZJy6dXuCQckm40qRoFV1e3SMQiIGFIOYXVQEI0hGDSRGmJioIPjYJIoKio/pql+qZzp2t11d82CYaUkt657Xd8895z5oq9oJaQMW/vs6Mt7KhXJD61ItlPF2u0r1VGxLIwvhb9FAKi55SeClRVAE9y0r4eVnHuPP3WQXBaTiJtcIpQ+KIJrGf0iV3OeCvg/zdHoFBAKO1Tz2vzDE3zrB9AxIFjzJV0OfHRvTkgAhkrWh6dvfaaZtVTcT2CTplmxcqfzYlkbbZZcESGQ8dquXoaqWl6XjAJZPwfCG2PJAs05PgGQBV2JtELVzOvhDkx5vaq6XngHJAKzT64DumYLRWGRKg42s9BTI5lFdmEjjEFbUUcDB2HCs3ggWY2dv30eKaqS5FqzTw4BemUoK/pa4NquXngOp14tLdgl8qA5DHJgkB5YECMEngNqnM93p09RbQ4/b/pXX2JIAmSnA/+GsVch6OiOFU9RBoHEfmcPpt9Dd6YwUTtGSzIhwnB6PpUn6GT32g1gF4eLZwmRL69SRoqV9tlg6CWAC0GEA5wO8HMBlAM6aT9faD/LJyOcn7Uas0x2AdgNYNlugPHlBldiUovZxE+sCMrUEH8/Tza2RTg8FWZG23xtsVUcgrZ4vTF+Z520f5ImGncqorpkUvhv1+VPjXxBNrqNX2tfJVx7IF5HxVjUUrEuehrgJxDkAThJ6OzSlR7Px4Re1Iq3p+/mAEAxCQ5fZCJw2EtoK4JJpm+NEsrUxgdbpDUB3t/vLAeG6yPDdTLjbobJx2LNVbYH07NxgtDsypQemfb0DYKCTnVS80gU8OvyczkzP0McQWlbBf0GEz6PAuzozVqlqr6RbuwS4JzLeXUGklfT05VxAqHRjGJR3WacBQBlIzscJ1nBjOMxfrEt2AHykWZC2mn7T3IFIvhb6fNDEOtujfu0eHL+NDC+qz2ZVRyFdMWsYj9dFQzwYOG0j1PXxjkhvC015r40VgGppCszWuGq1lqfMbD3a8K/VKPUdKQjsj8h49baYNYJZQwAo/1k+uH0Lf7cufQvA7QUTtzkyfL7dV6Lyia6XfuvSrIjrt7HOHyciw6vmAtCuY2P5oOoFn+uNyfWh3zfeabwAJHEA/TzDAkdiw1Ob3HyA7Kj6karbnaRej7mQRc6tS98EcGe7HMH3QsOOHabIZt54ECUjrRemaUnix8j3zu2arZk4tU73ArofwHoAe0S+H/vcMRPd2coMO12bKK0QXA/iK5AfRX7+jt6w/w8CCVT6ND3rtgAAAABJRU5ErkJggg=="},c063:function(e,t,o){},c14b:function(e,t,o){},c5a5:function(e,t,o){},c6d0:function(e,t,o){"use strict";var s=o("0807"),a=o.n(s);a.a},c907:function(e,t,o){"use strict";var s=o("ca0a"),a=o.n(s);a.a},c994:function(e,t,o){"use strict";var s=o("d7b6"),a=o.n(s);a.a},c9b1:function(e,t,o){},ca0a:function(e,t,o){},ced6:function(e,t,o){"use strict";var s=o("33cb"),a=o.n(s);a.a},d09e:function(e,t,o){},d45a:function(e,t,o){},d7b6:function(e,t,o){},e264:function(e,t,o){"use strict";var s=o("e581"),a=o.n(s);a.a},e4c9:function(e,t,o){},e581:function(e,t,o){},e71c:function(e,t,o){"use strict";var s=o("0580"),a=o.n(s);a.a},e8f6:function(e,t,o){},f0a6:function(e,t,o){},f321:function(e,t,o){"use strict";var s=o("7b1f"),a=o.n(s);a.a}});